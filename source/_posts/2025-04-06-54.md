---
title: 使用 Mosh：优化高延迟网络下的 SSH 连接体验
date: 2025-04-06 17:58:34
categories: ["默认分类"]
tags: []
---

## 高延迟网络下糟糕的 SSH 体验
最近购入了一台 **伦敦** 的服务器，优点是便宜量大、相对稳定不丢包，缺点是**延迟稳定的高**，以至于在 SSH 连接使用服务器时，<u>**键盘输入延迟严重，丝毫不跟手**</u>，体验糟糕。
于是在网上搜索解决方案🔍，发现了一款宝藏引用 `Mosh`。
![2025-04-06T09:53:57.png][1]
## Mosh
在网络延迟较高或经常断线的环境中，传统 SSH 会话（如 Termius、OpenSSH）常常出现卡顿、掉线、粘贴延迟等问题。为此，推荐使用 Mosh（Mobile Shell） 来替代传统 SSH。
> **关于 Mosh（Mobile Shell）**
>
> Mosh 是一种比 SSH 更适合远程连接的终端工具，尤其适用于高延迟、不稳定网络环境。它支持断网重连、IP 变更不中断连接，并提供更流畅的打字体验。
>
> 相较于传统 SSH，Mosh 使用 UDP 协议，通过本地预回显机制让输入响应几乎无延迟。
>
> 官网：https://mosh.org/
>
> 安装方法（Ubuntu）：
>
> ```bash
> sudo apt install mosh
> ```
>
> 使用方式：
>
> ```bash
> mosh username@server --ssh='ssh -p 2222'
> ```
>
> 注意：需要开放 UDP 60000-61000 端口，服务端也需安装 mosh。

✅ Mosh 的优势
- 容错强：连接中断后自动重连（即使你换了 IP）

- 低延迟响应：本地预输入回显，打字不卡顿

- 适合不稳定网络：如移动网络、海外跳板机、4G 服务器场景

## Termius 中的方便使用
`Termius` 是一款强大的 SSH 客户端，支持开启 `Mosh` 优化高延的服务器连接。
开启方法：
    1. 编辑服务器设置。
    2. 在配置的最下方找到 Mosh 设置，选择 `Enable` 打开即可。
    3. 点击 `Connect` 连接，后续的连接将通过 Mosh 实现。
![2025-04-06T09:50:06.png][2]

实测在高延迟的**伦敦**服务器连接中，也能够<u>**实现良好的键盘输入跟手体验**</u>。


  [1]: https:///images/typecho//2025/04/1033170522.png
  [2]: https:///images/typecho//2025/04/3150756892.png
