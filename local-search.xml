<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>OpenClaw Memory Search é…ç½®ä¼˜åŒ– - æœ¬åœ° Embedding æ–¹æ¡ˆ</title>
    <link href="/2026/02/10/OpenClaw-Memory-Search-%E6%9C%AC%E5%9C%B0Embedding%E9%85%8D%E7%BD%AE/"/>
    <url>/2026/02/10/OpenClaw-Memory-Search-%E6%9C%AC%E5%9C%B0Embedding%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åœ¨ä½¿ç”¨ OpenClaw ä½œä¸ºæ—¥å¸¸åŠ©æ‰‹æ—¶ï¼ŒMemory Searchï¼ˆè®°å¿†æ£€ç´¢ï¼‰æ˜¯ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚è¿‘æœŸåœ¨é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><h3 id="1-QMD-Backend-è¶…æ—¶"><a href="#1-QMD-Backend-è¶…æ—¶" class="headerlink" title="1. QMD Backend è¶…æ—¶"></a>1. QMD Backend è¶…æ—¶</h3><p>OpenClaw æ”¯æŒä½¿ç”¨ <a href="https://github.com/tobi/qmd">QMD</a> ä½œä¸ºè®°å¿†åç«¯ï¼Œä½†åœ¨ VPS ç¯å¢ƒä¸­é‡åˆ°æ€§èƒ½é—®é¢˜ï¼š</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang">qmd <span class="hljs-keyword">query</span> ... timed out <span class="hljs-keyword">after</span> <span class="hljs-number">4000</span>ms<br></code></pre></td></tr></table></figure><p><strong>åŸå› åˆ†æ</strong>ï¼š</p><ul><li>QMD æ¯æ¬¡æ‰§è¡Œéƒ½é‡æ–°åŠ è½½æ¨¡å‹ï¼ˆå†·å¯åŠ¨ï¼‰</li><li>æ¨¡å‹æ–‡ä»¶æ€»è®¡ 2.1GBï¼š<ul><li>embeddinggemma-300M: 314MB</li><li>qwen3-reranker-0.6b: 610MB</li><li>qmd-query-expansion-1.7B: 1.2GB</li></ul></li></ul><h3 id="2-memory-search-å·¥å…·æŠ¥é”™"><a href="#2-memory-search-å·¥å…·æŠ¥é”™" class="headerlink" title="2. memory_search å·¥å…·æŠ¥é”™"></a>2. memory_search å·¥å…·æŠ¥é”™</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">No</span> API key <span class="hljs-built_in">found</span> <span class="hljs-keyword">for</span> provider &quot;openai&quot;<br>memory_search tool disabled<br></code></pre></td></tr></table></figure><p>å°è¯•ä½¿ç”¨ memory_search å·¥å…·æ—¶ï¼Œç³»ç»Ÿè¦æ±‚é…ç½® OpenAI API Keyï¼Œä½†å®é™…ä¸Šæˆ‘å¸Œæœ›èƒ½ç”¨æœ¬åœ°æ–¹æ¡ˆã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆï¼šæœ¬åœ°-Embedding"><a href="#è§£å†³æ–¹æ¡ˆï¼šæœ¬åœ°-Embedding" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼šæœ¬åœ° Embedding"></a>è§£å†³æ–¹æ¡ˆï¼šæœ¬åœ° Embedding</h2><p>æŸ¥é˜… <a href="https://docs.openclaw.ai/concepts/memory">OpenClaw å®˜æ–¹æ–‡æ¡£</a> åï¼Œå‘ç°å¯ä»¥é…ç½® <code>memorySearch.provider = &quot;local&quot;</code> ä½¿ç”¨æœ¬åœ° embedding æ¨¡å‹ã€‚</p><h3 id="æœ€ç»ˆé…ç½®"><a href="#æœ€ç»ˆé…ç½®" class="headerlink" title="æœ€ç»ˆé…ç½®"></a>æœ€ç»ˆé…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;agents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;defaults&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;memorySearch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;local&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;local&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;modelPath&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hf:ggml-org/embeddinggemma-300M-GGUF/embeddinggemma-300M-Q8_0.gguf&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;fallback&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;none&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;hybrid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;vectorWeight&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.7</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;textWeight&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.3</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;candidateMultiplier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;cache&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;maxEntries&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50000</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h3><table><thead><tr><th>é…ç½®é¡¹</th><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>provider</code></td><td><code>local</code></td><td>ä½¿ç”¨æœ¬åœ° embedding</td></tr><tr><td><code>modelPath</code></td><td>embeddinggemma-300M</td><td>æœ¬åœ° GGUF æ¨¡å‹</td></tr><tr><td><code>hybrid.enabled</code></td><td><code>true</code></td><td>å¯ç”¨æ··åˆæ£€ç´¢</td></tr><tr><td><code>vectorWeight</code></td><td><code>0.7</code></td><td>å‘é‡æ£€ç´¢æƒé‡ 70%</td></tr><tr><td><code>textWeight</code></td><td><code>0.3</code></td><td>æ–‡æœ¬æ£€ç´¢æƒé‡ 30%</td></tr><tr><td><code>cache.enabled</code></td><td><code>true</code></td><td>å¯ç”¨ç¼“å­˜</td></tr><tr><td><code>maxEntries</code></td><td><code>50000</code></td><td>æœ€å¤§ç¼“å­˜æ¡ç›®</td></tr></tbody></table><h2 id="æ··åˆæ£€ç´¢åŸç†"><a href="#æ··åˆæ£€ç´¢åŸç†" class="headerlink" title="æ··åˆæ£€ç´¢åŸç†"></a>æ··åˆæ£€ç´¢åŸç†</h2><h3 id="å‘é‡æ£€ç´¢ï¼ˆVector-Searchï¼‰"><a href="#å‘é‡æ£€ç´¢ï¼ˆVector-Searchï¼‰" class="headerlink" title="å‘é‡æ£€ç´¢ï¼ˆVector Searchï¼‰"></a>å‘é‡æ£€ç´¢ï¼ˆVector Searchï¼‰</h3><ul><li>ä½¿ç”¨è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…</li><li>æ‰¾åˆ°æ„æ€ç›¸è¿‘ä½†ç”¨è¯ä¸åŒçš„å†…å®¹</li><li>ä¾‹å¦‚ï¼šæœç´¢â€åŸºé‡‘â€èƒ½æ‰¾åˆ°â€æŒä»“â€</li></ul><h3 id="æ–‡æœ¬æ£€ç´¢ï¼ˆBM25ï¼‰"><a href="#æ–‡æœ¬æ£€ç´¢ï¼ˆBM25ï¼‰" class="headerlink" title="æ–‡æœ¬æ£€ç´¢ï¼ˆBM25ï¼‰"></a>æ–‡æœ¬æ£€ç´¢ï¼ˆBM25ï¼‰</h3><ul><li>å…³é”®è¯ç²¾ç¡®åŒ¹é…</li><li>é€‚åˆåŒ¹é…ä»£ç ã€ID ç­‰</li><li>ä¾‹å¦‚ï¼šæœç´¢â€012895â€èƒ½æ‰¾åˆ°åŸºé‡‘ä»£ç </li></ul><h3 id="èåˆç­–ç•¥"><a href="#èåˆç­–ç•¥" class="headerlink" title="èåˆç­–ç•¥"></a>èåˆç­–ç•¥</h3><figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">æœ€ç»ˆåˆ†æ•° </span>=<span class="hljs-string"> 0.7 Ã— å‘é‡åˆ†æ•° + 0.3 Ã— æ–‡æœ¬åˆ†æ•°</span><br></code></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æœç´¢&quot;åŸºé‡‘ æŒä»“&quot;</span><br>$ memory_search(<span class="hljs-string">&quot;åŸºé‡‘ æŒä»“&quot;</span>)<br><br>ç»“æœï¼š<br>1. memory/2026-02-05.md (39%) - åŸºé‡‘ç»„åˆçŠ¶æ€è¡¨<br>2. MEMORY.md (38%) - é•¿æœŸè®°å¿†-æŒä»“åŸºé‡‘<br></code></pre></td></tr></table></figure><h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><ol><li><strong>å®Œå…¨å…è´¹</strong> - ä¸éœ€è¦ OpenAI&#x2F;Voyage&#x2F;Gemini API Key</li><li><strong>éšç§å®‰å…¨</strong> - æ‰€æœ‰æ•°æ®æœ¬åœ°å¤„ç†</li><li><strong>å“åº”å¿«é€Ÿ</strong> - é¦–æ¬¡åŠ è½½åæœ‰ç¼“å­˜</li><li><strong>æ··åˆæ£€ç´¢</strong> - ç»“åˆè¯­ä¹‰å’Œå…³é”®è¯åŒ¹é…</li></ol><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ul><li>æ¨¡å‹æ–‡ä»¶å·²ç¼“å­˜ï¼š<code>~/.node-llama-cpp/models/hf_ggml-org_embeddinggemma-300M-Q8_0.gguf</code></li><li>QMD Backend æš‚æ—¶ä¿ç•™é…ç½®ï¼ˆç­‰å¾…å®˜æ–¹ä¿®å¤å†·å¯åŠ¨é—®é¢˜ï¼‰</li><li>memory_search ä¼šè‡ªåŠ¨å›é€€åˆ°æœ¬åœ° embedding</li></ul><h2 id="ç›¸å…³-Issue"><a href="#ç›¸å…³-Issue" class="headerlink" title="ç›¸å…³ Issue"></a>ç›¸å…³ Issue</h2><ul><li><a href="https://github.com/openclaw/openclaw/issues/12752">QMD query command is slow due to model cold start</a></li><li><a href="https://github.com/openclaw/openclaw/issues/11308">QMD Memory Backend: Systemic Issues Requiring Comprehensive Fix</a></li></ul><h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><ul><li><strong>2026-02-10</strong>: å®Œæˆæœ¬åœ° embedding é…ç½®</li></ul>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenClaw</tag>
      
      <tag>Memory Search</tag>
      
      <tag>Local Embedding</tag>
      
      <tag>QMD</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•ç”¨ Python å®ç°åŸºé‡‘è¶‹åŠ¿åˆ†æä¸ä¿¡å·ç”Ÿæˆ</title>
    <link href="/2026/02/06/fund-analysis-python/"/>
    <url>/2026/02/06/fund-analysis-python/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡åŸºäº OpenClaw åŸºé‡‘åˆ†ææŠ€èƒ½çš„å®ç°ï¼Œåˆ†äº«æŠ€æœ¯æŒ‡æ ‡çš„ Python å®ç°æ–¹æ³•ã€‚</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Serper.dev API è·å–æœç´¢æ•°æ®ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠå¦‚ä½•ç”¨ Python å®ç°åŸºé‡‘çš„<strong>è¶‹åŠ¿åˆ†æ</strong>å’Œ<strong>ä¿¡å·ç”Ÿæˆ</strong>ã€‚</p><p>æœ¬æ–‡å°†æ¶µç›–ï¼š</p><ul><li>ç§»åŠ¨å¹³å‡çº¿ï¼ˆMAï¼‰çš„è®¡ç®—</li><li>MACD æŒ‡æ ‡çš„å®ç°</li><li>æœ€å¤§å›æ’¤ã€æ³¢åŠ¨ç‡ç­‰é£é™©æŒ‡æ ‡</li><li>å¦‚ä½•ç”Ÿæˆäº¤æ˜“ä¿¡å·</li></ul><hr><h2 id="é›¶ã€çœŸå®æ•°æ®è·å–"><a href="#é›¶ã€çœŸå®æ•°æ®è·å–" class="headerlink" title="é›¶ã€çœŸå®æ•°æ®è·å–"></a>é›¶ã€çœŸå®æ•°æ®è·å–</h2><p>ä½¿ç”¨ä¸œæ–¹è´¢å¯Œ API è·å–åŸºé‡‘å†å²å‡€å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_fund_history</span>(<span class="hljs-params">fund_code: <span class="hljs-built_in">str</span>, days: <span class="hljs-built_in">int</span> = <span class="hljs-number">60</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]:<br>    <span class="hljs-string">&quot;&quot;&quot;è·å–åŸºé‡‘å†å²å‡€å€¼ - çœŸå®æ•°æ®&quot;&quot;&quot;</span><br>    url = <span class="hljs-string">&quot;http://api.fund.eastmoney.com/f10/lsjz&quot;</span><br>    end_date = datetime.now().strftime(<span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)<br>    start_date = (datetime.now() - timedelta(days=days+<span class="hljs-number">30</span>)).strftime(<span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)<br>    <br>    params = &#123;<br>        <span class="hljs-string">&quot;fundCode&quot;</span>: fund_code,<br>        <span class="hljs-string">&quot;pageIndex&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;pageSize&quot;</span>: days,<br>        <span class="hljs-string">&quot;startDate&quot;</span>: start_date,<br>        <span class="hljs-string">&quot;endDate&quot;</span>: end_date,<br>        <span class="hljs-string">&quot;_&quot;</span>: <span class="hljs-built_in">int</span>(time.time() * <span class="hljs-number">1000</span>)<br>    &#125;<br>    headers = &#123;<br>        <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36&quot;</span>,<br>        <span class="hljs-string">&quot;Referer&quot;</span>: <span class="hljs-string">f&quot;http://fund.eastmoney.com/jjjz_<span class="hljs-subst">&#123;fund_code&#125;</span>.html&quot;</span>,<br>    &#125;<br>    <br>    <span class="hljs-keyword">try</span>:<br>        r = requests.get(url, params=params, headers=headers, timeout=<span class="hljs-number">15</span>)<br>        <span class="hljs-keyword">if</span> r.status_code == <span class="hljs-number">200</span>:<br>            data = r.json()<br>            <span class="hljs-keyword">if</span> data.get(<span class="hljs-string">&quot;Data&quot;</span>):<br>                records = data[<span class="hljs-string">&quot;Data&quot;</span>].get(<span class="hljs-string">&quot;LSJZList&quot;</span>, [])<br>                <span class="hljs-comment"># è§£æä¸ºæ ‡å‡†æ ¼å¼</span><br>                <span class="hljs-keyword">return</span> [&#123;<br>                    <span class="hljs-string">&quot;date&quot;</span>: r[<span class="hljs-string">&quot;FSRQ&quot;</span>],<br>                    <span class="hljs-string">&quot;nav&quot;</span>: <span class="hljs-built_in">float</span>(r[<span class="hljs-string">&quot;DWJZ&quot;</span>]),<br>                    <span class="hljs-string">&quot;change&quot;</span>: <span class="hljs-built_in">float</span>(r[<span class="hljs-string">&quot;JZZZL&quot;</span>])<br>                &#125; <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> records]<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error fetching <span class="hljs-subst">&#123;fund_code&#125;</span>: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">return</span> []<br></code></pre></td></tr></table></figure><p><strong>API è¿”å›å­—æ®µ</strong>ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>FSRQ</code></td><td>å‡€å€¼æ—¥æœŸ</td></tr><tr><td><code>DWJZ</code></td><td>å•ä½å‡€å€¼</td></tr><tr><td><code>LJJZ</code></td><td>ç´¯è®¡å‡€å€¼</td></tr><tr><td><code>JZZZL</code></td><td>æ—¥å¢é•¿ç‡(%)</td></tr></tbody></table><p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è·å– 60 å¤©å†å²æ•°æ®</span><br>data = get_fund_history(<span class="hljs-string">&quot;012895&quot;</span>, days=<span class="hljs-number">60</span>)<br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data[:<span class="hljs-number">5</span>]:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;item[<span class="hljs-string">&#x27;date&#x27;</span>]&#125;</span>: <span class="hljs-subst">&#123;item[<span class="hljs-string">&#x27;nav&#x27;</span>]&#125;</span> (<span class="hljs-subst">&#123;item[<span class="hljs-string">&#x27;change&#x27;</span>]&#125;</span>%)&quot;</span>)<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs subunit">2026<span class="hljs-string">-02</span><span class="hljs-string">-05</span>: 0.9993 (<span class="hljs-string">-1</span>.85%)<br>2026<span class="hljs-string">-02</span><span class="hljs-string">-04</span>: 1.0181 (<span class="hljs-string">-1</span>.35%)<br>2026<span class="hljs-string">-02</span><span class="hljs-string">-03</span>: 1.0320 (0.64%)<br>...<br></code></pre></td></tr></table></figure><blockquote><p>âš ï¸ æ³¨æ„ï¼šä¸œæ–¹è´¢å¯Œ API å¯èƒ½æœ‰è®¿é—®é¢‘ç‡é™åˆ¶ï¼Œå»ºè®®è®¾ç½®åˆç†çš„è¯·æ±‚é—´éš”ã€‚</p></blockquote><hr><h2 id="ä¸€ã€æ ¸å¿ƒæ•°æ®ç»“æ„"><a href="#ä¸€ã€æ ¸å¿ƒæ•°æ®ç»“æ„" class="headerlink" title="ä¸€ã€æ ¸å¿ƒæ•°æ®ç»“æ„"></a>ä¸€ã€æ ¸å¿ƒæ•°æ®ç»“æ„</h2><p>é¦–å…ˆï¼Œå®šä¹‰åŸºé‡‘æ•°æ®å’ŒåŸºå‡†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åŸºé‡‘ç»„åˆ</span><br>FUNDS = &#123;<br>    <span class="hljs-string">&quot;012895&quot;</span>: &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å¤©å¼˜ä¸­è¯ç§‘åˆ›åˆ›ä¸š50ETFè”æ¥C&quot;</span>, <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;ETF&quot;</span>, <span class="hljs-string">&quot;benchmark&quot;</span>: <span class="hljs-string">&quot;åˆ›ä¸šæ¿æŒ‡&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;021190&quot;</span>: &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;å—æ–¹äºšå¤ªç²¾é€‰ETFè”æ¥(QDII)C&quot;</span>, <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;QDII&quot;</span>, <span class="hljs-string">&quot;benchmark&quot;</span>: <span class="hljs-string">&quot;æ’ç”ŸæŒ‡æ•°&quot;</span>&#125;,<br>    <span class="hljs-string">&quot;017992&quot;</span>: &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;åæ³°æŸç‘è‡´è¿œæ··åˆC&quot;</span>, <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Mixed&quot;</span>, <span class="hljs-string">&quot;benchmark&quot;</span>: <span class="hljs-string">&quot;æ²ªæ·±300&quot;</span>&#125;,<br>&#125;<br><br><span class="hljs-comment"># å‡€å€¼æ•°æ®ç»“æ„</span><br>nav_data = [<br>    &#123;<span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2026-02-04&quot;</span>, <span class="hljs-string">&quot;nav&quot;</span>: <span class="hljs-number">1.0181</span>, <span class="hljs-string">&quot;change&quot;</span>: -<span class="hljs-number">1.35</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2026-02-03&quot;</span>, <span class="hljs-string">&quot;nav&quot;</span>: <span class="hljs-number">1.0320</span>, <span class="hljs-string">&quot;change&quot;</span>: <span class="hljs-number">0.64</span>&#125;,<br>    <span class="hljs-comment"># ...</span><br>]<br></code></pre></td></tr></table></figure><hr><h2 id="äºŒã€ç§»åŠ¨å¹³å‡çº¿ï¼ˆMAï¼‰è®¡ç®—"><a href="#äºŒã€ç§»åŠ¨å¹³å‡çº¿ï¼ˆMAï¼‰è®¡ç®—" class="headerlink" title="äºŒã€ç§»åŠ¨å¹³å‡çº¿ï¼ˆMAï¼‰è®¡ç®—"></a>äºŒã€ç§»åŠ¨å¹³å‡çº¿ï¼ˆMAï¼‰è®¡ç®—</h2><h3 id="2-1-ç®€å•ç§»åŠ¨å¹³å‡ï¼ˆSMAï¼‰"><a href="#2-1-ç®€å•ç§»åŠ¨å¹³å‡ï¼ˆSMAï¼‰" class="headerlink" title="2.1 ç®€å•ç§»åŠ¨å¹³å‡ï¼ˆSMAï¼‰"></a>2.1 ç®€å•ç§»åŠ¨å¹³å‡ï¼ˆSMAï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_ma</span>(<span class="hljs-params">data: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>], period: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®—ç®€å•ç§»åŠ¨å¹³å‡&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) &lt; period:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(data) / <span class="hljs-built_in">len</span>(data) <span class="hljs-keyword">if</span> data <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(data[-period:]) / period<br></code></pre></td></tr></table></figure><p><strong>åŸç†</strong>ï¼šå–æœ€è¿‘ <code>period</code> ä¸ªä»·æ ¼çš„å¹³å‡å€¼ã€‚</p><table><thead><tr><th>å‘¨æœŸ</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>MA5</td><td>çŸ­æœŸè¶‹åŠ¿ï¼Œæ•æ„Ÿåº¦é«˜</td></tr><tr><td>MA20</td><td>ä¸­æœŸè¶‹åŠ¿ï¼Œæœ€å¸¸ç”¨</td></tr><tr><td>MA60</td><td>é•¿æœŸè¶‹åŠ¿</td></tr></tbody></table><h3 id="2-2-æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼ˆEMAï¼‰"><a href="#2-2-æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼ˆEMAï¼‰" class="headerlink" title="2.2 æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼ˆEMAï¼‰"></a>2.2 æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼ˆEMAï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_ema</span>(<span class="hljs-params">data: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>], period: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">float</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®—æŒ‡æ•°ç§»åŠ¨å¹³å‡&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) &lt; period:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(data) / <span class="hljs-built_in">len</span>(data) <span class="hljs-keyword">if</span> data <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>    <br>    multiplier = <span class="hljs-number">2</span> / (period + <span class="hljs-number">1</span>)  <span class="hljs-comment"># æƒé‡ç³»æ•°</span><br>    ema = data[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">for</span> price <span class="hljs-keyword">in</span> data[<span class="hljs-number">1</span>:]:<br>        ema = price * multiplier + ema * (<span class="hljs-number">1</span> - multiplier)<br>    <span class="hljs-keyword">return</span> ema<br></code></pre></td></tr></table></figure><p><strong>EMA vs SMA</strong>ï¼šEMA å¯¹è¿‘æœŸä»·æ ¼èµ‹äºˆæ›´é«˜æƒé‡ï¼Œååº”æ›´çµæ•ã€‚</p><h3 id="2-3-MA-äº¤å‰ä¿¡å·"><a href="#2-3-MA-äº¤å‰ä¿¡å·" class="headerlink" title="2.3 MA äº¤å‰ä¿¡å·"></a>2.3 MA äº¤å‰ä¿¡å·</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_ma_crossover</span>(<span class="hljs-params">ma5: <span class="hljs-built_in">float</span>, ma20: <span class="hljs-built_in">float</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;æ£€æµ‹ MA äº¤å‰ä¿¡å·&quot;&quot;&quot;</span><br>    diff = ma5 - ma20<br>    <span class="hljs-keyword">if</span> diff &gt; <span class="hljs-number">0.01</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;GOLDEN_CROSS&quot;</span>  <span class="hljs-comment"># é‡‘å‰ï¼Œçœ‹æ¶¨</span><br>    <span class="hljs-keyword">elif</span> diff &lt; -<span class="hljs-number">0.01</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;DEATH_CROSS&quot;</span>   <span class="hljs-comment"># æ­»å‰ï¼Œçœ‹è·Œ</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;NEUTRAL&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="ä¸‰ã€MACD-æŒ‡æ ‡å®ç°"><a href="#ä¸‰ã€MACD-æŒ‡æ ‡å®ç°" class="headerlink" title="ä¸‰ã€MACD æŒ‡æ ‡å®ç°"></a>ä¸‰ã€MACD æŒ‡æ ‡å®ç°</h2><h3 id="3-1-MACD-è®¡ç®—å…¬å¼"><a href="#3-1-MACD-è®¡ç®—å…¬å¼" class="headerlink" title="3.1 MACD è®¡ç®—å…¬å¼"></a>3.1 MACD è®¡ç®—å…¬å¼</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">DIF</span> <span class="hljs-operator">=</span> EMA12 - EMA26<br><span class="hljs-attribute">DEA</span> <span class="hljs-operator">=</span> EMA9(DIF)<br><span class="hljs-attribute">Histogram</span> <span class="hljs-operator">=</span> (DIF - DEA) Ã— <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="3-2-Python-å®ç°"><a href="#3-2-Python-å®ç°" class="headerlink" title="3.2 Python å®ç°"></a>3.2 Python å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_macd</span>(<span class="hljs-params">data: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>], fast: <span class="hljs-built_in">int</span> = <span class="hljs-number">12</span>, slow: <span class="hljs-built_in">int</span> = <span class="hljs-number">26</span>, signal: <span class="hljs-built_in">int</span> = <span class="hljs-number">9</span></span>) -&gt; <span class="hljs-type">Tuple</span>[<span class="hljs-built_in">float</span>, <span class="hljs-built_in">float</span>, <span class="hljs-built_in">float</span>]:<br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®— MACDï¼šDIF, DEA, Histogram&quot;&quot;&quot;</span><br>    ema12 = calculate_ema(data, fast)<br>    ema26 = calculate_ema(data, slow)<br>    <br>    dif = ema12 - ema26<br>    dea = dif * <span class="hljs-number">0.8</span>  <span class="hljs-comment"># DEA æ˜¯ DIF çš„ EMAï¼Œè¿™é‡Œç®€åŒ–å¤„ç†</span><br>    hist = (dif - dea) * <span class="hljs-number">2</span><br>    <br>    <span class="hljs-keyword">return</span> dif, dea, hist<br></code></pre></td></tr></table></figure><h3 id="3-3-MACD-ä¿¡å·è§£è¯»"><a href="#3-3-MACD-ä¿¡å·è§£è¯»" class="headerlink" title="3.3 MACD ä¿¡å·è§£è¯»"></a>3.3 MACD ä¿¡å·è§£è¯»</h3><table><thead><tr><th>çŠ¶æ€</th><th>DIF vs DEA</th><th>Histogram</th><th>ä¿¡å·</th></tr></thead><tbody><tr><td>ğŸŸ¢ å¼ºåŠ¿</td><td>DIF &gt; DEA</td><td>&gt; 0</td><td>çœ‹æ¶¨</td></tr><tr><td>ğŸŸ¡ å¼±åŠ¿</td><td>DIF &gt; DEA</td><td>â‰ˆ 0</td><td>éœ‡è¡</td></tr><tr><td>ğŸ”´ çœ‹è·Œ</td><td>DIF &lt; DEA</td><td>&lt; 0</td><td>çœ‹è·Œ</td></tr></tbody></table><hr><h2 id="å››ã€é£é™©æŒ‡æ ‡è®¡ç®—"><a href="#å››ã€é£é™©æŒ‡æ ‡è®¡ç®—" class="headerlink" title="å››ã€é£é™©æŒ‡æ ‡è®¡ç®—"></a>å››ã€é£é™©æŒ‡æ ‡è®¡ç®—</h2><h3 id="4-1-æœ€å¤§å›æ’¤ï¼ˆMax-Drawdownï¼‰"><a href="#4-1-æœ€å¤§å›æ’¤ï¼ˆMax-Drawdownï¼‰" class="headerlink" title="4.1 æœ€å¤§å›æ’¤ï¼ˆMax Drawdownï¼‰"></a>4.1 æœ€å¤§å›æ’¤ï¼ˆMax Drawdownï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_max_drawdown</span>(<span class="hljs-params">data: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>]</span>) -&gt; <span class="hljs-type">Tuple</span>[<span class="hljs-built_in">float</span>, <span class="hljs-built_in">float</span>, <span class="hljs-built_in">float</span>]:<br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®—æœ€å¤§å›æ’¤ã€å³°å€¼ã€å³°å€¼æ—¥æœŸ&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>    <br>    max_nav = <span class="hljs-number">0</span><br>    max_drawdown = <span class="hljs-number">0</span><br>    peak_idx = <span class="hljs-number">0</span><br>    <br>    <span class="hljs-keyword">for</span> i, nav <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(data):<br>        <span class="hljs-keyword">if</span> nav &gt; max_nav:<br>            max_nav = nav<br>            peak_idx = i<br>        drawdown = (max_nav - nav) / max_nav * <span class="hljs-number">100</span><br>        <span class="hljs-keyword">if</span> drawdown &gt; max_drawdown:<br>            max_drawdown = drawdown<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">round</span>(max_drawdown, <span class="hljs-number">2</span>), max_nav, peak_idx<br></code></pre></td></tr></table></figure><p><strong>å›æ’¤ç­‰çº§</strong>ï¼š</p><table><thead><tr><th>ç­‰çº§</th><th>MaxDD</th><th>é£é™©</th></tr></thead><tbody><tr><td>ğŸŸ¢ ä½</td><td>&lt; 5%</td><td>ä½é£é™©</td></tr><tr><td>ğŸŸ¡ ä¸­</td><td>5-15%</td><td>ä¸­é£é™©</td></tr><tr><td>ğŸ”´ é«˜</td><td>&gt; 15%</td><td>é«˜é£é™©</td></tr></tbody></table><h3 id="4-2-æ³¢åŠ¨ç‡ï¼ˆVolatilityï¼‰"><a href="#4-2-æ³¢åŠ¨ç‡ï¼ˆVolatilityï¼‰" class="headerlink" title="4.2 æ³¢åŠ¨ç‡ï¼ˆVolatilityï¼‰"></a>4.2 æ³¢åŠ¨ç‡ï¼ˆVolatilityï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_volatility</span>(<span class="hljs-params">data: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>]</span>) -&gt; <span class="hljs-built_in">float</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®—æ—¥æ³¢åŠ¨ç‡ï¼ˆå¹´åŒ–ï¼‰&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) &lt; <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <br>    changes = [d <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data[<span class="hljs-number">1</span>:]]  <span class="hljs-comment"># æ—¥æ¶¨è·Œ</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> changes:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <br>    std = statistics.stdev(changes)<br>    annualized = std * math.sqrt(<span class="hljs-number">252</span>)  <span class="hljs-comment"># å¹´åŒ–ï¼ˆ252ä¸ªäº¤æ˜“æ—¥ï¼‰</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">round</span>(annualized * <span class="hljs-number">100</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># è½¬ä¸ºç™¾åˆ†æ¯”</span><br></code></pre></td></tr></table></figure><h3 id="4-3-å¤æ™®æ¯”ç‡ï¼ˆSharpe-Ratioï¼‰"><a href="#4-3-å¤æ™®æ¯”ç‡ï¼ˆSharpe-Ratioï¼‰" class="headerlink" title="4.3 å¤æ™®æ¯”ç‡ï¼ˆSharpe Ratioï¼‰"></a>4.3 å¤æ™®æ¯”ç‡ï¼ˆSharpe Ratioï¼‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_sharpe</span>(<span class="hljs-params">data: <span class="hljs-type">List</span>[<span class="hljs-built_in">float</span>], volatility: <span class="hljs-built_in">float</span>, risk_free: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.03</span></span>) -&gt; <span class="hljs-built_in">float</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®—å¤æ™®æ¯”ç‡&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data <span class="hljs-keyword">or</span> volatility == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <br>    total_return = (data[-<span class="hljs-number">1</span>] - data[<span class="hljs-number">0</span>]) / data[<span class="hljs-number">0</span>]<br>    annualized_return = total_return * (<span class="hljs-number">252</span> / <span class="hljs-built_in">len</span>(data))<br>    <br>    sharpe = (annualized_return - risk_free) / (volatility / <span class="hljs-number">100</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">round</span>(sharpe, <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p><strong>å¤æ™®æ¯”ç‡å«ä¹‰</strong>ï¼š</p><table><thead><tr><th>æ¯”ç‡</th><th>è¯„ä»·</th></tr></thead><tbody><tr><td>&gt; 2.0</td><td>ä¼˜ç§€</td></tr><tr><td>1.5 - 2.0</td><td>è‰¯å¥½</td></tr><tr><td>1.0 - 1.5</td><td>ä¸€èˆ¬</td></tr><tr><td>&lt; 1.0</td><td>è¾ƒå·®</td></tr></tbody></table><hr><h2 id="äº”ã€ç»¼åˆä¿¡å·ç”Ÿæˆ"><a href="#äº”ã€ç»¼åˆä¿¡å·ç”Ÿæˆ" class="headerlink" title="äº”ã€ç»¼åˆä¿¡å·ç”Ÿæˆ"></a>äº”ã€ç»¼åˆä¿¡å·ç”Ÿæˆ</h2><p>å°†æ‰€æœ‰æŒ‡æ ‡ç»„åˆæˆæœ€ç»ˆä¿¡å·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_trend_status</span>(<span class="hljs-params">ma5: <span class="hljs-built_in">float</span>, ma20: <span class="hljs-built_in">float</span>, ma60: <span class="hljs-built_in">float</span>, macd_hist: <span class="hljs-built_in">float</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;ç»¼åˆåˆ¤æ–­è¶‹åŠ¿çŠ¶æ€&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> ma5 &gt; ma20 &gt; ma60 <span class="hljs-keyword">and</span> macd_hist &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ğŸŸ¢ STRONG_UP&quot;</span>   <span class="hljs-comment"># å¼ºåŠ¿ä¸Šæ¶¨</span><br>    <span class="hljs-keyword">elif</span> ma5 &gt; ma20 <span class="hljs-keyword">and</span> macd_hist &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ğŸŸ¡ UP&quot;</span>           <span class="hljs-comment"># æ¸©å’Œä¸Šæ¶¨</span><br>    <span class="hljs-keyword">elif</span> ma5 &gt; ma20:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ğŸŸ¡ UP_STABLE&quot;</span>   <span class="hljs-comment"># ä¸Šæ¶¨ä¼ç¨³</span><br>    <span class="hljs-keyword">elif</span> ma5 &lt; ma20 <span class="hljs-keyword">and</span> macd_hist &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ğŸ”´ DOWN&quot;</span>         <span class="hljs-comment"># ä¸‹è·Œè¶‹åŠ¿</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ğŸŸ  CONSOLIDATE&quot;</span>  <span class="hljs-comment"># éœ‡è¡æ•´ç†</span><br></code></pre></td></tr></table></figure><hr><h2 id="å…­ã€å®Œæ•´åˆ†æç¤ºä¾‹"><a href="#å…­ã€å®Œæ•´åˆ†æç¤ºä¾‹" class="headerlink" title="å…­ã€å®Œæ•´åˆ†æç¤ºä¾‹"></a>å…­ã€å®Œæ•´åˆ†æç¤ºä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_fund</span>(<span class="hljs-params">code: <span class="hljs-built_in">str</span>, nav_data: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]</span>) -&gt; <span class="hljs-type">Dict</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;å®Œæ•´åŸºé‡‘åˆ†æ&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># æå–å‡€å€¼</span><br>    navs = [item[<span class="hljs-string">&quot;nav&quot;</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> nav_data]<br>    <br>    <span class="hljs-comment"># è®¡ç®— MA</span><br>    ma5 = calculate_ma(navs, <span class="hljs-number">5</span>)<br>    ma20 = calculate_ma(navs, <span class="hljs-number">20</span>)<br>    ma60 = calculate_ma(navs, <span class="hljs-number">60</span>)<br>    <br>    <span class="hljs-comment"># è®¡ç®— MACD</span><br>    dif, dea, hist = calculate_macd(navs)<br>    <br>    <span class="hljs-comment"># é£é™©æŒ‡æ ‡</span><br>    max_dd, _, _ = calculate_max_drawdown(navs)<br>    volatility = calculate_volatility(navs)<br>    sharpe = calculate_sharpe(navs, volatility)<br>    <br>    <span class="hljs-comment"># ç»¼åˆä¿¡å·</span><br>    trend = get_trend_status(ma5, ma20, ma60, hist)<br>    <br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-string">&quot;code&quot;</span>: code,<br>        <span class="hljs-string">&quot;trend&quot;</span>: trend,<br>        <span class="hljs-string">&quot;ma&quot;</span>: &#123;<span class="hljs-string">&quot;ma5&quot;</span>: ma5, <span class="hljs-string">&quot;ma20&quot;</span>: ma20, <span class="hljs-string">&quot;ma60&quot;</span>: ma60&#125;,<br>        <span class="hljs-string">&quot;macd&quot;</span>: &#123;<span class="hljs-string">&quot;dif&quot;</span>: dif, <span class="hljs-string">&quot;dea&quot;</span>: dea, <span class="hljs-string">&quot;hist&quot;</span>: hist&#125;,<br>        <span class="hljs-string">&quot;risk&quot;</span>: &#123;<span class="hljs-string">&quot;max_drawdown&quot;</span>: max_dd, <span class="hljs-string">&quot;volatility&quot;</span>: volatility, <span class="hljs-string">&quot;sharpe&quot;</span>: sharpe&#125;,<br>    &#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸ƒã€è¾“å‡ºæ•ˆæœ"><a href="#ä¸ƒã€è¾“å‡ºæ•ˆæœ" class="headerlink" title="ä¸ƒã€è¾“å‡ºæ•ˆæœ"></a>ä¸ƒã€è¾“å‡ºæ•ˆæœ</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ğŸ”¹ å¤©å¼˜ä¸­è¯ç§‘åˆ›åˆ›ä¸š50ETFè”æ¥C (012895) [ETF]<br>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br>ğŸ“ˆ Trend: ğŸŸ¡ UP (MA5 &gt; MA20, MACD positive)<br>ğŸ“Š MA Status: <span class="hljs-attribute">MA5</span>=1.025, <span class="hljs-attribute">MA20</span>=1.038, <span class="hljs-attribute">MA60</span>=1.045<br>ğŸ“‰ MACD: <span class="hljs-attribute">DIF</span>=0.0012, <span class="hljs-attribute">DEA</span>=0.0008, <span class="hljs-attribute">Hist</span>=+0.0004<br><br>ğŸ“Š Relative Strength: vs åˆ›ä¸šæ¿æŒ‡ +2.3%<br><br>ğŸ“‰ Risk Metrics:<br>   Max Drawdown: 3.2% (ğŸŸ¢ LOW)<br>   Volatility: 1.8% (ğŸŸ¡ MEDIUM)<br>   Sharpe: 1.24<br><br>ğŸ’¡ Signal: HOLD - è¶‹åŠ¿ç¨³å®šï¼Œæ— æ˜æ˜¾åè½¬ä¿¡å·<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸ƒã€çœŸå®æ•°æ®åˆ†ææ•ˆæœ"><a href="#ä¸ƒã€çœŸå®æ•°æ®åˆ†ææ•ˆæœ" class="headerlink" title="ä¸ƒã€çœŸå®æ•°æ®åˆ†ææ•ˆæœ"></a>ä¸ƒã€çœŸå®æ•°æ®åˆ†ææ•ˆæœ</h2><p>ä½¿ç”¨ä¸œæ–¹è´¢å¯Œ API è·å–çœŸå®æ•°æ®åçš„åˆ†æç»“æœï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs routeros">======================================================================<br>ğŸ“Š Enhanced Fund Analysis Report<br>   Analysis Date: 2026-02-06 15:42<br>   Data Source: Eastmoney API (çœŸå®æ•°æ®)<br>======================================================================<br><br>ğŸ”¹ å¤©å¼˜ä¸­è¯ç§‘åˆ›åˆ›ä¸š50ETFè”æ¥C (012895) [ETF]<br>------------------------------------------------------------<br>ğŸ“ˆ Trend: ğŸ”´ DOWN<br>   <span class="hljs-attribute">MA5</span>=1.0251, <span class="hljs-attribute">MA20</span>=1.0398, <span class="hljs-attribute">MA60</span>=1.0398<br>   MACD: <span class="hljs-attribute">DIF</span>=-0.0084, <span class="hljs-attribute">Hist</span>=-0.0034<br>ğŸ“Š Total Return (20d): -4.24%<br><br>ğŸ“‰ Risk Metrics:<br>   Max Drawdown: 5.58% (ğŸŸ¡ MEDIUM)<br>   Volatility: 24.45%<br>   Sharpe Ratio: -2.31<br><br>ğŸ“Š Relative Strength:<br>   vs åˆ›ä¸šæ¿æŒ‡: -0.52%<br>   Category Rank: TOP 30%<br><br>ğŸ”¹ å—æ–¹äºšå¤ªç²¾é€‰ETFè”æ¥(QDII)C (021190) [QDII]<br>------------------------------------------------------------<br>ğŸ“ˆ Trend: ğŸŸ¡ UP<br>   <span class="hljs-attribute">MA5</span>=1.3220, <span class="hljs-attribute">MA20</span>=1.2975, <span class="hljs-attribute">MA60</span>=1.2975<br>   MACD: <span class="hljs-attribute">DIF</span>=0.0134, <span class="hljs-attribute">Hist</span>=0.0053<br>ğŸ“Š Total Return (20d): +4.95%<br><br>ğŸ“‰ Risk Metrics:<br>   Max Drawdown: 1.72% (ğŸŸ¢ LOW)<br>   Volatility: 32.53%<br>   Sharpe Ratio: 1.83<br><br>ğŸ”¹ åæ³°æŸç‘è‡´è¿œæ··åˆC (017992) [Mixed]<br>------------------------------------------------------------<br>ğŸ“ˆ Trend: ğŸŸ¡ UP<br>   <span class="hljs-attribute">MA5</span>=1.6926, <span class="hljs-attribute">MA20</span>=1.6439, <span class="hljs-attribute">MA60</span>=1.6439<br>   MACD: <span class="hljs-attribute">DIF</span>=0.0415, <span class="hljs-attribute">Hist</span>=0.0166<br>ğŸ“Š Total Return (20d): +12.06%<br><br>======================================================================<br>ğŸ† Performance Ranking:<br>   1. åæ³°æŸç‘è‡´è¿œæ··åˆC: +12.06% (ğŸŸ¡ UP)<br>   2. å—æ–¹äºšå¤ªç²¾é€‰ETFè”æ¥(QDII)C: +4.95% (ğŸŸ¡ UP)<br>   3. å¤©å¼˜ä¸­è¯ç§‘åˆ›åˆ›ä¸š50ETFè”æ¥C: -4.24% (ğŸ”´ DOWN)<br>======================================================================<br></code></pre></td></tr></table></figure><p><strong>ç»“æœè§£è¯»</strong>ï¼š</p><ul><li><strong>åæ³°æŸç‘è‡´è¿œ</strong>ï¼šè¶‹åŠ¿ UPï¼Œæ”¶ç›Š +12.06%ï¼ŒMACD åŠ¨èƒ½å‘ä¸Š</li><li><strong>å—æ–¹äºšå¤ªç²¾é€‰</strong>ï¼šè¶‹åŠ¿ UPï¼Œæ”¶ç›Š +4.95%ï¼Œæœ€å¤§å›æ’¤ä»… 1.72%</li><li><strong>å¤©å¼˜ç§‘åˆ›åˆ›ä¸š</strong>ï¼šè¶‹åŠ¿ DOWNï¼ŒçŸ­æœŸå¯èƒ½éœ€è¦è§‚æœ›</li></ul><hr><h2 id="å…«ã€æ€»ç»“"><a href="#å…«ã€æ€»ç»“" class="headerlink" title="å…«ã€æ€»ç»“"></a>å…«ã€æ€»ç»“</h2><h3 id="æ ¸å¿ƒæŒ‡æ ‡"><a href="#æ ¸å¿ƒæŒ‡æ ‡" class="headerlink" title="æ ¸å¿ƒæŒ‡æ ‡"></a>æ ¸å¿ƒæŒ‡æ ‡</h3><table><thead><tr><th>æŒ‡æ ‡</th><th>ä½œç”¨</th><th>æ•æ„Ÿåº¦</th></tr></thead><tbody><tr><td>MA5&#x2F;MA20</td><td>çŸ­æœŸè¶‹åŠ¿</td><td>é«˜</td></tr><tr><td>MA60</td><td>é•¿æœŸè¶‹åŠ¿</td><td>ä½</td></tr><tr><td>MACD</td><td>åŠ¨èƒ½åˆ¤æ–­</td><td>ä¸­</td></tr><tr><td>MaxDD</td><td>æœ€å¤§å›æ’¤</td><td>-</td></tr><tr><td>Volatility</td><td>æ³¢åŠ¨ç‡</td><td>-</td></tr><tr><td>Sharpe</td><td>é£é™©æ”¶ç›Šæ¯”</td><td>-</td></tr></tbody></table><h3 id="ä¿¡å·ç­‰çº§"><a href="#ä¿¡å·ç­‰çº§" class="headerlink" title="ä¿¡å·ç­‰çº§"></a>ä¿¡å·ç­‰çº§</h3><table><thead><tr><th>ä¿¡å·</th><th>å«ä¹‰</th><th>æ“ä½œå»ºè®®</th></tr></thead><tbody><tr><td>ğŸŸ¢ STRONG_UP</td><td>å¼ºåŠ¿ä¸Šæ¶¨</td><td>ä¹°å…¥&#x2F;æŒæœ‰</td></tr><tr><td>ğŸŸ¡ UP</td><td>æ¸©å’Œä¸Šæ¶¨</td><td>æŒæœ‰</td></tr><tr><td>ğŸŸ  CONSOLIDATE</td><td>éœ‡è¡æ•´ç†</td><td>è§‚æœ›</td></tr><tr><td>ğŸ”´ DOWN</td><td>ä¸‹è·Œè¶‹åŠ¿</td><td>å‡ä»“&#x2F;æ­¢æŸ</td></tr></tbody></table><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol><li><strong>å†å²æ•°æ®ä¸ä»£è¡¨æœªæ¥</strong>ï¼šæŒ‡æ ‡åŸºäºå†å²è®¡ç®—ï¼Œä¸èƒ½é¢„æµ‹æœªæ¥</li><li><strong>ç»“åˆå¸‚åœºç¯å¢ƒ</strong>ï¼šå•ä¸€æŒ‡æ ‡å¯èƒ½æœ‰å‡ä¿¡å·ï¼Œéœ€è¦ç»¼åˆåˆ¤æ–­</li><li><strong>è®¾ç½®æ­¢æŸ</strong>ï¼šå³ä½¿è¶‹åŠ¿è‰¯å¥½ï¼Œä¹Ÿè¦è®¾ç½®åˆç†çš„æ­¢æŸä½</li></ol><hr><h2 id="å‚è€ƒä»£ç "><a href="#å‚è€ƒä»£ç " class="headerlink" title="å‚è€ƒä»£ç "></a>å‚è€ƒä»£ç </h2><p>å®Œæ•´çš„åˆ†æè„šæœ¬å·²é›†æˆåˆ° OpenClaw æŠ€èƒ½ç³»ç»Ÿä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/root/.openclaw/skills/fund-analysis/scripts/fund_analysis_enhanced.py<br></code></pre></td></tr></table></figure><p><strong>è¿è¡Œæ–¹å¼</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®Œæ•´åˆ†æï¼ˆä½¿ç”¨çœŸå®æ•°æ®ï¼‰</span><br>python3 fund_analysis_enhanced.py<br><br><span class="hljs-comment"># å•åŸºé‡‘ä¿¡å·</span><br>python3 fund_analysis_enhanced.py --signal 012895<br></code></pre></td></tr></table></figure><p><strong>ä¾èµ–</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install requests<br></code></pre></td></tr></table></figure><hr><p><em>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„åŸºé‡‘åˆ†æç»éªŒï¼</em></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>åŸºé‡‘åˆ†æ</tag>
      
      <tag>æŠ€æœ¯æŒ‡æ ‡</tag>
      
      <tag>MA</tag>
      
      <tag>MACD</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Serper.dev å…è´¹ Google æœç´¢ API ä½¿ç”¨æŒ‡å—</title>
    <link href="/2026/02/06/serper-api-guide/"/>
    <url>/2026/02/06/serper-api-guide/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡é¦–å‘äº 2026-02-06</p></blockquote><h2 id="ä¸ºä»€ä¹ˆéœ€è¦-Serperï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-Serperï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ Serperï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ Serperï¼Ÿ</h2><p>åœ¨å¼€å‘ AI åŠ©æ‰‹æˆ–è‡ªåŠ¨åŒ–è„šæœ¬æ—¶ï¼Œç»å¸¸éœ€è¦è·å–æœç´¢å¼•æ“ç»“æœã€‚å¸¸è§çš„æ–¹æ¡ˆæœ‰ï¼š</p><table><thead><tr><th>æœåŠ¡</th><th>ç‰¹ç‚¹</th><th>é™åˆ¶</th></tr></thead><tbody><tr><td>Google Custom Search</td><td>å®˜æ–¹ä½†å¤æ‚</td><td>éœ€è¦é…ç½® Search Console</td></tr><tr><td>Brave Search</td><td>æ–°å…´é€‰æ‹©</td><td>å…è´¹é¢åº¦æœ‰é™</td></tr><tr><td><strong>Serper.dev</strong></td><td>Google ç»“æœï¼Œ<strong>å…è´¹ 2500 æ¬¡</strong></td><td>é¢åº¦ç”¨å®Œåæ”¶è´¹</td></tr></tbody></table><p>å¯¹äºä¸ªäººé¡¹ç›®æˆ–å°è§„æ¨¡ä½¿ç”¨ï¼Œ<strong>Serper 2500 æ¬¡å…è´¹é¢åº¦è¶³å¤Ÿç”¨å¾ˆä¹…</strong>ã€‚</p><hr><h2 id="Serper-ç®€ä»‹"><a href="#Serper-ç®€ä»‹" class="headerlink" title="Serper ç®€ä»‹"></a>Serper ç®€ä»‹</h2><p>Serper.dev æ˜¯ä¸€ä¸ªæä¾› Google æœç´¢ç»“æœ API çš„æœåŠ¡ï¼š</p><ul><li>âœ… æ— éœ€ä¿¡ç”¨å¡ï¼Œ<strong>å…è´¹ 2500 æ¬¡æŸ¥è¯¢</strong></li><li>âœ… è¿”å›ç»“æ„åŒ– JSON</li><li>âœ… æ”¯æŒæœç´¢ã€å›¾ç‰‡ã€æ–°é—»ã€åœ°ç‚¹ã€è‡ªåŠ¨è¡¥å…¨</li><li>âœ… å“åº”é€Ÿåº¦å¿«</li></ul><h3 id="å…è´¹é¢åº¦"><a href="#å…è´¹é¢åº¦" class="headerlink" title="å…è´¹é¢åº¦"></a>å…è´¹é¢åº¦</h3><table><thead><tr><th>å¥—é¤</th><th>ä»·æ ¼</th><th>é¢åº¦</th></tr></thead><tbody><tr><td>Free</td><td><strong>å…è´¹</strong></td><td>2,500 æ¬¡</td></tr><tr><td>Pro</td><td>$50&#x2F;æœˆ</td><td>10,000 æ¬¡</td></tr></tbody></table><hr><h2 id="å¿«é€Ÿä¸Šæ‰‹"><a href="#å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹"></a>å¿«é€Ÿä¸Šæ‰‹</h2><h3 id="1-è·å–-API-Key"><a href="#1-è·å–-API-Key" class="headerlink" title="1. è·å– API Key"></a>1. è·å– API Key</h3><p>è®¿é—® <a href="https://serper.dev/">https://serper.dev</a> æ³¨å†Œè´¦å·ï¼Œå…è´¹è·å– API Keyã€‚</p><h3 id="2-åŸºç¡€ç”¨æ³•ï¼ˆcURLï¼‰"><a href="#2-åŸºç¡€ç”¨æ³•ï¼ˆcURLï¼‰" class="headerlink" title="2. åŸºç¡€ç”¨æ³•ï¼ˆcURLï¼‰"></a>2. åŸºç¡€ç”¨æ³•ï¼ˆcURLï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è®¾ç½® API Key</span><br><span class="hljs-built_in">export</span> SERPER_API_KEY=<span class="hljs-string">&quot;ä½ çš„APIå¯†é’¥&quot;</span><br><br><span class="hljs-comment"># ç½‘é¡µæœç´¢</span><br>curl <span class="hljs-string">&quot;https://google.serper.dev/search?q=OpenClaw&quot;</span> \<br>  -H <span class="hljs-string">&quot;X-API-Key: <span class="hljs-variable">$SERPER_API_KEY</span>&quot;</span><br></code></pre></td></tr></table></figure><h3 id="3-å“åº”ç¤ºä¾‹"><a href="#3-å“åº”ç¤ºä¾‹" class="headerlink" title="3. å“åº”ç¤ºä¾‹"></a>3. å“åº”ç¤ºä¾‹</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;searchParameters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;q&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;OpenClaw&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;search&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;engine&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;google&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;organic&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;OpenClaw - AI Assistant&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://github.com/openclaw/openclaw&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;snippet&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;OpenClaw is an AI assistant that runs on your machine...&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;domain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;github.com&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;credits&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><hr><h2 id="Python-ç¤ºä¾‹"><a href="#Python-ç¤ºä¾‹" class="headerlink" title="Python ç¤ºä¾‹"></a>Python ç¤ºä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>SERPER_API_KEY = <span class="hljs-string">&quot;ä½ çš„APIå¯†é’¥&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">query, num=<span class="hljs-number">10</span></span>):<br>    url = <span class="hljs-string">&quot;https://google.serper.dev/search&quot;</span><br>    params = &#123;<span class="hljs-string">&quot;q&quot;</span>: query, <span class="hljs-string">&quot;num&quot;</span>: num&#125;<br>    headers = &#123;<span class="hljs-string">&quot;X-API-Key&quot;</span>: SERPER_API_KEY&#125;<br>    <br>    response = requests.get(url, params=params, headers=headers)<br>    <span class="hljs-keyword">return</span> response.json()<br><br><span class="hljs-comment"># ä½¿ç”¨</span><br>results = search(<span class="hljs-string">&quot;åŸºé‡‘è¡Œæƒ… ä»Šæ—¥&quot;</span>)<br><span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results[<span class="hljs-string">&quot;organic&quot;</span>]:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;r[<span class="hljs-string">&#x27;position&#x27;</span>]&#125;</span>. <span class="hljs-subst">&#123;r[<span class="hljs-string">&#x27;title&#x27;</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;   <span class="hljs-subst">&#123;r[<span class="hljs-string">&#x27;url&#x27;</span>]&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="è¿›é˜¶ï¼šæ”¯æŒå¤šç§æœç´¢ç±»å‹"><a href="#è¿›é˜¶ï¼šæ”¯æŒå¤šç§æœç´¢ç±»å‹" class="headerlink" title="è¿›é˜¶ï¼šæ”¯æŒå¤šç§æœç´¢ç±»å‹"></a>è¿›é˜¶ï¼šæ”¯æŒå¤šç§æœç´¢ç±»å‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>SERPER_API_KEY = <span class="hljs-string">&quot;ä½ çš„APIå¯†é’¥&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">serper_search</span>(<span class="hljs-params">query, search_type=<span class="hljs-string">&quot;search&quot;</span>, num=<span class="hljs-number">10</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;é€šç”¨æœç´¢æ¥å£&quot;&quot;&quot;</span><br>    endpoints = &#123;<br>        <span class="hljs-string">&quot;search&quot;</span>: <span class="hljs-string">&quot;https://google.serper.dev/search&quot;</span>,<br>        <span class="hljs-string">&quot;images&quot;</span>: <span class="hljs-string">&quot;https://google.serper.dev/images&quot;</span>,<br>        <span class="hljs-string">&quot;news&quot;</span>: <span class="hljs-string">&quot;https://google.serper.dev/news&quot;</span>,<br>        <span class="hljs-string">&quot;places&quot;</span>: <span class="hljs-string">&quot;https://google.serper.dev/places&quot;</span>,<br>        <span class="hljs-string">&quot;autocomplete&quot;</span>: <span class="hljs-string">&quot;https://google.serper.dev/autocomplete&quot;</span><br>    &#125;<br>    <br>    url = endpoints.get(search_type, endpoints[<span class="hljs-string">&quot;search&quot;</span>])<br>    params = &#123;<span class="hljs-string">&quot;q&quot;</span>: query, <span class="hljs-string">&quot;num&quot;</span>: num&#125;<br>    headers = &#123;<span class="hljs-string">&quot;X-API-Key&quot;</span>: SERPER_API_KEY&#125;<br>    <br>    <span class="hljs-keyword">return</span> requests.get(url, params=params, headers=headers).json()<br><br><span class="hljs-comment"># ä½¿ç”¨</span><br>images = serper_search(<span class="hljs-string">&quot;å¯çˆ±çŒ«å’ª&quot;</span>, search_type=<span class="hljs-string">&quot;images&quot;</span>, num=<span class="hljs-number">5</span>)<br>news = serper_search(<span class="hljs-string">&quot;AI æ–°é—»&quot;</span>, search_type=<span class="hljs-string">&quot;news&quot;</span>, num=<span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h2><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>q</code></td><td>æœç´¢å…³é”®è¯</td><td>å¿…å¡«</td></tr><tr><td><code>gl</code></td><td>å›½å®¶ä»£ç </td><td>US</td></tr><tr><td><code>hl</code></td><td>è¯­è¨€ä»£ç </td><td>en</td></tr><tr><td><code>num</code></td><td>è¿”å›æ•°é‡</td><td>10</td></tr><tr><td><code>safe</code></td><td>å®‰å…¨æœç´¢</td><td>on</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;https://google.serper.dev/search?q=Python&amp;gl=US&amp;hl=en&amp;num=5&quot;</span> \<br>  -H <span class="hljs-string">&quot;X-API-Key: <span class="hljs-variable">$SERPER_API_KEY</span>&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="åœ¨-OpenClaw-ä¸­ä½¿ç”¨"><a href="#åœ¨-OpenClaw-ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨ OpenClaw ä¸­ä½¿ç”¨"></a>åœ¨ OpenClaw ä¸­ä½¿ç”¨</h2><p>OpenClaw æ˜¯ä¸€ä¸ªæœ¬åœ°è¿è¡Œçš„ AI åŠ©æ‰‹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é›†æˆ Serperï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. è®¾ç½®ç¯å¢ƒå˜é‡</span><br><span class="hljs-built_in">export</span> SERPER_API_KEY=<span class="hljs-string">&quot;ä½ çš„APIå¯†é’¥&quot;</span><br><br><span class="hljs-comment"># 2. ä½¿ç”¨ serper skill è¿›è¡Œæœç´¢</span><br>/root/.openclaw/skills/serper/scripts/search.sh <span class="hljs-string">&quot;ä»Šæ—¥åŸºé‡‘è¡Œæƒ…&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”"><a href="#æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”" class="headerlink" title="æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”"></a>æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”</h2><table><thead><tr><th>æœåŠ¡</th><th>å…è´¹é¢åº¦</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Serper</strong></td><td>2,500 æ¬¡</td><td>Google ç»“æœå‡†</td></tr><tr><td>DuckDuckGo API</td><td>æ— é™</td><td>å®Œå…¨å…è´¹ä½†ç»“æœä¸€èˆ¬</td></tr><tr><td>Brave Search</td><td>æœ‰é™</td><td>éœ€è¦ç”³è¯·</td></tr><tr><td><strong>LangSearch</strong></td><td>æ— é™</td><td>å…è´¹ï¼Œæ”¯æŒ Rerank</td></tr></tbody></table><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Serper.dev æ˜¯ä¸€ä¸ªé€‚åˆä¸ªäººå¼€å‘è€…å’Œå°å‹é¡¹ç›®çš„æœç´¢ APIï¼š</p><ol><li><strong>å…è´¹ 2500 æ¬¡</strong>ï¼Œæ— éœ€ä¿¡ç”¨å¡</li><li><strong>Google è´¨é‡</strong>ï¼Œç»“æœå‡†ç¡®</li><li><strong>ä½¿ç”¨ç®€å•</strong>ï¼Œè¿”å› JSON</li><li><strong>å“åº”å¿«é€Ÿ</strong>ï¼Œé€‚åˆå®æ—¶åº”ç”¨</li></ol><p>å¯¹äºå¤§å¤šæ•°ä¸ªäººé¡¹ç›®æ¥è¯´ï¼Œ2500 æ¬¡å…è´¹é¢åº¦å·²ç»è¶³å¤Ÿç”¨å¾ˆä¹…äº†ã€‚å³ä½¿ç”¨å®Œï¼Œå‡çº§åˆ°ä»˜è´¹ç‰ˆï¼ˆ$50&#x2F;æœˆï¼‰ä¹Ÿæ¯”è‡ªå»ºçˆ¬è™«çœå¿ƒã€‚</p><hr><p><strong>å‚è€ƒé“¾æ¥ï¼š</strong></p><ul><li>å®˜ç½‘ï¼š<a href="https://serper.dev/">https://serper.dev</a></li><li>æ–‡æ¡£ï¼š<a href="https://serper.dev/docs">https://serper.dev/docs</a></li><li>æ³¨å†Œï¼š<a href="https://serper.dev/signup">https://serper.dev/signup</a></li></ul><hr><p><em>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ä½¿ç”¨ç»éªŒï¼</em></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>API</tag>
      
      <tag>Google</tag>
      
      <tag>æœç´¢</tag>
      
      <tag>å¼€å‘å·¥å…·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenClaw æ¦‚è§ˆä¸æ ¸å¿ƒåŠŸèƒ½ - ä½ çš„ AI åŠ©æ‰‹ç½‘å…³</title>
    <link href="/2026/02/06/OpenClaw-%E6%A6%82%E8%A7%88%E4%B8%8E%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD/"/>
    <url>/2026/02/06/OpenClaw-%E6%A6%82%E8%A7%88%E4%B8%8E%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD/</url>
    
    <content type="html"><![CDATA[<h1 id="OpenClaw-æ¦‚è§ˆä¸æ ¸å¿ƒåŠŸèƒ½-ä½ çš„-AI-åŠ©æ‰‹ç½‘å…³"><a href="#OpenClaw-æ¦‚è§ˆä¸æ ¸å¿ƒåŠŸèƒ½-ä½ çš„-AI-åŠ©æ‰‹ç½‘å…³" class="headerlink" title="OpenClaw æ¦‚è§ˆä¸æ ¸å¿ƒåŠŸèƒ½ - ä½ çš„ AI åŠ©æ‰‹ç½‘å…³"></a>OpenClaw æ¦‚è§ˆä¸æ ¸å¿ƒåŠŸèƒ½ - ä½ çš„ AI åŠ©æ‰‹ç½‘å…³</h1><h2 id="ä»€ä¹ˆæ˜¯-OpenClawï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-OpenClawï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ OpenClawï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ OpenClawï¼Ÿ</h2><p>OpenClaw æ˜¯ä¸€ä¸ª<strong>å¼€æºçš„ AI åŠ©æ‰‹ç½‘å…³</strong>ï¼Œè¿æ¥èŠå¤©å¹³å°ä¸ AI Agentã€‚</p><h3 id="æ ¸å¿ƒç†å¿µ"><a href="#æ ¸å¿ƒç†å¿µ" class="headerlink" title="æ ¸å¿ƒç†å¿µ"></a>æ ¸å¿ƒç†å¿µ</h3><ul><li>ğŸ¤– <strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šTelegramã€WhatsAppã€Discordã€iMessage ç­‰</li><li>ğŸ§  <strong>Agent èƒ½åŠ›</strong>ï¼šé›†æˆ Claude Codeã€Pi ç­‰ç¼–ç¨‹ Agent</li><li>ğŸ”Œ <strong>Skills æ‰©å±•</strong>ï¼šé€šè¿‡ Skills æ‰©å±•åŠŸèƒ½</li><li>ğŸ”’ <strong>æœ¬åœ°éƒ¨ç½²</strong>ï¼šæ•°æ®å®Œå…¨æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­</li></ul><h3 id="è§£å†³çš„é—®é¢˜"><a href="#è§£å†³çš„é—®é¢˜" class="headerlink" title="è§£å†³çš„é—®é¢˜"></a>è§£å†³çš„é—®é¢˜</h3><table><thead><tr><th>é—®é¢˜</th><th>OpenClaw æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ä¸æ–¹ä¾¿å¯¹è¯</td><td>Telegram éšæ—¶éšåœ°èŠå¤©</td></tr><tr><td>è®°å¿†ä¸¢å¤±</td><td>QMD å‘é‡è®°å¿†ç³»ç»Ÿ</td></tr><tr><td>å·¥å…·å•ä¸€</td><td>Skills æ‰©å±•ç”Ÿæ€</td></tr><tr><td>éšç§æ³„éœ²</td><td>å®Œå…¨æœ¬åœ°éƒ¨ç½²</td></tr></tbody></table><h2 id="æ¶æ„è®¾è®¡"><a href="#æ¶æ„è®¾è®¡" class="headerlink" title="æ¶æ„è®¾è®¡"></a>æ¶æ„è®¾è®¡</h2><h3 id="æ ¸å¿ƒç»„ä»¶"><a href="#æ ¸å¿ƒç»„ä»¶" class="headerlink" title="æ ¸å¿ƒç»„ä»¶"></a>æ ¸å¿ƒç»„ä»¶</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  Telegram   â”‚<br>â”‚  WhatsApp  â”‚  â† èŠå¤©å¹³å°<br>â”‚  <span class="hljs-keyword">Discord </span>  â”‚<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â”‚<br>       â–¼<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  Gateway    â”‚  â† ç»Ÿä¸€ç½‘å…³<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â”‚<br>       â–¼<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚   Agent     â”‚  â† AI èƒ½åŠ›<br>â”‚  Skills     â”‚<br>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜<br>       â”‚<br>       â–¼<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚  Memory     â”‚  â† è®°å¿†ç³»ç»Ÿ (QMD)<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><h3 id="å…³é”®æ¦‚å¿µ"><a href="#å…³é”®æ¦‚å¿µ" class="headerlink" title="å…³é”®æ¦‚å¿µ"></a>å…³é”®æ¦‚å¿µ</h3><h4 id="Gateway"><a href="#Gateway" class="headerlink" title="Gateway"></a>Gateway</h4><p>ç½‘å…³æ˜¯ OpenClaw çš„æ ¸å¿ƒï¼Œè´Ÿè´£ï¼š</p><ul><li><strong>ä¼šè¯ç®¡ç†</strong>ï¼šå¤šç”¨æˆ·ã€å¤šä¼šè¯</li><li><strong>è·¯ç”±åˆ†å‘</strong>ï¼šæ¶ˆæ¯è·¯ç”±åˆ°å¯¹åº” Agent</li><li><strong>é€šé“è¿æ¥</strong>ï¼šè¿æ¥å„ç§èŠå¤©å¹³å°</li><li><strong>è®¤è¯æˆæƒ</strong>ï¼šTokenã€å¯†ç éªŒè¯</li></ul><h4 id="Agent"><a href="#Agent" class="headerlink" title="Agent"></a>Agent</h4><p>Agent æä¾› AI èƒ½åŠ›ï¼š</p><table><thead><tr><th>Agent</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Pi</strong></td><td>å‹å¥½å¯¹è¯ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨</td></tr><tr><td><strong>Claude Code</strong></td><td>ç¼–ç¨‹èƒ½åŠ›å¼ºï¼Œé€‚åˆå¼€å‘è€…</td></tr><tr><td><strong>è‡ªå®šä¹‰</strong></td><td>å¯é›†æˆå…¶ä»– LLM</td></tr></tbody></table><h4 id="Skills"><a href="#Skills" class="headerlink" title="Skills"></a>Skills</h4><p>Skills æ˜¯åŠŸèƒ½æ‰©å±•ï¼š</p><table><thead><tr><th>åˆ†ç±»</th><th>Skills</th></tr></thead><tbody><tr><td>ğŸ’¬ é€šè®¯</td><td>discord, slack, imsg, bird</td></tr><tr><td>ğŸ Apple</td><td>apple-notes, things-mac</td></tr><tr><td>ğŸµ éŸ³ä¹</td><td>spotify-player</td></tr><tr><td>ğŸ”§ å¼€å‘</td><td>github, coding-agent</td></tr><tr><td>ğŸ› ï¸ å·¥å…·</td><td>weather, healthcheck</td></tr></tbody></table><h2 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h2><h3 id="1-å¤šå¹³å°é›†æˆ"><a href="#1-å¤šå¹³å°é›†æˆ" class="headerlink" title="1. å¤šå¹³å°é›†æˆ"></a>1. å¤šå¹³å°é›†æˆ</h3><h4 id="Telegram-é…ç½®"><a href="#Telegram-é…ç½®" class="headerlink" title="Telegram é…ç½®"></a>Telegram é…ç½®</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;channels&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;telegram&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;your-bot-token&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;allowFrom&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;user-id-1&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;user-id-2&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;groups&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;requireMention&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h4 id="å¤šè´¦å·æ”¯æŒ"><a href="#å¤šè´¦å·æ”¯æŒ" class="headerlink" title="å¤šè´¦å·æ”¯æŒ"></a>å¤šè´¦å·æ”¯æŒ</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;agents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;assistant&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AI åŠ©æ‰‹&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;channels&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;telegram&quot;</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;coder&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ç¼–ç¨‹åŠ©æ‰‹&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;channels&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;discord&quot;</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2-Agent-ç³»ç»Ÿ"><a href="#2-Agent-ç³»ç»Ÿ" class="headerlink" title="2. Agent ç³»ç»Ÿ"></a>2. Agent ç³»ç»Ÿ</h3><h4 id="Agent-é…ç½®"><a href="#Agent-é…ç½®" class="headerlink" title="Agent é…ç½®"></a>Agent é…ç½®</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;agents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pi&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pi&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pi&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sonnet-4-2-2025-01-21&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;coder&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;anthropic&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;claude-code&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h4 id="MCP-é›†æˆ"><a href="#MCP-é›†æˆ" class="headerlink" title="MCP é›†æˆ"></a>MCP é›†æˆ</h4><p>OpenClaw æ”¯æŒ MCP (Model Context Protocol)ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;mcp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;servers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;filesystem&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npx&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;-y&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;/path&quot;</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-QMD-å‘é‡è®°å¿†"><a href="#3-QMD-å‘é‡è®°å¿†" class="headerlink" title="3. QMD å‘é‡è®°å¿†"></a>3. QMD å‘é‡è®°å¿†</h3><p>QMD æ˜¯ OpenClaw çš„è®°å¿†ç³»ç»Ÿï¼š</p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;memory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;backend&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qmd&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;qmd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;includeDefaultMemory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;update&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;interval&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5m&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;limits&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;maxResults&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;timeoutMs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4000</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h4 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h4><table><thead><tr><th>åŠŸèƒ½</th><th>å‘½ä»¤</th></tr></thead><tbody><tr><td>å…¨æ–‡æœç´¢</td><td><code>qmd search</code></td></tr><tr><td>å‘é‡æœç´¢</td><td><code>qmd vsearch</code></td></tr><tr><td>æ··åˆæœç´¢</td><td><code>qmd query</code></td></tr></tbody></table><h3 id="4-Tools-å·¥å…·é›†"><a href="#4-Tools-å·¥å…·é›†" class="headerlink" title="4. Tools å·¥å…·é›†"></a>4. Tools å·¥å…·é›†</h3><p>OpenClaw å†…ç½®ä¸°å¯Œçš„ Toolsï¼š</p><table><thead><tr><th>åˆ†ç±»</th><th>å·¥å…·</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>ğŸ–¥ï¸</td><td>browser</td><td>æµè§ˆå™¨æ§åˆ¶</td></tr><tr><td>ğŸ“</td><td>read&#x2F;write&#x2F;edit</td><td>æ–‡ä»¶æ“ä½œ</td></tr><tr><td>ğŸ”§</td><td>exec</td><td>å‘½ä»¤æ‰§è¡Œ</td></tr><tr><td>ğŸ”</td><td>web_search</td><td>ç½‘ç»œæœç´¢</td></tr><tr><td>ğŸ“Š</td><td>cron</td><td>å®šæ—¶ä»»åŠ¡</td></tr><tr><td>ğŸŒ</td><td>nodes</td><td>èŠ‚ç‚¹ç®¡ç†</td></tr></tbody></table><h3 id="5-å®‰å…¨æ€§"><a href="#5-å®‰å…¨æ€§" class="headerlink" title="5. å®‰å…¨æ€§"></a>5. å®‰å…¨æ€§</h3><h4 id="è®¤è¯é…ç½®"><a href="#è®¤è¯é…ç½®" class="headerlink" title="è®¤è¯é…ç½®"></a>è®¤è¯é…ç½®</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;gateway&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;auth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;mode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;token&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;your-secret-token&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h4 id="å·¥å…·æƒé™"><a href="#å·¥å…·æƒé™" class="headerlink" title="å·¥å…·æƒé™"></a>å·¥å…·æƒé™</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;tools&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;allow&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;read&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;write&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;browser&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;deny&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;exec&quot;</span><span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="éƒ¨ç½²æ–¹å¼"><a href="#éƒ¨ç½²æ–¹å¼" class="headerlink" title="éƒ¨ç½²æ–¹å¼"></a>éƒ¨ç½²æ–¹å¼</h2><h3 id="æ–¹å¼-1ï¼šVPS-éƒ¨ç½²ï¼ˆæ¨èï¼‰"><a href="#æ–¹å¼-1ï¼šVPS-éƒ¨ç½²ï¼ˆæ¨èï¼‰" class="headerlink" title="æ–¹å¼ 1ï¼šVPS éƒ¨ç½²ï¼ˆæ¨èï¼‰"></a>æ–¹å¼ 1ï¼šVPS éƒ¨ç½²ï¼ˆæ¨èï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…</span><br>npm install -g openclaw<br><br><span class="hljs-comment"># å¯åŠ¨</span><br>openclaw gateway<br><br><span class="hljs-comment"># åå°è¿è¡Œ</span><br><span class="hljs-built_in">nohup</span> openclaw gateway &gt; /var/log/openclaw.log 2&gt;&amp;1 &amp;<br></code></pre></td></tr></table></figure><h3 id="æ–¹å¼-2ï¼šDocker-éƒ¨ç½²"><a href="#æ–¹å¼-2ï¼šDocker-éƒ¨ç½²" class="headerlink" title="æ–¹å¼ 2ï¼šDocker éƒ¨ç½²"></a>æ–¹å¼ 2ï¼šDocker éƒ¨ç½²</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># docker-compose.yml</span><br><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3.8&#x27;</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">openclaw:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">openclaw/openclaw</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">~/.openclaw:/root/.openclaw</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;18789:18789&quot;</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br></code></pre></td></tr></table></figure><h3 id="æ–¹å¼-3ï¼šæºç éƒ¨ç½²"><a href="#æ–¹å¼-3ï¼šæºç éƒ¨ç½²" class="headerlink" title="æ–¹å¼ 3ï¼šæºç éƒ¨ç½²"></a>æ–¹å¼ 3ï¼šæºç éƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/openclaw/openclaw.git<br><span class="hljs-built_in">cd</span> openclaw<br>npm install<br>npm run build<br>node dist/entry.js gateway<br></code></pre></td></tr></table></figure><h2 id="Skills-ç”Ÿæ€"><a href="#Skills-ç”Ÿæ€" class="headerlink" title="Skills ç”Ÿæ€"></a>Skills ç”Ÿæ€</h2><h3 id="å®˜æ–¹-Skills"><a href="#å®˜æ–¹-Skills" class="headerlink" title="å®˜æ–¹ Skills"></a>å®˜æ–¹ Skills</h3><table><thead><tr><th>åˆ†ç±»</th><th>Skills</th></tr></thead><tbody><tr><td>ğŸ’¬ é€šè®¯</td><td>discord, slack, imsg, bird</td></tr><tr><td>ğŸ”§ å¼€å‘</td><td>github, coding-agent, mcporter</td></tr><tr><td>ğŸ Apple</td><td>apple-notes, things-mac, bear-notes</td></tr><tr><td>ğŸµ åª’ä½“</td><td>spotify-player, songsee</td></tr><tr><td>ğŸ› ï¸ å·¥å…·</td><td>weather, healthcheck, qmd</td></tr></tbody></table><h3 id="å®‰è£…-Skills"><a href="#å®‰è£…-Skills" class="headerlink" title="å®‰è£… Skills"></a>å®‰è£… Skills</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># é€šè¿‡ OpenClaw CLI</span><br>openclaw skills install github<br><br><span class="hljs-comment"># æˆ–æ‰‹åŠ¨å®‰è£…</span><br><span class="hljs-built_in">cd</span> /path/to/openclaw/skills<br>git <span class="hljs-built_in">clone</span> https://github.com/tobi/qmd.git<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><h3 id="åœºæ™¯-1ï¼šä¸ªäºº-AI-åŠ©æ‰‹"><a href="#åœºæ™¯-1ï¼šä¸ªäºº-AI-åŠ©æ‰‹" class="headerlink" title="åœºæ™¯ 1ï¼šä¸ªäºº AI åŠ©æ‰‹"></a>åœºæ™¯ 1ï¼šä¸ªäºº AI åŠ©æ‰‹</h3><ul><li>Telegram éšæ—¶å¯¹è¯</li><li>è®°ä½ä½ çš„åå¥½å’Œä¹ æƒ¯</li><li>å¸®ä½ ç®¡ç†æ—¥ç¨‹</li></ul><h3 id="åœºæ™¯-2ï¼šç¼–ç¨‹åŠ©æ‰‹"><a href="#åœºæ™¯-2ï¼šç¼–ç¨‹åŠ©æ‰‹" class="headerlink" title="åœºæ™¯ 2ï¼šç¼–ç¨‹åŠ©æ‰‹"></a>åœºæ™¯ 2ï¼šç¼–ç¨‹åŠ©æ‰‹</h3><ul><li>Claude Code é›†æˆ</li><li>GitHub PR Review</li><li>ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–</li></ul><h3 id="åœºæ™¯-3ï¼šè¿ç»´å·¥å…·ç®±"><a href="#åœºæ™¯-3ï¼šè¿ç»´å·¥å…·ç®±" class="headerlink" title="åœºæ™¯ 3ï¼šè¿ç»´å·¥å…·ç®±"></a>åœºæ™¯ 3ï¼šè¿ç»´å·¥å…·ç®±</h3><ul><li>VPS å¥åº·æ£€æŸ¥</li><li>è‡ªåŠ¨å¤‡ä»½</li><li>å®šæ—¶ä»»åŠ¡</li></ul><h2 id="æ€§èƒ½ä¸ä¼˜åŒ–"><a href="#æ€§èƒ½ä¸ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¸ä¼˜åŒ–"></a>æ€§èƒ½ä¸ä¼˜åŒ–</h2><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><table><thead><tr><th>é…ç½®</th><th>æœ€ä½</th><th>æ¨è</th></tr></thead><tbody><tr><td>å†…å­˜</td><td>1GB</td><td>2GB+</td></tr><tr><td>CPU</td><td>1 æ ¸</td><td>2 æ ¸</td></tr><tr><td>å­˜å‚¨</td><td>10GB</td><td>20GB+</td></tr></tbody></table><h3 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h3><h4 id="1-Swap-é…ç½®"><a href="#1-Swap-é…ç½®" class="headerlink" title="1. Swap é…ç½®"></a>1. Swap é…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»º 4GB Swap</span><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=/swapfile bs=1M count=4096<br>mkswap /swapfile<br>swapon /swapfile<br></code></pre></td></tr></table></figure><h4 id="2-å†…å­˜é™åˆ¶"><a href="#2-å†…å­˜é™åˆ¶" class="headerlink" title="2. å†…å­˜é™åˆ¶"></a>2. å†…å­˜é™åˆ¶</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;agents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;defaults&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;maxMemory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2g&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="Q-å¦‚ä½•å¤‡ä»½ï¼Ÿ"><a href="#Q-å¦‚ä½•å¤‡ä»½ï¼Ÿ" class="headerlink" title="Q: å¦‚ä½•å¤‡ä»½ï¼Ÿ"></a>Q: å¦‚ä½•å¤‡ä»½ï¼Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¤‡ä»½é…ç½®</span><br><span class="hljs-built_in">cp</span> -r ~/.openclaw ~/backup-openclaw-$(<span class="hljs-built_in">date</span> +%Y%m%d)<br><br><span class="hljs-comment"># å¤‡ä»½æ•°æ®</span><br><span class="hljs-built_in">cp</span> -r ~/.cache/qmd ~/backup-qmd-$(<span class="hljs-built_in">date</span> +%Y%m%d)<br></code></pre></td></tr></table></figure><h3 id="Q-Agent-æ²¡å“åº”ï¼Ÿ"><a href="#Q-Agent-æ²¡å“åº”ï¼Ÿ" class="headerlink" title="Q: Agent æ²¡å“åº”ï¼Ÿ"></a>Q: Agent æ²¡å“åº”ï¼Ÿ</h3><ol><li>æ£€æŸ¥ API Key é…ç½®</li><li>æŸ¥çœ‹æ—¥å¿— <code>openclaw logs</code></li><li>é‡å¯ Gateway <code>openclaw gateway restart</code></li></ol><h3 id="Q-å†…å­˜ä¸è¶³ï¼Ÿ"><a href="#Q-å†…å­˜ä¸è¶³ï¼Ÿ" class="headerlink" title="Q: å†…å­˜ä¸è¶³ï¼Ÿ"></a>Q: å†…å­˜ä¸è¶³ï¼Ÿ</h3><ol><li>æ·»åŠ  Swap</li><li>é™ä½å¹¶å‘æ•°</li><li>å…³é—­ä¸éœ€è¦çš„ Skills</li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>OpenClaw æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ AI åŠ©æ‰‹ç½‘å…³ï¼š</p><ul><li>âœ… <strong>å¤šå¹³å°</strong>ï¼šTelegramã€Discord ç­‰</li><li>âœ… <strong>å¼º Agent</strong>ï¼šPiã€Claude Code</li><li>âœ… <strong>å¥½è®°å¿†</strong>ï¼šQMD å‘é‡æ£€ç´¢</li><li>âœ… <strong>æ˜“æ‰©å±•</strong>ï¼šSkills ç”Ÿæ€</li><li>âœ… <strong>å¤Ÿå®‰å…¨</strong>ï¼šæœ¬åœ°éƒ¨ç½²</li></ul><p><strong>è®© AI åŠ©æ‰‹éšæ—¶éšåœ°ä¸ºä½ æœåŠ¡ï¼</strong></p><hr><p><strong>Tags</strong>: OpenClaw, AI, Telegram, Agent, Gateway, Skills, QMD</p><p><strong>ç³»åˆ—æ–‡ç« </strong>ï¼š</p><ul><li><a href="./OpenClaw-%E6%8A%98%E8%85%BE%E8%AE%B0">OpenClaw æŠ˜è…¾è®°</a></li><li><a href="./QMD-%E5%90%91%E9%87%8F%E8%AE%B0%E5%BF%86%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95">QMD å‘é‡è®°å¿†é«˜çº§ç”¨æ³•</a></li><li>OpenClaw æ¦‚è§ˆä¸æ ¸å¿ƒåŠŸèƒ½ âœ…</li></ul>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenClaw</tag>
      
      <tag>AI</tag>
      
      <tag>Telegram</tag>
      
      <tag>Agent</tag>
      
      <tag>Gateway</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>QMD å‘é‡è®°å¿†é«˜çº§ç”¨æ³• - æ‰“é€ ä½ çš„ç¬¬äºŒå¤§è„‘</title>
    <link href="/2026/02/06/QMD-%E5%90%91%E9%87%8F%E8%AE%B0%E5%BF%86%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/"/>
    <url>/2026/02/06/QMD-%E5%90%91%E9%87%8F%E8%AE%B0%E5%BF%86%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="QMD-å‘é‡è®°å¿†é«˜çº§ç”¨æ³•-æ‰“é€ ä½ çš„ç¬¬äºŒå¤§è„‘"><a href="#QMD-å‘é‡è®°å¿†é«˜çº§ç”¨æ³•-æ‰“é€ ä½ çš„ç¬¬äºŒå¤§è„‘" class="headerlink" title="QMD å‘é‡è®°å¿†é«˜çº§ç”¨æ³• - æ‰“é€ ä½ çš„ç¬¬äºŒå¤§è„‘"></a>QMD å‘é‡è®°å¿†é«˜çº§ç”¨æ³• - æ‰“é€ ä½ çš„ç¬¬äºŒå¤§è„‘</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œå¦‚ä½•é«˜æ•ˆæ£€ç´¢ä¿¡æ¯æˆä¸ºå…³é”®ã€‚QMD (Quick Markdown) ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæœç´¢å·¥å…·ï¼Œå®ƒæ˜¯ä½ çš„<strong>ç¬¬äºŒå¤§è„‘</strong>ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å‘é‡æ£€ç´¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å‘é‡æ£€ç´¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å‘é‡æ£€ç´¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å‘é‡æ£€ç´¢ï¼Ÿ</h2><h3 id="ä¼ ç»Ÿæœç´¢-vs-å‘é‡æœç´¢"><a href="#ä¼ ç»Ÿæœç´¢-vs-å‘é‡æœç´¢" class="headerlink" title="ä¼ ç»Ÿæœç´¢ vs å‘é‡æœç´¢"></a>ä¼ ç»Ÿæœç´¢ vs å‘é‡æœç´¢</h3><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>ä¼ ç»Ÿæœç´¢ (BM25)</th><th>å‘é‡æœç´¢</th></tr></thead><tbody><tr><td>åŸç†</td><td>å…³é”®è¯åŒ¹é…</td><td>è¯­ä¹‰ç†è§£</td></tr><tr><td>èƒ½åŠ›</td><td>ç²¾ç¡®åŒ¹é…</td><td>æ¨¡ç³Šç†è§£</td></tr><tr><td>é€Ÿåº¦</td><td>å¿«</td><td>ç¨æ…¢</td></tr><tr><td>åœºæ™¯</td><td>ä¸“ä¸šæœ¯è¯­</td><td>æ—¥å¸¸è¡¨è¾¾</td></tr></tbody></table><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">æœç´¢: &quot;æˆ‘çš„æŠ•èµ„åŸºé‡‘è¡¨ç°å¦‚ä½•&quot;</span><br><br>BM25 ç»“æœ: åŒ¹é… <span class="hljs-string">&quot;åŸºé‡‘&quot;</span> å…³é”®è¯çš„æ–‡ç« <br><span class="hljs-section">å‘é‡æœç´¢: ç†è§£è¯­ä¹‰ï¼Œæ‰¾åˆ°æ‰€æœ‰å…³äºæŠ•èµ„ã€æ”¶ç›Šã€æŒä»“çš„æ–‡ç« </span><br></code></pre></td></tr></table></figure><h2 id="OpenClaw-QMD-é…ç½®"><a href="#OpenClaw-QMD-é…ç½®" class="headerlink" title="OpenClaw QMD é…ç½®"></a>OpenClaw QMD é…ç½®</h2><h3 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;memory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;backend&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qmd&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;qmd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;includeDefaultMemory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;update&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;interval&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5m&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;debounceMs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">15000</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;limits&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;maxResults&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;timeoutMs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4000</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="å‘½ä»¤è¡Œç”¨æ³•"><a href="#å‘½ä»¤è¡Œç”¨æ³•" class="headerlink" title="å‘½ä»¤è¡Œç”¨æ³•"></a>å‘½ä»¤è¡Œç”¨æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å…¨æ–‡æœç´¢ (BM25)</span><br>qmd search <span class="hljs-string">&quot;åŸºé‡‘ æŒä»“&quot;</span><br><br><span class="hljs-comment"># å‘é‡ç›¸ä¼¼åº¦æœç´¢</span><br>qmd vsearch <span class="hljs-string">&quot;æˆ‘çš„æŠ•èµ„åå¥½&quot;</span><br><br><span class="hljs-comment"># æ··åˆæœç´¢ (æ¨è)</span><br>qmd query <span class="hljs-string">&quot;æœ€è¿‘ä¹°äº†ä»€ä¹ˆè‚¡ç¥¨&quot;</span><br><br><span class="hljs-comment"># æŒ‡å®šé›†åˆæœç´¢</span><br>qmd query <span class="hljs-string">&quot;å·¥ä½œå®‰æ’&quot;</span> -c memory<br><br><span class="hljs-comment"># JSON æ ¼å¼è¾“å‡º</span><br>qmd query <span class="hljs-string">&quot;é¡¹ç›®è¿›åº¦&quot;</span> --json<br></code></pre></td></tr></table></figure><h2 id="å®æˆ˜åœºæ™¯"><a href="#å®æˆ˜åœºæ™¯" class="headerlink" title="å®æˆ˜åœºæ™¯"></a>å®æˆ˜åœºæ™¯</h2><h3 id="åœºæ™¯-1ï¼šå¿«é€Ÿå›é¡¾å¯¹è¯"><a href="#åœºæ™¯-1ï¼šå¿«é€Ÿå›é¡¾å¯¹è¯" class="headerlink" title="åœºæ™¯ 1ï¼šå¿«é€Ÿå›é¡¾å¯¹è¯"></a>åœºæ™¯ 1ï¼šå¿«é€Ÿå›é¡¾å¯¹è¯</h3><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">$ qmd query <span class="hljs-string">&quot;æ˜¨å¤©è®¨è®ºçš„ AI é¡¹ç›®&quot;</span><br><br>ç»“æœ:<br>- åŒ¹é…åº¦ <span class="hljs-number">85</span><span class="hljs-comment">%: 2026-02-04.md - AI Agent æµ‹è¯•è®°å½•</span><br>- åŒ¹é…åº¦ <span class="hljs-number">72</span><span class="hljs-comment">%: é¡¹ç›®è®¡åˆ’.md - Agent é›†æˆæ–¹æ¡ˆ</span><br></code></pre></td></tr></table></figure><h3 id="åœºæ™¯-2ï¼šè·¨æ—¶é—´æ£€ç´¢"><a href="#åœºæ™¯-2ï¼šè·¨æ—¶é—´æ£€ç´¢" class="headerlink" title="åœºæ™¯ 2ï¼šè·¨æ—¶é—´æ£€ç´¢"></a>åœºæ™¯ 2ï¼šè·¨æ—¶é—´æ£€ç´¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æœç´¢æ‰€æœ‰å…³äº &quot;æŠ•èµ„&quot; çš„è®°å½•</span><br>qmd search <span class="hljs-string">&quot;æŠ•èµ„&quot;</span> --all<br><br><span class="hljs-comment"># æœç´¢æœ€è¿‘ä¸€ä¸ªæœˆçš„è®°å½•</span><br>qmd query <span class="hljs-string">&quot;åŸºé‡‘èµ°åŠ¿&quot;</span> --min-score 0.5<br></code></pre></td></tr></table></figure><h3 id="åœºæ™¯-3ï¼šç²¾å‡†å®šä½"><a href="#åœºæ™¯-3ï¼šç²¾å‡†å®šä½" class="headerlink" title="åœºæ™¯ 3ï¼šç²¾å‡†å®šä½"></a>åœºæ™¯ 3ï¼šç²¾å‡†å®šä½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è·å–å®Œæ•´æ–‡æ¡£</span><br>qmd get qmd://memory/2026-02-05.md<br><br><span class="hljs-comment"># å¤šæ–‡æ¡£è·å–</span><br>qmd multi-get <span class="hljs-string">&quot;qmd://memory/*.md&quot;</span> --json<br></code></pre></td></tr></table></figure><h2 id="é«˜çº§æŠ€å·§"><a href="#é«˜çº§æŠ€å·§" class="headerlink" title="é«˜çº§æŠ€å·§"></a>é«˜çº§æŠ€å·§</h2><h3 id="1-ä¼˜åŒ–æ£€ç´¢è´¨é‡"><a href="#1-ä¼˜åŒ–æ£€ç´¢è´¨é‡" class="headerlink" title="1. ä¼˜åŒ–æ£€ç´¢è´¨é‡"></a>1. ä¼˜åŒ–æ£€ç´¢è´¨é‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æé«˜ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œè¿‡æ»¤ä½è´¨é‡ç»“æœ</span><br>qmd query <span class="hljs-string">&quot;å…³é”®è¯&quot;</span> --min-score 0.7<br><br><span class="hljs-comment"># æ‰©å¤§æœç´¢èŒƒå›´</span><br>qmd query <span class="hljs-string">&quot;å†…å®¹&quot;</span> -n 10<br></code></pre></td></tr></table></figure><h3 id="2-é›†åˆç®¡ç†"><a href="#2-é›†åˆç®¡ç†" class="headerlink" title="2. é›†åˆç®¡ç†"></a>2. é›†åˆç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰é›†åˆ</span><br>qmd collection list<br><br><span class="hljs-comment"># åˆ›å»ºæ–°é›†åˆ</span><br>qmd collection add /path/to/notes --name my-notes<br><br><span class="hljs-comment"># åˆ é™¤é›†åˆ</span><br>qmd collection remove old-notes<br></code></pre></td></tr></table></figure><h3 id="3-ç´¢å¼•ç»´æŠ¤"><a href="#3-ç´¢å¼•ç»´æŠ¤" class="headerlink" title="3. ç´¢å¼•ç»´æŠ¤"></a>3. ç´¢å¼•ç»´æŠ¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¼ºåˆ¶é‡æ–°ç´¢å¼•</span><br>qmd update --pull<br><br><span class="hljs-comment"># æ¸…ç†æ— ç”¨æ•°æ®</span><br>qmd cleanup<br><br><span class="hljs-comment"># æŸ¥çœ‹ç´¢å¼•çŠ¶æ€</span><br>qmd status<br></code></pre></td></tr></table></figure><h2 id="QMD-å·¥ä½œåŸç†"><a href="#QMD-å·¥ä½œåŸç†" class="headerlink" title="QMD å·¥ä½œåŸç†"></a>QMD å·¥ä½œåŸç†</h2><h3 id="å‘é‡åµŒå…¥æ¨¡å‹"><a href="#å‘é‡åµŒå…¥æ¨¡å‹" class="headerlink" title="å‘é‡åµŒå…¥æ¨¡å‹"></a>å‘é‡åµŒå…¥æ¨¡å‹</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">Embedding æ¨¡å‹</span><span class="hljs-punctuation">:</span> <span class="hljs-string">embeddinggemma-300M-Q8_0</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">è½»é‡çº§æ¨¡å‹ï¼Œé€‚åˆ VPS</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">300M å‚æ•°</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æœ¬åœ°è¿è¡Œï¼Œä¸ä¾èµ–å¤–éƒ¨ API</span><br></code></pre></td></tr></table></figure><h3 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">~/.cache/qmd/index.sqlite<br><span class="hljs-bullet">- </span>å‘é‡ç´¢å¼•<br><span class="hljs-bullet">- </span>BM25 ç´¢å¼•<br><span class="hljs-bullet">- </span>å…ƒæ•°æ®<br></code></pre></td></tr></table></figure><h2 id="ä¸-OpenClaw-é›†æˆ"><a href="#ä¸-OpenClaw-é›†æˆ" class="headerlink" title="ä¸ OpenClaw é›†æˆ"></a>ä¸ OpenClaw é›†æˆ</h2><h3 id="é…ç½®-memory-core"><a href="#é…ç½®-memory-core" class="headerlink" title="é…ç½® memory-core"></a>é…ç½® memory-core</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;memory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;backend&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qmd&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;memory-core&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="å¯ç”¨å·¥å…·"><a href="#å¯ç”¨å·¥å…·" class="headerlink" title="å¯ç”¨å·¥å…·"></a>å¯ç”¨å·¥å…·</h3><table><thead><tr><th>å·¥å…·</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>memory_search</code></td><td>QMD æœç´¢</td></tr><tr><td><code>memory_get</code></td><td>è·å–è®°å¿†å†…å®¹</td></tr><tr><td><code>memory_list</code></td><td>åˆ—å‡ºæ‰€æœ‰è®°å¿†</td></tr></tbody></table><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="Q-å‘é‡æœç´¢å´©æºƒ"><a href="#Q-å‘é‡æœç´¢å´©æºƒ" class="headerlink" title="Q: å‘é‡æœç´¢å´©æºƒ"></a>Q: å‘é‡æœç´¢å´©æºƒ</h3><p><strong>é—®é¢˜</strong>: Bun 1.3.8 + node-llama-cpp å…¼å®¹é—®é¢˜</p><p><strong>è§£å†³</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ–¹æ¡ˆ1: ä½¿ç”¨ BM25</span><br>qmd search <span class="hljs-string">&quot;å…³é”®è¯&quot;</span><br><br><span class="hljs-comment"># æ–¹æ¡ˆ2: é‡è£… QMD</span><br>git <span class="hljs-built_in">clone</span> https://github.com/tobi/qmd.git<br><span class="hljs-built_in">cd</span> qmd &amp;&amp; bun install<br></code></pre></td></tr></table></figure><h3 id="Q-æœç´¢ç»“æœä¸å‡†ç¡®"><a href="#Q-æœç´¢ç»“æœä¸å‡†ç¡®" class="headerlink" title="Q: æœç´¢ç»“æœä¸å‡†ç¡®"></a>Q: æœç´¢ç»“æœä¸å‡†ç¡®</h3><p><strong>è§£å†³</strong>:</p><ol><li>å¢åŠ æ–‡æ¡£æ•°é‡</li><li>æé«˜æ£€ç´¢é˜ˆå€¼</li><li>ä½¿ç”¨æ··åˆæœç´¢ <code>query</code> è€Œéå•ä¸€ <code>search</code></li></ol><h3 id="Q-ç´¢å¼•è¿‡å¤§"><a href="#Q-ç´¢å¼•è¿‡å¤§" class="headerlink" title="Q: ç´¢å¼•è¿‡å¤§"></a>Q: ç´¢å¼•è¿‡å¤§</h3><p><strong>è§£å†³</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ¸…ç†æ— ç”¨æ•°æ®</span><br>qmd cleanup<br><br><span class="hljs-comment"># ç§»é™¤ä¸éœ€è¦çš„é›†åˆ</span><br>qmd collection remove unused-collection<br></code></pre></td></tr></table></figure><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><h3 id="1-å‘½åè§„èŒƒ"><a href="#1-å‘½åè§„èŒƒ" class="headerlink" title="1. å‘½åè§„èŒƒ"></a>1. å‘½åè§„èŒƒ</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs subunit"># æ¨èå‘½å<br>2026<span class="hljs-string">-02</span><span class="hljs-string">-06</span>-é¡¹ç›®è®¡åˆ’.md<br>2026<span class="hljs-string">-02</span><span class="hljs-string">-05</span>-æŠ•èµ„ç¬”è®°.md<br>å¯¹è¯<span class="hljs-string">-2026</span><span class="hljs-string">-02</span><span class="hljs-string">-04</span>-AIè®¨è®º.md<br></code></pre></td></tr></table></figure><h3 id="2-å†…å®¹ç»“æ„"><a href="#2-å†…å®¹ç»“æ„" class="headerlink" title="2. å†…å®¹ç»“æ„"></a>2. å†…å®¹ç»“æ„</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section"># æ ‡é¢˜</span><br><br><span class="hljs-section">## å…³é”®ä¿¡æ¯</span><br><span class="hljs-bullet">-</span> æ—¶é—´<br><span class="hljs-bullet">-</span> äººç‰©<br><span class="hljs-bullet">-</span> åœ°ç‚¹<br><br><span class="hljs-section">## è¯¦ç»†å†…å®¹</span><br><br><span class="hljs-section">## ç»“è®º/è¡ŒåŠ¨é¡¹</span><br></code></pre></td></tr></table></figure><h3 id="3-å®šæœŸç»´æŠ¤"><a href="#3-å®šæœŸç»´æŠ¤" class="headerlink" title="3. å®šæœŸç»´æŠ¤"></a>3. å®šæœŸç»´æŠ¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ¯å‘¨æ‰§è¡Œ</span><br>qmd update  <span class="hljs-comment"># æ›´æ–°ç´¢å¼•</span><br>qmd cleanup  <span class="hljs-comment"># æ¸…ç†åƒåœ¾</span><br>qmd status  <span class="hljs-comment"># æ£€æŸ¥çŠ¶æ€</span><br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>QMD + OpenClaw è®©æˆ‘å®ç°äº†ï¼š</p><ul><li>âœ… <strong>ç²¾å‡†æ£€ç´¢</strong>ï¼šä¸ç”¨è®°ä½æ–‡ä»¶åï¼Œè®°ä½å…³é”®è¯å°±è¡Œ</li><li>âœ… <strong>è¯­ä¹‰ç†è§£</strong>ï¼šç”¨è‡ªç„¶è¯­è¨€æœç´¢</li><li>âœ… <strong>å®Œå…¨æœ¬åœ°</strong>ï¼šæ•°æ®åœ¨è‡ªå·±æ‰‹é‡Œ</li><li>âœ… <strong>é›¶æˆæœ¬</strong>ï¼šä¸éœ€è¦å¤–éƒ¨ API</li></ul><p><strong>ä½ çš„ç¬¬äºŒå¤§è„‘ï¼Œä» QMD å¼€å§‹ï¼</strong></p><hr><p><strong>Tags</strong>: QMD, å‘é‡æ£€ç´¢, è¯­ä¹‰æœç´¢, OpenClaw, AI, çŸ¥è¯†ç®¡ç†</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenClaw</tag>
      
      <tag>QMD</tag>
      
      <tag>AI</tag>
      
      <tag>å‘é‡æ£€ç´¢</tag>
      
      <tag>è¯­ä¹‰æœç´¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenClaw æŠ˜è…¾è®° - ä» Telegram AI åŠ©æ‰‹åˆ°å‘é‡è®°å¿†ç³»ç»Ÿ</title>
    <link href="/2026/02/06/OpenClaw-%E6%8A%98%E8%85%BE%E8%AE%B0/"/>
    <url>/2026/02/06/OpenClaw-%E6%8A%98%E8%85%BE%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="OpenClaw-æŠ˜è…¾è®°-ä»-Telegram-AI-åŠ©æ‰‹åˆ°å‘é‡è®°å¿†ç³»ç»Ÿ"><a href="#OpenClaw-æŠ˜è…¾è®°-ä»-Telegram-AI-åŠ©æ‰‹åˆ°å‘é‡è®°å¿†ç³»ç»Ÿ" class="headerlink" title="OpenClaw æŠ˜è…¾è®° - ä» Telegram AI åŠ©æ‰‹åˆ°å‘é‡è®°å¿†ç³»ç»Ÿ"></a>OpenClaw æŠ˜è…¾è®° - ä» Telegram AI åŠ©æ‰‹åˆ°å‘é‡è®°å¿†ç³»ç»Ÿ</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½œä¸ºä¸€ä¸ªçƒ­çˆ±æŠ˜è…¾çš„æ™®é€šäººï¼Œæˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ä¸ªèƒ½å¤Ÿéšæ—¶éšåœ°ä¸ AI å¯¹è¯è§£å†³æ–¹æ¡ˆã€‚ç›´åˆ°å‘ç°äº† OpenClaw â€”â€” ä¸€ä¸ªå¼€æºçš„ AI åŠ©æ‰‹æ¡†æ¶ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-OpenClawï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-OpenClawï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ OpenClawï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ OpenClawï¼Ÿ</h2><p>OpenClaw æ˜¯ä¸€ä¸ªå¼€æºçš„ AI åŠ©æ‰‹ç½‘å…³ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šTelegramã€WhatsAppã€Discordã€iMessage ç­‰</li><li><strong>Agent èƒ½åŠ›</strong>ï¼šé›†æˆ Claude Codeã€Pi ç­‰ç¼–ç¨‹ Agent</li><li><strong>æœ¬åœ°åŒ–éƒ¨ç½²</strong>ï¼šæ•°æ®å®Œå…¨æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­</li><li><strong>å¯æ‰©å±•æ€§</strong>ï¼šé€šè¿‡ Skills æ‰©å±•åŠŸèƒ½</li></ul><p>æˆ‘çš„ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li>ğŸ“± åœ¨æ‰‹æœºä¸Šé€šè¿‡ Telegram ä¸ AI å¯¹è¯</li><li>ğŸ§  QMD å‘é‡è®°å¿†ç³»ç»Ÿï¼Œç²¾å‡†æ£€ç´¢</li><li>ğŸ“Š åŸºé‡‘æ•°æ®è‡ªåŠ¨è¿½è¸ª</li><li>ğŸ› ï¸ VPS è¿ç»´å·¥å…·ç®±</li></ol><hr><h2 id="ç¬¬ä¸€ç« ï¼šQMD-å‘é‡è®°å¿†ç³»ç»Ÿé…ç½®"><a href="#ç¬¬ä¸€ç« ï¼šQMD-å‘é‡è®°å¿†ç³»ç»Ÿé…ç½®" class="headerlink" title="ç¬¬ä¸€ç« ï¼šQMD å‘é‡è®°å¿†ç³»ç»Ÿé…ç½®"></a>ç¬¬ä¸€ç« ï¼šQMD å‘é‡è®°å¿†ç³»ç»Ÿé…ç½®</h2><p>OpenClaw æœ€æ–°ç‰ˆå†…ç½®äº† QMD æ”¯æŒï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„è¯­ä¹‰æœç´¢å·¥å…·ã€‚</p><h3 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h3><ol><li>ä¿®æ”¹ <code>~/.openclaw/openclaw.json</code>ï¼š</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;memory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;backend&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;qmd&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;qmd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;includeDefaultMemory&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;update&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;interval&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5m&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;debounceMs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">15000</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;limits&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;maxResults&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;timeoutMs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4000</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨å‘½ä»¤ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å…¨æ–‡æœç´¢ (BM25)</span><br>qmd search <span class="hljs-string">&quot;åŸºé‡‘&quot;</span><br><br><span class="hljs-comment"># å‘é‡æœç´¢</span><br>qmd vsearch <span class="hljs-string">&quot;æˆ‘çš„æŠ•èµ„åå¥½&quot;</span><br><br><span class="hljs-comment"># æ··åˆæœç´¢</span><br>qmd query <span class="hljs-string">&quot;æŒä»“åŸºé‡‘èµ°åŠ¿&quot;</span><br></code></pre></td></tr></table></figure><h3 id="ğŸ›-é‡åˆ°çš„é—®é¢˜ï¼šBun-å…¼å®¹é—®é¢˜"><a href="#ğŸ›-é‡åˆ°çš„é—®é¢˜ï¼šBun-å…¼å®¹é—®é¢˜" class="headerlink" title="ğŸ› é‡åˆ°çš„é—®é¢˜ï¼šBun å…¼å®¹é—®é¢˜"></a>ğŸ› é‡åˆ°çš„é—®é¢˜ï¼šBun å…¼å®¹é—®é¢˜</h3><blockquote><p><strong>é—®é¢˜ç°è±¡</strong>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">panic</span>: Segmentation fault at address <span class="hljs-number">0</span>x7FCF86E3E840<br><span class="hljs-attribute">Peak</span>: <span class="hljs-number">6</span>.<span class="hljs-number">58</span>GB | Machine: <span class="hljs-number">10</span>.<span class="hljs-number">42</span>GB<br></code></pre></td></tr></table></figure></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><p>æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼š<strong>æ‰‹åŠ¨ä»æºç å®‰è£… QMD</strong>ï¼Œå¹¶ä¿æŒ Bun 1.3.8ã€‚</p><hr><h2 id="ç¬¬äºŒç« ï¼šåŸºé‡‘æ•°æ®è‡ªåŠ¨è¿½è¸ª"><a href="#ç¬¬äºŒç« ï¼šåŸºé‡‘æ•°æ®è‡ªåŠ¨è¿½è¸ª" class="headerlink" title="ç¬¬äºŒç« ï¼šåŸºé‡‘æ•°æ®è‡ªåŠ¨è¿½è¸ª"></a>ç¬¬äºŒç« ï¼šåŸºé‡‘æ•°æ®è‡ªåŠ¨è¿½è¸ª</h2><h3 id="éƒ¨ç½²æ–¹æ¡ˆ"><a href="#éƒ¨ç½²æ–¹æ¡ˆ" class="headerlink" title="éƒ¨ç½²æ–¹æ¡ˆ"></a>éƒ¨ç½²æ–¹æ¡ˆ</h3><ol><li><p>åˆ›å»ºæ•°æ®è·å–è„šæœ¬</p></li><li><p>é…ç½®å®šæ—¶ä»»åŠ¡ï¼š</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># crontab -e</span><br>0 15 * * * <span class="hljs-built_in">cd</span> /root/.openclaw &amp;&amp; python3 scripts/fetch_fund_nav.py<br></code></pre></td></tr></table></figure><h3 id="æ•°æ®å±•ç¤º"><a href="#æ•°æ®å±•ç¤º" class="headerlink" title="æ•°æ®å±•ç¤º"></a>æ•°æ®å±•ç¤º</h3><p>é€šè¿‡ OpenClaw çš„ QMD æœç´¢ï¼Œå¯ä»¥å¿«é€Ÿæ£€ç´¢å†å²æ•°æ®ã€‚</p><hr><h2 id="ç¬¬ä¸‰ç« ï¼šVPS-ä¼˜åŒ–"><a href="#ç¬¬ä¸‰ç« ï¼šVPS-ä¼˜åŒ–" class="headerlink" title="ç¬¬ä¸‰ç« ï¼šVPS ä¼˜åŒ–"></a>ç¬¬ä¸‰ç« ï¼šVPS ä¼˜åŒ–</h2><h3 id="æ·»åŠ -Swap-ç©ºé—´"><a href="#æ·»åŠ -Swap-ç©ºé—´" class="headerlink" title="æ·»åŠ  Swap ç©ºé—´"></a>æ·»åŠ  Swap ç©ºé—´</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»º 4GB Swap æ–‡ä»¶</span><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=/swapfile bs=1M count=4096<br>mkswap /swapfile<br>swapon /swapfile<br><br><span class="hljs-comment"># æ°¸ä¹…ç”Ÿæ•ˆ</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;/swapfile none swap sw 0 0&quot;</span> &gt;&gt; /etc/fstab<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Mem</span>:           <span class="hljs-number">9</span>.<span class="hljs-number">7</span>Gi       <span class="hljs-number">692</span>Mi       <span class="hljs-number">5</span>.<span class="hljs-number">3</span>Gi<br><span class="hljs-attribute">Swap</span>:          <span class="hljs-number">4</span>.<span class="hljs-number">0</span>Gi          <span class="hljs-number">0</span>B       <span class="hljs-number">4</span>.<span class="hljs-number">0</span>Gi<br></code></pre></td></tr></table></figure><hr><h2 id="ç¬¬å››ç« ï¼šHexo-åšå®¢éƒ¨ç½²"><a href="#ç¬¬å››ç« ï¼šHexo-åšå®¢éƒ¨ç½²" class="headerlink" title="ç¬¬å››ç« ï¼šHexo åšå®¢éƒ¨ç½²"></a>ç¬¬å››ç« ï¼šHexo åšå®¢éƒ¨ç½²</h2><h3 id="éƒ¨ç½²æ­¥éª¤"><a href="#éƒ¨ç½²æ­¥éª¤" class="headerlink" title="éƒ¨ç½²æ­¥éª¤"></a>éƒ¨ç½²æ­¥éª¤</h3><ol><li>å®‰è£… Node.js å’Œ Hexoï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨ nvm å®‰è£…</span><br>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash<br>nvm install --lts<br>npm install -g hexo-cli<br></code></pre></td></tr></table></figure><ol start="2"><li>åˆå§‹åŒ–åšå®¢ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo init /var/www/blog<br><span class="hljs-built_in">cd</span> /var/www/blog<br>hexo theme next<br></code></pre></td></tr></table></figure><ol start="3"><li>é…ç½® Caddy è‡ªåŠ¨ HTTPSï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs caddyfile">blog.2001.life &#123;<br>    root * /var/www/blog/public<br>    file_server<br>    encode gzip<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡è¿™æ®µæ—¶é—´çš„æŠ˜è…¾ï¼Œæˆ‘è·å¾—äº†ï¼š</p><ol><li>âœ… <strong>éšæ—¶å¯ç”¨çš„ AI åŠ©æ‰‹</strong> - Telegram éšæ—¶å¯¹è¯</li><li>âœ… <strong>ç²¾å‡†çš„è®°å¿†ç³»ç»Ÿ</strong> - QMD å‘é‡æ£€ç´¢</li><li>âœ… <strong>è‡ªåŠ¨åŒ–çš„åŸºé‡‘è¿½è¸ª</strong> - æ¯æ—¥å‡€å€¼æ•°æ®</li><li>âœ… <strong>å®‰å…¨çš„ VPS é…ç½®</strong> - Swap + SSH åŠ å›º</li><li>âœ… <strong>ç‹¬ç«‹çš„åšå®¢ç³»ç»Ÿ</strong> - Hexo + Caddy è‡ªåŠ¨ HTTPS</li></ol><p><strong>å¿ƒå¾—</strong>ï¼š</p><ul><li>é‡åˆ°é—®é¢˜ä¸è¦æ…Œï¼Œå–„ç”¨æœç´¢å’Œç¤¾åŒºèµ„æº</li><li>ä¿ç•™åŸå§‹é…ç½®ï¼Œå¤‡ä»½æ˜¯å…³é”®</li><li>è®°å½•è¿‡ç¨‹ï¼Œæ—¢æ˜¯æ€»ç»“ä¹Ÿæ˜¯åˆ†äº«</li></ul><hr><p><strong>Tags</strong>: OpenClaw, AI, Telegram, QMD, Hexo, VPS</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenClaw</tag>
      
      <tag>QMD</tag>
      
      <tag>AI</tag>
      
      <tag>Telegram</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2026/02/06/hello-world/"/>
    <url>/2026/02/06/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ğŸ”¢ å‘é‡åŒ–ï¼šè®©æœºå™¨æ›´ â€œæ‡‚â€äººç±»æ–‡å­—</title>
    <link href="/2025/10/20/2025-10-20-81/"/>
    <url>/2025/10/20/2025-10-20-81/</url>
    
    <content type="html"><![CDATA[<h1 id="ğŸ”¢-å‘é‡åŒ–ï¼šè®©æœºå™¨æ›´-â€œæ‡‚â€äººç±»æ–‡å­—"><a href="#ğŸ”¢-å‘é‡åŒ–ï¼šè®©æœºå™¨æ›´-â€œæ‡‚â€äººç±»æ–‡å­—" class="headerlink" title="ğŸ”¢ å‘é‡åŒ–ï¼šè®©æœºå™¨æ›´ â€œæ‡‚â€äººç±»æ–‡å­—"></a>ğŸ”¢ å‘é‡åŒ–ï¼šè®©æœºå™¨æ›´ â€œæ‡‚â€äººç±»æ–‡å­—</h1><p>ç§‘ç ”äººåœ¨æ£€ç´¢è®ºæ–‡çš„æ—¶å€™ä¸€å®šæœ‰è¿‡è¿™ç§æ„Ÿè§‰â€”â€”ç ”ç©¶æ–¹å‘çš„å…³é”®è¯æ£€ç´¢ï¼Œå¾€å¾€æ£€ç´¢ä¸åˆ°æ‰€æœ‰å¯èƒ½å¯å‘æˆ‘ä»¬çš„è®ºæ–‡ã€‚å› ä¸ºæŠ€æœ¯æ˜¯é€šç”¨çš„ï¼Œå®Œå…¨å¯èƒ½æœ‰åˆ«çš„é¢†åŸŸçš„è®ºæ–‡æ‰€åšçš„å·¥ä½œå’Œæˆ‘ä»¬é¢†åŸŸçš„ç±»ä¼¼ï¼Œä½†ç”±äºæˆ‘ä»¬æœç´¢çš„ä»…ä»…æ˜¯æˆ‘ä»¬é¢†åŸŸçš„å…³é”®è¯ï¼Œäºæ˜¯æ£€ç´¢ä¸åˆ°ï¼Œé”™å¤±äº†å¯èƒ½çš„å¯å‘ã€‚</p><p>æˆ‘çš„ç ”ç©¶åœºæ™¯æ˜¯ <code>MobileCrowdsensing</code> ï¼Œå…¶å® <code>Crowdsourcing</code> ä¹Ÿæ˜¯ç±»ä¼¼çš„åœºæ™¯ï¼Œä½†æˆ‘åœ¨æ£€ç´¢çš„æ—¶å€™å¾€å¾€è¦åˆ†åˆ«æ£€ç´¢è¿™ä¸¤ä¸ªå…³é”®è¯æ¥å¯»æ‰¾è®ºæ–‡ï¼Œè¿™ä¾¿æ˜¯å•çº¯æ–‡æœ¬åŒ¹é…æ£€ç´¢çš„å¼Šç«¯ã€‚</p><p>è¿˜æœ‰æˆ‘ä»¬çš„å·¥ä½œå¯èƒ½åŒ…å«åˆ†å¸ƒå¼çš„æ— äººæœºè¡ŒåŠ¨è§„åˆ’ï¼Œå…¶å®è¿™ç§è§„åˆ’ç±»ä¼¼äºè‡ªåŠ¨é©¾é©¶çš„è§„åˆ’ï¼Œå®Œå…¨å¯ä»¥ä»ä¸­å‚ç…§ï¼Œå› æ­¤ç®€å•çš„æ£€ç´¢å¼•æ“ä¹Ÿä¼šè®©æˆ‘é”™å¤±ä¸€äº›å¯å‘æ€§çš„ä¼˜è´¨æ–‡ç« ã€‚</p><h2 id="å‘é‡åŒ–æ˜¯å•¥"><a href="#å‘é‡åŒ–æ˜¯å•¥" class="headerlink" title="å‘é‡åŒ–æ˜¯å•¥"></a>å‘é‡åŒ–æ˜¯å•¥</h2><p>â€œæˆ‘å–œæ¬¢åƒè‹¹æœã€‚â€<br>â€œæˆ‘çˆ±åƒæ°´æœã€‚â€</p><p>è¿™ä¸¤å¥è¯<strong>æ„æ€æ¥è¿‘</strong>ï¼Œå®ƒä»¬åœ¨<strong>é«˜ç»´ç©ºé—´çš„â€œè·ç¦»â€ä¹Ÿå¾ˆè¿‘</strong>ã€‚<br>è€Œâ€œæˆ‘åœ¨å†™ä»£ç â€é‚£æ¡å‘é‡ï¼Œå°±ç¦»å®ƒä»¬è€è¿œã€‚</p><p>è®¡ç®—æœºé€šè¿‡è¿™ç§æ–¹å¼â€œæ„Ÿå—â€è¯­ä¹‰ä¸Šçš„ç›¸ä¼¼ç¨‹åº¦ï¼Œ<br>æœ‰ç‚¹åƒäººè„‘ä¸­çš„è”æƒ³æœºåˆ¶ã€‚</p><hr><h2 id="ä¸ºä»€ä¹ˆè¦å‘é‡åŒ–"><a href="#ä¸ºä»€ä¹ˆè¦å‘é‡åŒ–" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å‘é‡åŒ–"></a>ä¸ºä»€ä¹ˆè¦å‘é‡åŒ–</h2><p>ä»¥å‰çš„æœç´¢æ˜¯å…³é”®è¯åŒ¹é…â€”â€”ä½ æœâ€œç¨‹åºå‘˜â€ï¼Œå®ƒæ‰¾ä¸åˆ°â€œå¼€å‘è€…â€ã€‚<br>ä½†å‘é‡åŒ–ä¸çœ‹å­—é¢ï¼Œè€Œæ˜¯çœ‹è¯­ä¹‰ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿé‡Œï¼Œ<br>æˆ‘ä»¬è¦å…ˆæŠŠæ‰€æœ‰æ–‡æ¡£éƒ½å‘é‡åŒ–ã€å­˜è¿›æ•°æ®åº“ã€‚<br>å½“ç”¨æˆ·æé—®æ—¶ï¼Œä¹ŸæŠŠé—®é¢˜å‘é‡åŒ–ï¼Œå†æ‰¾â€œæœ€è¿‘â€çš„é‚£å‡ æ®µå†…å®¹ç»™æ¨¡å‹çœ‹ã€‚<br>æ¨¡å‹å°±èƒ½åœ¨æœ‰ä¸Šä¸‹æ–‡çš„å‰æä¸‹å›ç­”é—®é¢˜ã€‚</p><p>ä¸€å¥è¯ï¼šå‘é‡åŒ–è®©æ¨¡å‹å…ˆç†è§£ï¼Œå†å›ç­”ã€‚</p><hr><h2 id="å‘é‡æ˜¯æ€ä¹ˆæ¥çš„"><a href="#å‘é‡æ˜¯æ€ä¹ˆæ¥çš„" class="headerlink" title="å‘é‡æ˜¯æ€ä¹ˆæ¥çš„"></a>å‘é‡æ˜¯æ€ä¹ˆæ¥çš„</h2><p>é çš„æ˜¯ <strong>Embedding æ¨¡å‹</strong>ã€‚<br>æ¯”å¦‚ OpenAI çš„ text-embedding-3ã€é˜¿é‡Œç™¾ç‚¼çš„ text-embedding-v2ã€<br>è¿˜æœ‰å¼€æºçš„ bge-largeã€m3e ç­‰ã€‚</p><p>è¿™äº›æ¨¡å‹ç»è¿‡å¤§è§„æ¨¡è¯­æ–™è®­ç»ƒï¼Œèƒ½æŠŠè¯­ä¹‰è½¬æˆæ•°å­—ã€‚<br>æ¯”å¦‚ä¸€å¥è¯ä¼šè¢«è½¬æˆä¸€ä¸ª 1024 ç»´çš„æ•°ç»„ [0.12, -0.03, 0.85, â€¦]ï¼Œ<br>æˆ‘ä»¬çœ‹ä¸æ‡‚ï¼Œä½†åœ¨æœºå™¨çœ¼é‡Œï¼Œè¿™å°±æ˜¯â€œæ„æ€â€ã€‚</p><hr><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>å‘é‡åŒ–è®©æœºå™¨èƒ½å¤Ÿè¿›è¡Œâ€œè¯­ä¹‰æ£€ç´¢â€ï¼Œæ›´å¥½åœ°â€œç†è§£â€äººç±»è¯­è¨€ã€‚<br>æƒ³æƒ³å‘é‡åŒ–æœ‰ç‚¹åƒäººç±»çš„æ€è€ƒï¼Œæˆ‘ä»¬çš„è„‘æµ·ä¸­ å·´å£« å’Œ å…¬äº¤ æ˜ å°„å‡ºæ¥çš„ç”»é¢å¤§æ¦‚ç‡éƒ½æ˜¯ä¸€è¾† ğŸšŒï¼Œäºæ˜¯è¿™ä¸¤ä¸ªè¯çš„å‘é‡è·ç¦»å°±ç›¸è¿‘ï¼Œå½“æœ‰äººåœ¨å…¬äº¤ç«™å’Œæˆ‘ä»¬è¯´ å·´å£«æ€ä¹ˆè¿˜ä¸æ¥ çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç†æ‰€å½“ç„¶çš„èƒ½å¤Ÿç†è§£æ˜¯åœ¨è¯´æˆ‘ä»¬ç­‰çš„è½¦æ€ä¹ˆè¿˜ä¸æ¥ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>RAG ä¸ æ¨¡å‹å¹»è§‰</title>
    <link href="/2025/10/20/2025-10-20-80/"/>
    <url>/2025/10/20/2025-10-20-80/</url>
    
    <content type="html"><![CDATA[<h1 id="ğŸ¤¯-RAG-ä¸å¤§æ¨¡å‹å¹»è§‰ï¼šè®©æ¨¡å‹â€œè¯´çœŸè¯â€çš„ç§˜å¯†æ­¦å™¨"><a href="#ğŸ¤¯-RAG-ä¸å¤§æ¨¡å‹å¹»è§‰ï¼šè®©æ¨¡å‹â€œè¯´çœŸè¯â€çš„ç§˜å¯†æ­¦å™¨" class="headerlink" title="ğŸ¤¯ RAG ä¸å¤§æ¨¡å‹å¹»è§‰ï¼šè®©æ¨¡å‹â€œè¯´çœŸè¯â€çš„ç§˜å¯†æ­¦å™¨"></a>ğŸ¤¯ RAG ä¸å¤§æ¨¡å‹å¹»è§‰ï¼šè®©æ¨¡å‹â€œè¯´çœŸè¯â€çš„ç§˜å¯†æ­¦å™¨</h1><p>å¦‚æœä½ ç»å¸¸å’Œ ChatGPTã€é€šä¹‰åƒé—®ä¹‹ç±»çš„å¤§æ¨¡å‹æ‰“äº¤é“ï¼Œä½ å¤§æ¦‚è§è¯†è¿‡å®ƒä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“çš„æ ·å­ã€‚<br>æ¯”å¦‚ä½ é—®å®ƒï¼šâ€œæˆ‘ä¸Šå‘¨çš„è®ºæ–‡æ ‡é¢˜æ˜¯ä»€ä¹ˆï¼Ÿâ€<br>å®ƒä¼šä¸€æœ¬æ­£ç»åœ°å›ç­”ï¼šâ€œã€Šè·¨æ¨¡æ€å·®åˆ†éšç§ä¸‹çš„è‡ªé€‚åº”ç”Ÿæˆç½‘ç»œç ”ç©¶ã€‹ã€‚â€<br>å¬èµ·æ¥å¾ˆä¸“ä¸šï¼Œä½†â€”â€”æ ¹æœ¬ä¸å­˜åœ¨ã€‚</p><p>è¿™å°±æ˜¯æ‰€è°“çš„ <strong>å¹»è§‰</strong>ã€‚</p><hr><h2 id="å¹»è§‰ä»å“ªæ¥ï¼Ÿ"><a href="#å¹»è§‰ä»å“ªæ¥ï¼Ÿ" class="headerlink" title="å¹»è§‰ä»å“ªæ¥ï¼Ÿ"></a>å¹»è§‰ä»å“ªæ¥ï¼Ÿ</h2><p>ç®€å•è¯´ï¼Œè¯­è¨€æ¨¡å‹çš„æ ¸å¿ƒä»»åŠ¡æ˜¯â€œé¢„æµ‹ä¸‹ä¸€ä¸ªè¯â€ã€‚å®ƒå¹¶ä¸çœŸæ­£ç†è§£äº‹å®ï¼Œåªæ˜¯åœ¨å¤§é‡è¯­æ–™ä¸­å­¦ä¹ â€œè¯è¯­æ­é…çš„æ¦‚ç‡â€ã€‚å½“ä½ é—®å®ƒé—®é¢˜æ—¶ï¼Œå®ƒä¼šæ ¹æ®è¯­ä¹‰çŒœä¸€ä¸ªâ€œçœ‹èµ·æ¥åˆç†çš„ç­”æ¡ˆâ€ï¼Œ<br><strong>ä½†å¹¶ä¸ä¿è¯é‚£æ˜¯çœŸçš„</strong>ã€‚</p><hr><h2 id="RAG-æ˜¯æ€ä¹ˆå¸®å¿™çš„ï¼Ÿ"><a href="#RAG-æ˜¯æ€ä¹ˆå¸®å¿™çš„ï¼Ÿ" class="headerlink" title="RAG æ˜¯æ€ä¹ˆå¸®å¿™çš„ï¼Ÿ"></a>RAG æ˜¯æ€ä¹ˆå¸®å¿™çš„ï¼Ÿ</h2><p>RAGï¼ˆRetrieval-Augmented Generationï¼‰å¯ä»¥ç†è§£ä¸ºæ¨¡å‹çš„å¤–ç½®äº‹å®å¼•æ“ã€‚<br>å®ƒä¸å†â€œå‡­è®°å¿†ççŒœâ€ï¼Œè€Œæ˜¯å…ˆå»æŸ¥èµ„æ–™ã€‚</p><p>å½“ä½ æé—®æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆç”¨æ£€ç´¢æ¨¡å‹ï¼ˆembedding + å‘é‡åº“ï¼‰æ‰¾å‡ºä¸é—®é¢˜æœ€ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µï¼Œå†æŠŠè¿™äº›ç‰‡æ®µæ‹¼è¿› prompt ä¸€èµ·äº¤ç»™æ¨¡å‹ç”Ÿæˆã€‚</p><hr><h2 id="ä¸ºä»€ä¹ˆ-RAG-ä¸èƒ½å®Œå…¨æ¶ˆç­å¹»è§‰ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-RAG-ä¸èƒ½å®Œå…¨æ¶ˆç­å¹»è§‰ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ RAG ä¸èƒ½å®Œå…¨æ¶ˆç­å¹»è§‰ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ RAG ä¸èƒ½å®Œå…¨æ¶ˆç­å¹»è§‰ï¼Ÿ</h2><p>RAG èƒ½æ˜¾è‘—é™ä½å¹»è§‰ï¼Œä½†æ— æ³•å®Œå…¨æ¶ˆç­ã€‚åŸå› æœ‰ä¸‰ï¼š</p><ol><li><strong>æ£€ç´¢ä¸å‡†</strong>ï¼šå¦‚æœå‘é‡åº“å¬å›äº†é”™è¯¯ç‰‡æ®µï¼Œæ¨¡å‹ä»ç„¶å¯èƒ½èƒ¡è¯´ã€‚</li><li><strong>å¼•ç”¨ä¸ä¸¥è°¨</strong>ï¼šæ¨¡å‹æœ‰æ—¶ä¼šâ€œäºŒæ¬¡åŠ å·¥â€èµ„æ–™ï¼ŒæŠŠåŸè¯æ”¹å¾—é¢ç›®å…¨éã€‚</li><li><strong>çŸ¥è¯†ç¼ºå¤±</strong>ï¼šå¦‚æœçŸ¥è¯†åº“æœ¬èº«æ²¡æœ‰è¿™æ¡ä¿¡æ¯ï¼ŒRAG ä¹Ÿå¸®ä¸äº†å¿™ã€‚</li></ol><p>æ¢å¥è¯è¯´ï¼ŒRAG ä¸æ˜¯é˜²å¹»è§‰çš„â€œæŠ¤èº«ç¬¦â€ï¼Œè€Œæ˜¯ä¸€ä¸ªè®©æ¨¡å‹â€œæœ‰ä¾æ®å¯æŸ¥â€çš„äº‹å®æ¥æºã€‚</p><hr><h2 id="å·¥ç¨‹å®è·µï¼šå¦‚ä½•è®©-RAG-æ›´å¯é ï¼Ÿ"><a href="#å·¥ç¨‹å®è·µï¼šå¦‚ä½•è®©-RAG-æ›´å¯é ï¼Ÿ" class="headerlink" title="å·¥ç¨‹å®è·µï¼šå¦‚ä½•è®© RAG æ›´å¯é ï¼Ÿ"></a>å·¥ç¨‹å®è·µï¼šå¦‚ä½•è®© RAG æ›´å¯é ï¼Ÿ</h2><p>å®è·µä¸­æƒ³è®© RAG çœŸæ­£é™ä½å¹»è§‰ï¼Œéœ€è¦å‡ æ¡å…³é”®ç­–ç•¥ï¼š</p><ul><li><strong>çŸ¥è¯†åˆ†æ®µåˆç†</strong>ï¼šæ®µå¤ªé•¿æ£€ç´¢ä¸å‡†ï¼Œå¤ªçŸ­è¯­ä¹‰ç¢ã€‚</li><li><strong>embedding æ¨¡å‹è´¨é‡</strong>é«˜ï¼šä¿è¯è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…å‡†ç¡®ã€‚</li><li>æ£€ç´¢ + rerank <strong>æ··åˆå¬å›</strong>ï¼šå‘é‡ + BM25 åŒä¿é™©ã€‚</li><li><strong>Prompt</strong> ç»“æ„æ¸…æ™°ï¼šæç¤ºæ¨¡å‹â€œè¯·ä»…æ ¹æ®ä»¥ä¸‹å†…å®¹å›ç­”â€ã€‚</li><li><strong>å¼•ç”¨éªŒè¯</strong>ï¼šç”Ÿæˆç»“æœåå¯åšè¯­ä¹‰æ¯”å¯¹ï¼Œæ£€æµ‹å›ç­”æ˜¯å¦å‡ºè‡ªæ£€ç´¢æ–‡æœ¬ã€‚</li></ul><p>æœ‰äº›ä¼ä¸šé¡¹ç›®ç”šè‡³ä¼šåœ¨ RAG ç»“æœä¸Šå†å¥—ä¸€å±‚ â€œFact Check æ¨¡å—â€ï¼Œ<br>è‡ªåŠ¨æ¯”å¯¹ç”Ÿæˆå†…å®¹ä¸åŸæ–‡ç›¸ä¼¼åº¦ï¼Œ<strong>è¿›ä¸€æ­¥è¿‡æ»¤å¹»è§‰</strong>ã€‚</p><hr><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>RAG å…¶å®æ˜¯åˆ©ç”¨çŸ¥è¯†åº“æ¥ä¸ºæ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ï¼Œä»¥ç»™å‡ºç›¸å¯¹å¯é çš„ç­”æ¡ˆã€‚ä½†æ˜¯åœ¨è¿‡ç¨‹ä¸­ï¼Œç”±äº<strong>å›ç­”æ˜¯ç”±AIç»™å‡º</strong>ï¼Œå³ä¾¿æœ‰äº†ç›¸å…³çš„ä¸Šä¸‹æ–‡ï¼Œä»ç„¶å¯èƒ½ç»™å‡ºä¸é è°±çš„ç­”æ¡ˆï¼›å¦å¤–çŸ¥è¯†åº“ä¸­æ£€ç´¢å‡ºæ¥çš„çŸ¥è¯†ç²¾åº¦ï¼ˆ<strong>å¬å›ç‡</strong>ï¼‰ä¹Ÿæ˜¯ä¸€å¤§å½±å“ï¼Œåªæœ‰å‡†ç¡®çš„æ£€ç´¢æ‰èƒ½å¼•å¯¼æ¨¡å‹ç»™å‡ºé è°±çš„ç­”æ¡ˆï¼Œå› æ­¤å¯ä»¥ä»<strong>embeddingæ¨¡å‹ã€è¾“å‡ºéªŒè¯ç­‰</strong>ä¸‹æ‰‹ï¼Œæé«˜å›ç­”ç²¾åº¦ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>RAG æ˜¯ä»€ä¹ˆ</title>
    <link href="/2025/10/20/2025-10-20-78/"/>
    <url>/2025/10/20/2025-10-20-78/</url>
    
    <content type="html"><![CDATA[<h1 id="RAG-æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒæˆäº†å¤§æ¨¡å‹è½åœ°çš„â€œæ ‡é…â€ï¼Ÿ"><a href="#RAG-æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒæˆäº†å¤§æ¨¡å‹è½åœ°çš„â€œæ ‡é…â€ï¼Ÿ" class="headerlink" title="RAG æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒæˆäº†å¤§æ¨¡å‹è½åœ°çš„â€œæ ‡é…â€ï¼Ÿ"></a>RAG æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒæˆäº†å¤§æ¨¡å‹è½åœ°çš„â€œæ ‡é…â€ï¼Ÿ</h1><p><img src="https://images/typecho//2025/10/790909958.png" alt="2025-10-20T09:09:12.png"><br>æœ€è¿‘å‡ å¹´ï¼ŒRAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰è¿™ä¸ªè¯å‡ ä¹æˆäº†å¤§æ¨¡å‹è½åœ°é¡¹ç›®çš„æ ‡é…ã€‚æ— è®ºæ˜¯çŸ¥è¯†é—®ç­”ã€æ–‡æ¡£åŠ©æ‰‹ï¼Œè¿˜æ˜¯ä¼ä¸šæ™ºèƒ½å®¢æœï¼Œéƒ½åœ¨è¯´è‡ªå·±æ˜¯â€œRAG æ¶æ„â€ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒRAG æ˜¯ä¸€ç§è®©å¤§è¯­è¨€æ¨¡å‹å…·å¤‡â€œå¤–éƒ¨è®°å¿†â€çš„æ–¹æ³•ã€‚ä¼ ç»Ÿæ¨¡å‹å›ç­”é—®é¢˜å®Œå…¨ä¾èµ–è®­ç»ƒå‚æ•°ï¼Œä½†è®­ç»ƒæ•°æ®æœ‰æ—¶æ•ˆæ€§ï¼Œæ¨¡å‹å¹¶ä¸çŸ¥é“æœ€æ–°çš„ä¸šåŠ¡æˆ–æ–‡æ¡£ã€‚è€Œ RAG çš„åšæ³•æ˜¯â€”â€”åœ¨ç”Ÿæˆç­”æ¡ˆå‰ï¼Œå…ˆå»çŸ¥è¯†åº“é‡Œæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå†è®©æ¨¡å‹åŸºäºè¿™äº›èµ„æ–™å›ç­”ã€‚è¿™å°±åƒæ¨¡å‹èº«è¾¹å¤šäº†ä¸ªâ€œèµ„æ–™ç®¡ç†å‘˜â€ğŸ“šï¼Œè®©å®ƒèƒ½å³æ—¶æŸ¥é˜…ã€å³æ—¶å›ç­”ã€‚</p><p>å·¥ä½œåŸç†å…¶å®ä¸å¤æ‚ï¼š<br>å½“æˆ‘ä»¬æé—®æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆç”¨ä¸€ä¸ª <strong>Embedding æ¨¡å‹</strong>æŠŠé—®é¢˜å‘é‡åŒ–ï¼Œç„¶åå»å‘é‡æ•°æ®åº“ï¼ˆå¦‚ Milvusã€Faissã€Elasticsearch ç­‰ï¼‰ä¸­æ‰¾åˆ°æœ€ç›¸ä¼¼çš„æ–‡æ¡£ç‰‡æ®µã€‚æ¥ç€ï¼Œè¿™äº›ç‰‡æ®µä¼šè¢«æ‹¼è¿› promptï¼Œä¸€èµ·ä¼ ç»™å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆå›ç­”ã€‚è¿™æ ·æ¨¡å‹æ—¢èƒ½ä¿æŒè¯­è¨€èƒ½åŠ›ï¼Œåˆèƒ½å¼•ç”¨ä½ æä¾›çš„çŸ¥è¯†ã€‚</p><p>ç›¸æ¯”ç›´æ¥é—®æ¨¡å‹ï¼ŒRAG æœ‰ä¸‰ä¸ªæ˜æ˜¾å¥½å¤„ï¼š</p><ol><li>æ¨¡å‹èƒ½å›ç­”â€œå®ƒåŸæœ¬ä¸çŸ¥é“â€çš„å†…å®¹ï¼Œæ¯”å¦‚å…¬å¸å†…éƒ¨æ”¿ç­–ã€äº§å“æ‰‹å†Œã€‚</li><li>å›ç­”æ›´å¯ä¿¡ï¼Œä¸å®¹æ˜“èƒ¡è¯´å…«é“ï¼ˆè™½ç„¶è¿˜ä¸èƒ½å®Œå…¨é¿å… ğŸ¤”ï¼‰ã€‚</li><li>æ›´æ–°æ–¹ä¾¿ï¼Œåªè¦æ”¹çŸ¥è¯†åº“ï¼Œä¸ç”¨é‡æ–°å¾®è°ƒæ¨¡å‹ã€‚</li></ol><p>ä¸¾ä¸ªå¸¸è§çš„ä¾‹å­ï¼šä¼ä¸šçŸ¥è¯†é—®ç­”ã€‚è¿‡å»ï¼Œå‘˜å·¥é—®â€œæˆ‘ä»¬çš„å®¡æ‰¹æµç¨‹æ˜¯å‡ æ­¥ï¼Ÿâ€ï¼Œå¾—å»ç¿»æ–‡æ¡£ã€‚ç°åœ¨ç”¨ RAGï¼Œåªè¦æå‰æŠŠæ–‡æ¡£åˆ†æ®µåµŒå…¥æ•°æ®åº“ï¼Œå‘˜å·¥æé—®åç³»ç»Ÿæ£€ç´¢å‡ºç›¸å…³æ®µè½ï¼Œå†äº¤ç»™æ¨¡å‹ç”Ÿæˆä¸€å¥è‡ªç„¶çš„å›ç­”ï¼šâ€œå®¡æ‰¹æµç¨‹å…±ä¸‰æ­¥ï¼Œåˆ†åˆ«æ˜¯â€¦â€ã€‚æ—¢å¿«åˆå‡†ã€‚</p><p>å½“ç„¶ï¼ŒRAG ä¸æ˜¯ä¸‡èƒ½çš„ã€‚æ£€ç´¢ç²’åº¦ã€å‘é‡è´¨é‡ã€ä¸Šä¸‹æ–‡æ‹¼æ¥éƒ½å¾ˆå½±å“æ•ˆæœã€‚æ®µè½å¤ªå¤§æ‰¾ä¸å‡†ï¼Œå¤ªå°åˆå®¹æ˜“ä¸¢è¯­ä¹‰ï¼›<strong>Embedding æ¨¡å‹</strong>é€‰ä¸å¥½ï¼Œç›¸ä¼¼åº¦ä¹Ÿä¸å‡†ã€‚å®è·µä¸­ï¼Œâ€œæ£€ç´¢æ¯”ç”Ÿæˆæ›´é‡è¦â€å‡ ä¹æ˜¯é‡‘ç§‘ç‰å¾‹ã€‚</p><p>ç°åœ¨ï¼Œå¾ˆå¤šå›¢é˜Ÿåœ¨æ¢ç´¢æ›´èªæ˜çš„ RAGï¼Œæ¯”å¦‚æ··åˆå¬å›ï¼ˆå‘é‡+BM25ï¼‰ã€Graph RAGï¼ˆçŸ¥è¯†å›¾è°±å¢å¼ºï¼‰ã€å¤šè½®ä¸Šä¸‹æ–‡è®°å¿†ç­‰ã€‚RAG ä¸å†åªæ˜¯â€œæŸ¥èµ„æ–™â€ï¼Œè€Œæ˜¯æ¼”åŒ–æˆä¸€ç§èƒ½åŠ¨æ€ç†è§£å’Œæ•´åˆçŸ¥è¯†çš„æ¡†æ¶ã€‚</p><p>RAG çš„æ„ä¹‰åœ¨äºâ€”â€”å®ƒè®©å¤§æ¨¡å‹çœŸæ­£å…·å¤‡â€œçŸ¥è¯†æ›´æ–°â€èƒ½åŠ›ï¼Œè€Œä¸ç”¨é‡æ–°è®­ç»ƒã€‚<br>å¯¹äºä¼ä¸šæ¥è¯´ï¼Œè¿™æ˜¯ä¸€æ¡æå…·æ€§ä»·æ¯”çš„è½åœ°è·¯çº¿ï¼š</p><ol><li>æ•°æ®è‡ªå·±æŒæ§ï¼Œ</li><li>æ¨¡å‹çµæ´»ç»„åˆï¼Œ</li><li>ç³»ç»Ÿèƒ½éšæ—¶æ›´æ–°ã€‚</li></ol><p>ä¸€å¥è¯æ€»ç»“ï¼š</p><blockquote><p>RAG è®©æ¨¡å‹ä¸æ­¢ä¼šâ€œè¯´â€ï¼Œè¿˜èƒ½â€œæŸ¥â€ä¸â€œæ‡‚â€ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>RocketMQ åº”ç”¨ï¼šå·¥ä½œæµå’ŒæœåŠ¡è§£è€¦</title>
    <link href="/2025/10/11/2025-10-11-76/"/>
    <url>/2025/10/11/2025-10-11-76/</url>
    
    <content type="html"><![CDATA[<h1 id="RocketMQåº”ç”¨ï¼šå·¥ä½œæµå’ŒæœåŠ¡è§£è€¦"><a href="#RocketMQåº”ç”¨ï¼šå·¥ä½œæµå’ŒæœåŠ¡è§£è€¦" class="headerlink" title="RocketMQåº”ç”¨ï¼šå·¥ä½œæµå’ŒæœåŠ¡è§£è€¦"></a>RocketMQåº”ç”¨ï¼šå·¥ä½œæµå’ŒæœåŠ¡è§£è€¦</h1><p><img src="https://images/typecho//2025/10/1922781609.png" alt="2025-10-10T12:44:13.png"><br>æ•´ä¸ªå·¥ä½œæµç¨‹ç”± <code>Workflow</code> æœåŠ¡è°ƒåº¦ï¼Œå…¶ä»–å¾®æœåŠ¡éƒ½è®¢é˜…äº†ä¸è‡ªå·±ä»»åŠ¡ç›¸å…³çš„ä¸»é¢˜ï¼Œä¸»é¢˜çš„æ¶ˆæ¯ç”±Workflowçš„producerå‘é€ï¼ŒåŒæ—¶Workflowä¹Ÿç›‘å¬å…¶ä»–å¾®æœåŠ¡è¿”å›çš„ç»“æœï¼Œç”±è¿”å›çš„ç»“æœè§¦å‘å¯¹åº”çš„producerã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>RocketMQæ¶ˆæ¯é˜Ÿåˆ—ç¼–æ’å·¥ä½œæµ</title>
    <link href="/2025/10/10/2025-10-10-71/"/>
    <url>/2025/10/10/2025-10-10-71/</url>
    
    <content type="html"><![CDATA[<h1 id="RocketMQ-æ¶ˆæ¯é˜Ÿåˆ—"><a href="#RocketMQ-æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="RocketMQ æ¶ˆæ¯é˜Ÿåˆ—"></a>RocketMQ æ¶ˆæ¯é˜Ÿåˆ—</h1><h2 id="ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ</h2><p>æ¶ˆæ¯é˜Ÿåˆ—é¡¾åæ€ä¹‰å°±æ˜¯æŠŠæ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯çš„è¡Œä¸ºæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>æ¶ˆè´¹</strong>ï¼Œéœ€è¦æ¶ˆè´¹æ¶ˆæ¯çš„æ¶ˆè´¹è€…è‡ªè¡Œä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±å¼•å‡ºäº†æ¶ˆæ¯é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªç‰¹æ€§â€”â€”<strong>è§£è€¦</strong>ã€‚</p><ol><li><strong>è§£è€¦</strong>ï¼šå¦‚æœæ²¡æœ‰æ¶ˆæ¯é˜Ÿåˆ—ï¼šæˆ‘ä»¬å°†æœåŠ¡Açš„æ¶ˆæ¯å‘é€ç»™æœåŠ¡Bå’ŒæœåŠ¡Cï¼Œåç»­åˆæ–°å¢äº†æœåŠ¡Déœ€è¦æœåŠ¡Açš„æ¶ˆæ¯ï¼ŒæœåŠ¡Cä¸éœ€è¦Açš„æ¶ˆæ¯äº†ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹ä¸€ä¸ªä¸ªæœåŠ¡è¿›è¡Œå…·ä½“çš„æ›´æ”¹ã€‚åœ¨å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ¶ˆæ¯ä¸¢åˆ°é˜Ÿåˆ—é‡Œï¼Œéœ€è¦çš„è‡ªå–å°±å¯ä»¥äº†ï¼Œå®ç°äº†æœåŠ¡çš„è§£è€¦ã€‚</li></ol><p>å…ˆæ”¾åˆ°é˜Ÿåˆ—é‡Œï¼Œæœ‰éœ€è¦çš„æœåŠ¡è‡ªå–æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¿™ç§æ¨¡å¼åˆæœ‰ä»€ä¹ˆç‰¹æ€§å‘¢ï¼Ÿâ€”â€”<strong>å¼‚æ­¥</strong>ã€‚<br>2. <strong>å¼‚æ­¥</strong>ï¼šè®¸å¤šæäº¤ææ–™è¿”å›ç»“æœçš„æ“ä½œéƒ½å…·æœ‰å¼‚æ­¥çš„ç‰¹æ€§ï¼Œä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥æ€§å‘¢ï¼Œå› ä¸ºåŒæ­¥çš„æ“ä½œå¤ªè€—è´¹æ—¶é—´äº†ï¼Œæäº¤â€“&gt;å¤„ç†â€“&gt;è¿”å›ï¼Œå¦‚æœæ˜¯éœ€è¦å¤„ç†çš„è¯·æ±‚ç‰¹åˆ«å¤šï¼Œé‚£ä¹ˆè¿”å›çš„æ—¶é—´è¿˜ä¼šå¤§å¹…å¢åŠ ï¼Œæ²¡æœ‰å¿…è¦è®©ç”¨æˆ·æŒç»­ç­‰å¾…ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ç”¨æˆ·æäº¤åå¼‚æ­¥å¤„ç†ï¼Œå¤„ç†å®Œæˆåå†é€šçŸ¥ç”¨æˆ·ã€‚</p><pre><code class="hljs">å¼‚æ­¥å¤„ç†æ‹†è§£ä¸ºï¼š**æäº¤--&gt;å·²ç»æäº¤ï¼Œå¤„ç†--&gt;å¤„ç†å®Œæˆï¼Œé€šçŸ¥--&gt;é€šçŸ¥å®Œæˆ**ã€‚ä¸‰è€…ä¸­é—´é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ä¸²è”èµ·æ¥å°±å¯ä»¥äº†ï¼Œå¤§å¤§é™ä½äº†æ¯ä¸ªè¯·æ±‚çš„å“åº”æ—¶é—´ï¼Œæå‡äº†ç”¨æˆ·çš„ä½“éªŒã€‚è¿™å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„ç¬¬äºŒä¸ªç”¨é€”ï¼ŒæœåŠ¡è§£è€¦ã€‚</code></pre><p>å¼‚æ­¥æ„å‘³ç€æœåŠ¡ä¸å¿…å®æ—¶å¤„ç†è¯·æ±‚ï¼Œé‚£ä¹ˆè¿™ç§æ¨¡å¼åˆå¯ä»¥å¸¦æ¥ä»€ä¹ˆå‘¢ï¼Ÿâ€”â€”<strong>å‰Šå³°</strong>ã€‚<br>3. <strong>å‰Šå¼±å³°</strong>ï¼šå½“å¤§é‡çš„è¯·æ±‚æ¶Œå…¥ï¼Œè¿™åœ¨ç”Ÿæ´»ä¸­å®Œå…¨æ˜¯å¯èƒ½çš„ï¼ˆç§’æ€ã€æŠ¢ç¥¨ç­‰é«˜å¹¶å‘åœºæ™¯ï¼‰ï¼Œè¯·æ±‚çš„æ³¢å³°æ˜¯æ— æ³•é¿å…çš„ï¼ŒåŒæ­¥çš„æ“ä½œä¸­æœåŠ¡å™¨çš„è´Ÿè½½ä¹Ÿæ˜¯éšç€è¯·æ±‚è€Œæ³¢åŠ¨ï¼Œä½†æ˜¯å¼‚æ­¥æ“ä½œä½¿å¾—æˆ‘ä»¬å¯ä»¥æ ¹æ®æœåŠ¡å™¨çš„èƒ½åŠ›å‡è¡¡è´Ÿè½½ï¼Œ<strong>è¯·æ±‚å­˜å…¥æ¶ˆæ¯é˜Ÿåˆ—â€“&gt;æœåŠ¡å™¨æ ¹æ®è‡ªå·±èƒ½åŠ›ä»ä¸­æ¶ˆè´¹è¯·æ±‚</strong>ï¼Œä½¿å¾—ç³»ç»Ÿè´Ÿè½½ç¨³å®šï¼Œé¿å…å¤§å¹…æ³¢åŠ¨ï¼Œä¿éšœæœåŠ¡æ­£å¸¸è¿è¡Œã€‚</p><h2 id="å‡ ç§æ¶ˆæ¯é˜Ÿåˆ—"><a href="#å‡ ç§æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="å‡ ç§æ¶ˆæ¯é˜Ÿåˆ—"></a>å‡ ç§æ¶ˆæ¯é˜Ÿåˆ—</h2><table><thead><tr><th>ç‰¹æ€§</th><th>Kafka</th><th>ActiveMQ</th><th>RabbitMQ</th><th>RocketMQ</th></tr></thead><tbody><tr><td><strong>åŠŸèƒ½æ”¯æŒ</strong></td><td>åˆ†å¸ƒå¼ã€åˆ†åŒºã€é«˜ååé‡ã€æµå¤„ç†ã€æŒä¹…åŒ–</td><td>JMS æ”¯æŒã€æŒä¹…åŒ–ã€äº‹åŠ¡ã€æ¶ˆæ¯è¿‡æ»¤</td><td>æ¶ˆæ¯è·¯ç”±ã€æ’ä»¶æœºåˆ¶ã€æŒä¹…åŒ–ã€å¤šç§åè®®æ”¯æŒ</td><td>åˆ†å¸ƒå¼ã€é«˜ååé‡ã€äº‹åŠ¡ã€å®šæ—¶å’Œå»¶æ—¶æ¶ˆæ¯ã€æŒä¹…åŒ–</td></tr><tr><td><strong>å¯ç”¨æ€§</strong></td><td>é«˜ï¼ˆå¤šå‰¯æœ¬æœºåˆ¶ã€è‡ªåŠ¨æ¢å¤ï¼‰</td><td>é«˜ï¼ˆæ”¯æŒä¸»ä»æ¶æ„å’Œå¤šç§æŒä¹…åŒ–æœºåˆ¶ï¼‰</td><td>é«˜ï¼ˆé•œåƒé˜Ÿåˆ—ã€é›†ç¾¤æ¨¡å¼ï¼‰</td><td>é«˜ï¼ˆå¤šå‰¯æœ¬æœºåˆ¶ã€é›†ç¾¤æ¨¡å¼ï¼‰</td></tr><tr><td><strong>æ¶ˆæ¯å¯é æ€§</strong></td><td>é«˜ï¼ˆæ•°æ®å¤åˆ¶ã€å¤šå‰¯æœ¬ï¼‰</td><td>é«˜ï¼ˆæŒä¹…åŒ–å­˜å‚¨ã€äº‹åŠ¡æ”¯æŒï¼‰</td><td>é«˜ï¼ˆç¡®è®¤æœºåˆ¶ã€æŒä¹…åŒ–å­˜å‚¨ï¼‰</td><td>é«˜ï¼ˆæ•°æ®å¤åˆ¶ã€å¤šå‰¯æœ¬ã€æŒä¹…åŒ–å­˜å‚¨ï¼‰</td></tr><tr><td><strong>æ—¶æ•ˆæ€§</strong></td><td>æ¯«ç§’çº§ï¼ˆå–å†³äºé…ç½®å’Œç½‘ç»œæ¡ä»¶ï¼‰</td><td>æ¯«ç§’çº§ï¼ˆå–å†³äºé…ç½®å’Œç½‘ç»œæ¡ä»¶ï¼‰</td><td>å¾®ç§’çº§åˆ°æ¯«ç§’çº§ï¼ˆå–å†³äºé…ç½®å’Œç½‘ç»œæ¡ä»¶ï¼‰</td><td>æ¯«ç§’çº§ï¼ˆå–å†³äºé…ç½®å’Œç½‘ç»œæ¡ä»¶ï¼‰</td></tr><tr><td><strong>Topic æ•°é‡å¯¹ååé‡çš„å½±å“</strong></td><td>å½±å“è¾ƒå¤§ï¼ˆåˆ†åŒºæœºåˆ¶å¸¦æ¥ç®¡ç†å’Œèµ„æºæ¶ˆè€—ï¼‰</td><td>å½±å“ä¸­ç­‰ï¼ˆé˜Ÿåˆ—ç®¡ç†å¼€é”€ï¼‰</td><td>å½±å“è¾ƒå°ï¼ˆé«˜æ•ˆçš„è·¯ç”±æœºåˆ¶ï¼‰</td><td>å½±å“ä¸­ç­‰ï¼ˆåˆ†åŒºæœºåˆ¶å’Œç®¡ç†å¼€é”€ï¼‰</td></tr><tr><td><strong>å•æœºååé‡</strong></td><td>é«˜ï¼ˆç™¾ä¸‡çº§æ¶ˆæ¯æ¯ç§’ï¼‰</td><td>ä¸­ç­‰ï¼ˆåä¸‡çº§æ¶ˆæ¯æ¯ç§’ï¼‰</td><td>ä¸­ç­‰ï¼ˆåä¸‡çº§æ¶ˆæ¯æ¯ç§’ï¼‰</td><td>é«˜ï¼ˆç™¾ä¸‡çº§æ¶ˆæ¯æ¯ç§’ï¼‰</td></tr><tr><td><strong>Client SDK</strong></td><td>å¤šè¯­è¨€ï¼ˆJavaã€Scalaã€Python ç­‰ï¼‰</td><td>å¤šè¯­è¨€ï¼ˆJavaã€Cã€C++ ç­‰ï¼‰</td><td>å¤šè¯­è¨€ï¼ˆJavaã€Erlangã€.NET ç­‰ï¼‰</td><td>å¤šè¯­è¨€ï¼ˆJavaã€C++ã€Go ç­‰ï¼‰</td></tr></tbody></table><ul><li>å…¶ä¸­Kafakaé€‚åˆå¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ã€æ—¥å¿—é‡‡é›†åœºæ™¯ï¼Œå› ä¸ºæ€§èƒ½æœ€é«˜ã€‚</li><li>å¯¹å®æ—¶æ€§æœ‰è¦æ±‚ï¼Œä¸å…³å¿ƒåº•å±‚ï¼Œç”¨RabbitMQå³å¯ã€‚</li><li>é˜¿é‡Œçš„RocketMQç»å†è¿‡618ã€åŒ11ç­‰èŠ‚ç‚¹çš„è€ƒéªŒï¼Œä¸”å…·æœ‰ä¸°å¯Œçš„æ•™ç¨‹ï¼Œä¸€èˆ¬ä½¿ç”¨RocketMQå°±å¯ä»¥ã€‚</li></ul><h2 id="RocketMQ"><a href="#RocketMQ" class="headerlink" title="RocketMQ"></a>RocketMQ</h2><p><img src="https://images/typecho//2025/10/2185089787.png" alt="2025-10-10T09:36:59.png">å®˜ç½‘çš„RocketMQéƒ¨ç½²æ¨¡å‹å›¾</p><p>RocketMQ å››å¤§æ ¸å¿ƒç»„ä»¶</p><table><thead><tr><th>éƒ¨ç½²æ¶æ„éƒ¨åˆ†</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong></td><td>å‘å¸ƒæ¶ˆæ¯çš„è§’è‰²ã€‚Producer é€šè¿‡ MQ çš„è´Ÿè½½å‡è¡¡æ¨¡å—é€‰æ‹©ç›¸åº”çš„ Broker é›†ç¾¤é˜Ÿåˆ—è¿›è¡Œæ¶ˆæ¯æŠ•é€’ï¼ŒæŠ•é€’è¿‡ç¨‹æ”¯æŒå¿«é€Ÿå¤±è´¥å’Œé‡è¯•æœºåˆ¶ã€‚</td></tr><tr><td><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong></td><td>æ¶ˆæ¯æ¶ˆè´¹çš„è§’è‰²ã€‚<br> - æ”¯æŒ <strong>æ¨ï¼ˆpushï¼‰</strong> å’Œ <strong>æ‹‰ï¼ˆpullï¼‰</strong> ä¸¤ç§æ¨¡å¼å¯¹æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚<br> - æ”¯æŒ <strong>é›†ç¾¤æ¨¡å¼</strong> å’Œ <strong>å¹¿æ’­æ¨¡å¼</strong> ä¸¤ç§æ¶ˆè´¹æ–¹å¼ã€‚<br> - æä¾› <strong>å®æ—¶æ¶ˆæ¯è®¢é˜…æœºåˆ¶</strong>ï¼Œå¯æ»¡è¶³å¤§å¤šæ•°ç”¨æˆ·çš„éœ€æ±‚ã€‚</td></tr><tr><td><strong>åç§°æœåŠ¡å™¨ï¼ˆNameServerï¼‰</strong></td><td>NameServer æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ <strong>Topic è·¯ç”±æ³¨å†Œä¸­å¿ƒ</strong>ï¼Œæ”¯æŒ Topicã€Broker çš„åŠ¨æ€æ³¨å†Œä¸å‘ç°ã€‚<br><br>ä¸»è¦åŒ…å«ä¸¤ä¸ªåŠŸèƒ½ï¼š<br>â‘  <strong>Broker ç®¡ç†</strong>ï¼šNameServer æ¥å— Broker é›†ç¾¤çš„æ³¨å†Œä¿¡æ¯å¹¶ä¿å­˜ä¸‹æ¥ï¼Œä½œä¸ºè·¯ç”±ä¿¡æ¯çš„åŸºç¡€æ•°æ®ï¼Œå¹¶æä¾›å¿ƒè·³æ£€æµ‹æœºåˆ¶æ£€æŸ¥ Broker å­˜æ´»çŠ¶æ€ã€‚<br>â‘¡ <strong>è·¯ç”±ä¿¡æ¯ç®¡ç†</strong>ï¼šæ¯ä¸ª NameServer éƒ½ä¼šä¿å­˜æ•´ä¸ª Broker é›†ç¾¤çš„è·¯ç”±ä¿¡æ¯å’Œå®¢æˆ·ç«¯ï¼ˆProducerã€Consumerï¼‰å¯æŸ¥è¯¢çš„é˜Ÿåˆ—ä¿¡æ¯ã€‚Producer å’Œ Consumer å¯é€šè¿‡ NameServer è·å– Broker é›†ç¾¤çš„è·¯ç”±ä¿¡æ¯ï¼Œä»è€Œå®Œæˆæ¶ˆæ¯æŠ•é€’ä¸æ¶ˆè´¹ã€‚<br><br>æ­¤å¤–ï¼ŒNameServer é€šå¸¸ä¼šæœ‰å¤šä¸ªå®ä¾‹éƒ¨ç½²ï¼Œå„å®ä¾‹ä¹‹é—´äº’ä¸é€šä¿¡ã€‚Broker ä¼šå‘æ¯å° NameServer æ³¨å†Œè‡ªå·±çš„è·¯ç”±ä¿¡æ¯ï¼Œæ¯ä¸ª NameServer éƒ½ä¿å­˜å®Œæ•´å‰¯æœ¬ã€‚å½“æŸä¸ª NameServer ä¸‹çº¿æ—¶ï¼Œå®¢æˆ·ç«¯ä»å¯ä»å…¶ä»– NameServer è·å–è·¯ç”±æ•°æ®ï¼Œä¿è¯ç³»ç»Ÿé«˜å¯ç”¨ã€‚</td></tr><tr><td><strong>ä»£ç†æœåŠ¡å™¨ï¼ˆBrokerï¼‰</strong></td><td>Broker è´Ÿè´£ <strong>æ¶ˆæ¯çš„å­˜å‚¨ã€æŠ•é€’ã€æŸ¥è¯¢</strong>ï¼Œå¹¶ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ã€‚<br><br> - NameServer ä¸ºæ— çŠ¶æ€èŠ‚ç‚¹ï¼Œè€Œ <strong>Broker æ˜¯é›†ç¾¤çš„æ ¸å¿ƒå­˜å‚¨èŠ‚ç‚¹</strong>ã€‚<br> - æ”¯æŒ <strong>Masterâ€“Slave æ¶æ„</strong>ï¼ŒBroker å¯åˆ†ä¸º Master ä¸ Slaveã€‚ä¸€ä¸ª Master å¯å¯¹åº”å¤šä¸ª Slaveï¼Œä½†æ¯ä¸ª Slave åªèƒ½å¯¹åº”ä¸€ä¸ª Masterã€‚<br> - Master ä¸ Slave çš„å¯¹åº”å…³ç³»é€šè¿‡ç›¸åŒçš„ <code>BrokerName</code> æ ‡è¯†ï¼Œä¸åŒçš„ <code>BrokerId</code> åŒºåˆ†ï¼ˆ<code>BrokerId=0</code> è¡¨ç¤º Masterï¼Œé 0 è¡¨ç¤º Slaveï¼‰ã€‚<br> - æ¯ä¸ª Broker èŠ‚ç‚¹ç‹¬ç«‹å­˜å‚¨æ•°æ®ï¼ŒMaster èŠ‚ç‚¹ä¹Ÿå¯ä»¥éƒ¨ç½²å¤šä¸ªä»¥å®ç°æ›´é«˜ååä¸å®¹ç¾èƒ½åŠ›ã€‚</td></tr></tbody></table><p>RocketMQ æ¶ˆæ¯æµè½¬æ¶æ„å›¾<br><img src="https://images/typecho//2025/10/4172020056.png" alt="2025-10-10T09:47:04.png"></p><p>RocketMQ æ¶ˆæ¯æµè½¬æ—¶åºå›¾<br><img src="https://images/typecho//2025/10/3606436471.png" alt="2025-10-10T09:54:58.png"></p><h2 id="ä¸ºä»€ä¹ˆç”¨RocketMQï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç”¨RocketMQï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨RocketMQï¼Ÿ"></a>ä¸ºä»€ä¹ˆç”¨RocketMQï¼Ÿ</h2><p>RocketMQæ˜¯ä¸€ä¸ªå¤©ç„¶çš„åˆ†å¸ƒå¼ç»„ä»¶ï¼Œå¯¹äºåˆ†å¸ƒå¼å¾®æœåŠ¡æ¥è¯´å¾ˆå¥½ç”¨ã€‚<br>ä¸šåŠ¡åœºæ™¯å¯¹å»¶æ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥ç”¨RocketMQã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Redissonåˆ†å¸ƒå¼é”é¿å…é‡å¤æäº¤ä»»åŠ¡</title>
    <link href="/2025/10/10/2025-10-10-70/"/>
    <url>/2025/10/10/2025-10-10-70/</url>
    
    <content type="html"><![CDATA[<h1 id="Redisson-åˆ†å¸ƒå¼é”é¿å…é‡å¤æäº¤ä»»åŠ¡"><a href="#Redisson-åˆ†å¸ƒå¼é”é¿å…é‡å¤æäº¤ä»»åŠ¡" class="headerlink" title="Redisson åˆ†å¸ƒå¼é”é¿å…é‡å¤æäº¤ä»»åŠ¡"></a>Redisson åˆ†å¸ƒå¼é”é¿å…é‡å¤æäº¤ä»»åŠ¡</h1><h2 id="ä¸ºä»€ä¹ˆè¦å¼•å…¥-åˆ†å¸ƒå¼é”-ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å¼•å…¥-åˆ†å¸ƒå¼é”-ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¼•å…¥ åˆ†å¸ƒå¼é” ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å¼•å…¥ <strong>åˆ†å¸ƒå¼é”</strong> ï¼Ÿ</h2><p>åœ¨æœ¬åœ°é”åœºæ™¯ä¸‹ï¼Œå·²ç»èƒ½å¤Ÿè§£å†³æœ¬åœ°æœåŠ¡ä¸‹å¤šçº¿ç¨‹ç«äº‰èµ„æºçš„åŒæ­¥é—®é¢˜ï¼Œä½†æ˜¯åœ¨åˆ†å¸ƒå¼çš„åœºæ™¯ä¸‹ï¼ŒæœåŠ¡Aå¯¹èµ„æºxåŠ é”ï¼Œè€ŒæœåŠ¡Bä¸å—æœåŠ¡Açš„é™åˆ¶ï¼Œè‹¥æ­¤æ—¶æœåŠ¡Bä¹Ÿå»è®¿é—®èµ„æºBï¼Œå°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¯¼è‡´æœåŠ¡å‡ºé”™ã€‚</p><h2 id="åˆ†å¸ƒå¼é”"><a href="#åˆ†å¸ƒå¼é”" class="headerlink" title="åˆ†å¸ƒå¼é”"></a>åˆ†å¸ƒå¼é”</h2><p>åˆ†å¸ƒå¼é”æ˜¯åˆ†å¸ƒå¼é›†ç¾¤åœºæ™¯ä¸‹å…±äº«çš„ä¸€ç§é”æœºåˆ¶ï¼Œä¿è¯äº†ä¸åŒæœåŠ¡ä¸‹çš„äº’æ–¥æ€§ï¼Œä»»æ„æ—¶åˆ»ï¼Œ<strong>åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥æŒæœ‰é”</strong>ã€‚<br>ç‰¹æ€§ï¼š</p><ul><li><strong>äº’æ–¥æ€§</strong>ï¼šåŒä¸€æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥æŒæœ‰é”ï¼Œä¸åŒçº¿ç¨‹ä¹‹é—´å…·æœ‰äº’æ–¥æ€§ï¼Œå³ä¾¿æ˜¯è·¨æœåŠ¡ã€‚</li><li><strong>è¶…æ—¶æœºåˆ¶</strong>ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼ŒæŒæœ‰é”çš„å®¢æˆ·ç«¯æ‰§è¡Œå®Œæˆä¹‹åé‡Šæ”¾é”ï¼Œä½†æ˜¯å¦‚æœæ‰§è¡Œæ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œå¯¼è‡´é”æ— æ³•æ­£ç¡®é‡Šæ”¾ï¼Œå°±ä¼šé€ æˆ<strong>æ­»é”</strong>ã€‚<br>ä¸ºäº†é˜²æ­¢æ­»é”ï¼Œéœ€è¦è®¾ç½®è¶…æ—¶æœºåˆ¶ï¼Œè¶…æ—¶è‡ªåŠ¨é‡Šæ”¾ã€‚</li><li><strong>è‡ªåŠ¨ç»­æœŸ</strong>ï¼šè¶…æ—¶æœºåˆ¶ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæŒæœ‰é”çš„å®¢æˆ·ç«¯åœ¨æ—¶é—´å†…æ— æ³•å®Œæˆä»»åŠ¡ï¼Œä¼šå¯¼è‡´ä»»åŠ¡è¿˜æ²¡å®Œæˆå°±é‡Šæ”¾é”ï¼Œè¿™ä¸æˆ‘ä»¬çš„åˆè¡·æ˜¯è¿èƒŒçš„ï¼ˆæˆ‘ä»¬å¼•å…¥è¶…æ—¶æœºåˆ¶å¹¶ä¸æ˜¯ä¸ºäº†é˜»ç¢æ­£å¸¸çš„ä»»åŠ¡å®Œæˆï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³æ½œåœ¨æœåŠ¡å¼‚å¸¸é€ æˆçš„æ­»é”é—®é¢˜ï¼‰ï¼Œå› æ­¤ï¼Œéœ€è¦å¼•å…¥è‡ªåŠ¨ç»­æœŸæœºåˆ¶ã€‚<br>å¼€å¯ä¸€ä¸ª<strong>ç›‘å¬ä»»åŠ¡</strong>ï¼Œç›‘å¬çº¿ç¨‹ï¼Œå¦‚æœå®¢æˆ·ç«¯è¿˜å­˜æ´»å°±<strong>å»¶é•¿</strong>è¶…æ—¶æ—¶é—´ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–è€…æ˜¯ä»»åŠ¡å¼‚å¸¸ã€‚</li></ul><h2 id="å‡ ç§å®ç°æ–¹å¼"><a href="#å‡ ç§å®ç°æ–¹å¼" class="headerlink" title="å‡ ç§å®ç°æ–¹å¼"></a>å‡ ç§å®ç°æ–¹å¼</h2><ul><li>æ•°æ®åº“</li><li>Zookeeper</li><li>Redis</li></ul><p>å…¶ä¸­ï¼ŒRedis<strong>æ€§èƒ½æœ€é«˜</strong>ï¼Œæ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯åˆ©ç”¨SetNXï¼ˆä½†æ˜¯æœ‰<strong>æ­»é”é—®é¢˜</strong>ï¼‰ï¼Œè€Œæ˜¯<strong>Redisson</strong> ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="ç›´æ¥å®ç°"><a href="#ç›´æ¥å®ç°" class="headerlink" title="ç›´æ¥å®ç°"></a>ç›´æ¥å®ç°</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp">String lockKey = REVIEW_LOCK_PREFIX + taskId;<br>RLock <span class="hljs-keyword">lock</span> = redissonCilent.getLock(lockKey);<br><br><span class="hljs-keyword">try</span>&#123;<br>    <span class="hljs-comment">// å°è¯•è·å–é”ï¼ˆæœ€å¤šç­‰å¾…2ç§’ï¼Œé”30ç§’åé‡Šæ”¾ï¼‰</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">lock</span>.tryLock(<span class="hljs-number">2</span>, <span class="hljs-number">30</span>, TimeUnit.second)&#123;<br>        <span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œé€»è¾‘</span><br>        <span class="hljs-comment">// ...</span><br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        log.info(<span class="hljs-string">&quot;ä»»åŠ¡ &#123;&#125; æ­£åœ¨è¢«å…¶ä»–äººå‘˜å¤„ç†ï¼Œè·³è¿‡æ­¤æ¬¡æäº¤&quot;</span>, taskId);<br>    &#125;<br>&#125;<span class="hljs-keyword">catch</span>(InterruptedException e)&#123;<br>    Thread.currentThread().interrupt();<br>    log.info(<span class="hljs-string">&quot;çº¿ç¨‹ç»ˆç«¯ï¼Œä»»åŠ¡ &#123;&#125; æ‰§è¡Œå¤±è´¥&quot;</span>, taskId);<br>&#125;<span class="hljs-keyword">catch</span>(Exception e)&#123;<br>    log.info(<span class="hljs-string">&quot;ä»»åŠ¡ &#123;&#125; æ‰§è¡Œå¼‚å¸¸&quot;</span>, taskId);<br>&#125;<span class="hljs-keyword">finally</span>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">lock</span>.isHeldByCurrentThread)&#123;<br>        <span class="hljs-keyword">lock</span>.unlock();<br>        <span class="hljs-keyword">lock</span>.info(<span class="hljs-string">&quot;å·²é‡Šæ”¾é” &#123;&#125;&quot;</span>, lockKey);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå‡è®¾ä»»åŠ¡æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰åŠ å…¥é”ç»­æœŸæœºåˆ¶ï¼Œå¦‚æœè¦ç»­æœŸï¼Œä½¿ç”¨<code>lock.lock()</code>å¯ä»¥è‡ªåŠ¨å®ç°çœ‹é—¨ç‹—çš„ç»­æœŸæœºåˆ¶ã€‚</p><h4 id="æ³¨è§£å¼éå…¥ä¾µå®ç°"><a href="#æ³¨è§£å¼éå…¥ä¾µå®ç°" class="headerlink" title="æ³¨è§£å¼éå…¥ä¾µå®ç°"></a>æ³¨è§£å¼éå…¥ä¾µå®ç°</h4><p>ç›´æ¥å®ç°åˆ†å¸ƒå¼é”éœ€è¦å¯¹å…·ä½“æ–¹æ³•è¿›è¡Œä»£ç æ”¹åŠ¨ï¼Œå¦‚æœæˆ‘ä»¬å¼•å…¥æ³¨è§£æ¥å®ç°ï¼Œå¯ä»¥å®ç°<strong>éå…¥ä¾µ</strong>çš„åˆ†å¸ƒå¼é”å®ç°ã€‚</p><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nim">@<span class="hljs-type">DistributedLock</span>(key = <span class="hljs-string">&quot;#taskId&quot;</span>, prefix = <span class="hljs-string">&quot;precheck:&quot;</span>, leaseTime = <span class="hljs-number">30</span>)<br>public <span class="hljs-type">void</span> handlePrecheck(<span class="hljs-type">Long</span> taskId)<span class="hljs-meta">&#123;...&#125;</span><br></code></pre></td></tr></table></figure><p>åªéœ€è¦åœ¨æ–¹æ³•ä¹‹å‰åŠ ä¸Šè‡ªå®šä¹‰çš„åˆ†å¸ƒå¼é”æ³¨è§£ï¼Œä½¿ç”¨èµ·æ¥ååˆ†è½»ä¾¿ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs less">ä¸šåŠ¡æ–¹æ³•ï¼ˆ<span class="hljs-variable">@DistributedLock</span>ï¼‰<br>     â”‚<br>     â–¼<br>DistributedLockAspectï¼ˆAOPæ‹¦æˆªï¼‰<br>     â”‚<br>     â”œâ”€ è§£æ SpEL è¡¨è¾¾å¼ï¼Œå¾—åˆ°å®Œæ•´é” key<br>     â”‚<br>     â”œâ”€ è°ƒç”¨ IDistributedLock.<span class="hljs-built_in">tryLock</span>(...)<br>     â”‚<br>     â”‚       â”‚<br>     â”‚       â–¼<br>     â”‚   RedissonDistributedLockï¼ˆå°è£… Redisson å®ç°ï¼‰<br>     â”‚       â”‚<br>     â”‚       â”œâ”€ è·å– RLock<br>     â”‚       â”œâ”€ æ‰§è¡Œ <span class="hljs-built_in">tryLock</span>(...)<br>     â”‚       â”œâ”€ æˆåŠŸ â†’ new <span class="hljs-built_in">ILock</span>(RLock, this)<br>     â”‚       â–¼<br>     â”‚   è¿”å› ILockï¼ˆå°è£…é”å¼•ç”¨ï¼‰<br>     â”‚<br>     â”œâ”€ æ‰§è¡Œä¸šåŠ¡é€»è¾‘ joinPoint.<span class="hljs-built_in">proceed</span>()<br>     â”‚<br>     â”œâ”€ finallyï¼šlock.<span class="hljs-built_in">close</span>()<br>     â”‚<br>     â”‚       â–¼<br>     â”‚   ILock.<span class="hljs-built_in">close</span>()<br>     â”‚       â”‚<br>     â”‚       â””â”€ è°ƒç”¨ distributedLock.<span class="hljs-built_in">unlock</span>(lock)<br>     â”‚<br>     â”‚              â”‚<br>     â”‚              â–¼<br>     â”‚        RedissonDistributedLock.<span class="hljs-built_in">unlock</span>()<br>     â”‚              â”œâ”€ æ ¡éªŒçº¿ç¨‹æŒæœ‰é”<br>     â”‚              â””â”€ è°ƒç”¨ RLock.<span class="hljs-built_in">unlock</span>()<br>     â–¼<br>   ğŸ”“ é”é‡Šæ”¾<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆå¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><ol><li>å®šä¹‰æ³¨è§£@DistributedLock <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> @interface DistributedLock&#123;<br>    <span class="hljs-function">String <span class="hljs-title">key</span>()</span>; <br>    <span class="hljs-function">String <span class="hljs-title">prefix</span>() <span class="hljs-literal">default</span> &quot;<span class="hljs-keyword">lock</span>:&quot;</span>;<br>    <span class="hljs-function"><span class="hljs-built_in">long</span> <span class="hljs-title">tryTime</span>() <span class="hljs-literal">default</span> 30</span>; <span class="hljs-comment">// å°è¯•æ—¶é—´ï¼Œ30s</span><br>    <span class="hljs-function"><span class="hljs-built_in">long</span> <span class="hljs-title">leaseTime</span>() <span class="hljs-literal">default</span> 30</span>; <span class="hljs-comment">// é‡Šæ”¾æ—¶é—´ï¼Œ30s</span><br>    <span class="hljs-function">TimeUnit <span class="hljs-title">unit</span>() <span class="hljs-literal">default</span> TimeUnit.Seconds</span>; <span class="hljs-comment">// æ—¶é—´å•ä½ï¼Œç§’</span><br>    boolean fair <span class="hljs-literal">default</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// é»˜è®¤éå…¬å¹³é”</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li>ILock å°è£…é”é€»è¾‘ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰ <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ILock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AutoCloseable</span></span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object lock;<br>    <span class="hljs-keyword">private</span> IDistributedLock distributedLock; <span class="hljs-comment">// å¯ä»¥é€‚åº”ä¸åŒçš„åˆ†å¸ƒå¼é”å®ç°</span><br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">close</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>&#123;<br>        <span class="hljs-keyword">if</span>(lock != <span class="hljs-keyword">null</span>)&#123;<br>            distributedLock.unlock(lock);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure> ILock å°†é”çš„é€»è¾‘å°è£…ï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„DistributedLockå®ç°ä¸åŒçš„é”ï¼ˆå¯ä»¥æ˜¯Redisã€Zookeeperï¼‰ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿå®ç°ä¸åŒçš„closeï¼Œå³ä¾¿æ˜¯ä¸åŒçš„åˆ†å¸ƒå¼é”ï¼Œcloseæ–¹æ³•éƒ½å°è£…åœ¨ILockä¸­ï¼Œä½¿ç”¨æ—¶æ— éœ€å…³å¿ƒå…·ä½“çš„æ˜¯ä»€ä¹ˆåˆ†å¸ƒå¼é”ï¼Œå®ç°äº†<code>ç­–ç•¥æ¨¡å¼</code>ã€‚<br> ç»§æ‰¿AutoCloseableå¾ˆå…³é”®ï¼Œä½¿å¾— <code>try { ILock lock = distributedLock.tryLock(...); }</code> å…·å¤‡è‡ªåŠ¨é‡Šæ”¾èµ„æºçš„èƒ½åŠ›ï¼Œè€Œä¸ç”¨åœ¨finallyæ‰‹å†™èµ„æºé‡Šæ”¾closeã€‚</li><li>IDistributedLock åˆ†å¸ƒå¼é”æ“ä½œæ¥å£ <figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">public</span> interface IDistributedLock&#123;<br>    ILock <span class="hljs-title function_">lock</span>(<span class="hljs-built_in">String</span> <span class="hljs-built_in">key</span>, <span class="hljs-type">long</span> leaseTime, TimeUnit unit, <span class="hljs-type">boolean</span> fair);<br>    ILock <span class="hljs-title function_">tryLock</span>(<span class="hljs-built_in">String</span> <span class="hljs-built_in">key</span>, <span class="hljs-type">long</span> tryTime, <span class="hljs-type">long</span> leaseTime, TimeUnit unit, <span class="hljs-type">boolean</span> fair) <span class="hljs-keyword">throws</span> Exception;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-built_in">Object</span> lock);<br>&#125;<br></code></pre></td></tr></table></figure></li><li>RedissonDistributedLock å®ç° IDistributedLock æ¥å£ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonDitributedLock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IDistributedLock</span>&#123;<br>    <span class="hljs-meta">@Resource</span><br>    RedissonClient redissonClient;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> ILock <span class="hljs-title function_">lock</span><span class="hljs-params">(String key, <span class="hljs-type">long</span> leaseTime, TimeUnit unit, <span class="hljs-type">boolean</span> fair)</span>&#123;<br>        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> fair? redissonClient.getFairLock(key) : redissonClient.getLock(key);<br>        lock.lock(leaseTime, unit);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ILock</span>(lock, <span class="hljs-built_in">this</span>);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> ILock <span class="hljs-title function_">tryLock</span><span class="hljs-params">(String key, <span class="hljs-type">long</span> tryTime, <span class="hljs-type">long</span> leaseTime, TimeUnit unit, <span class="hljs-type">boolean</span> fair)</span>&#123;<br>        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> fair? redissonClient.getFairLock(key) : redissonClient.getLock(key);<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(tryTime, leaseTime, unit);<br>        <span class="hljs-keyword">if</span>(acquired)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ILock</span>(lock, <span class="hljs-built_in">this</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">(Object lock)</span>&#123;<br>        <span class="hljs-keyword">if</span>(lock instanceOf RLock)&#123;<br>            <span class="hljs-type">RLock</span> <span class="hljs-variable">rLock</span> <span class="hljs-operator">=</span> (RLock) lock;<br>            <span class="hljs-keyword">try</span>&#123;<br>                <span class="hljs-keyword">if</span>(rLock.islocked() &amp;&amp; rLock.isHeldByCurrentThread)&#123;<br>                    rLock.unlock();<br>                &#125;<br>            &#125;<span class="hljs-keyword">catch</span>(IllegalMonitorStateException e)&#123;<br>                log.warn(<span class="hljs-string">&quot;åˆ†å¸ƒå¼é”é‡Šæ”¾å¤±è´¥ï¼š&#123;&#125;&quot;</span>, e.getMessage());<br>            &#125;<br>        &#125; <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>5.DistibutedLockAspect åˆ‡é¢ <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockAspect</span>&#123;<br>    <br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IDistributedLock distributedLock;<br>    <br>    <span class="hljs-meta">@around(@annoation(distributedLockAnno))</span><br>    <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJointPoint jointPoint, DistributedLock distributedLockAnno)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> parseKey(jointPoint, distributedLockAnno);<br>        <span class="hljs-type">ILock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            lock = distributedLock.tryLock(<br>                    key,<br>                    distributedLockAnno.tryTime(),<br>                    distributedLockAnno.leaseTime(),<br>                    distributedLockAnno.unit(),<br>                    distributedLockAnno.fair()        <br>            );<br>            <span class="hljs-keyword">if</span>(lock == <span class="hljs-literal">null</span>)&#123;<br>                log.warn(<span class="hljs-string">&quot;æœªèƒ½è·å–åˆ°é”, &#123;&#125;&quot;</span>, key);<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>            &#125;<br>            <br>            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jointPoint.proceed(); <span class="hljs-comment">// åŸæœ¬æ–¹æ³•æ‰§è¡Œçš„ç»“æœ</span><br>        &#125; <span class="hljs-keyword">finally</span>&#123;<br>            <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span>) &#123;<br>                lock.close();<br>                log.info(<span class="hljs-string">&quot;ğŸ”“ å·²é‡Šæ”¾é”ï¼š&#123;&#125;&quot;</span>, key);<br>            &#125;<br>        &#125;<br><br>    &#125;<br>    <br>    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">parseKey</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, DistributedLock anno)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">spelKey</span> <span class="hljs-operator">=</span> anno.key();<br>        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();<br>        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();<br>        String[] paramNames = signature.getParameterNames();<br>        Object[] args = joinPoint.getArgs();<br><br>        <span class="hljs-type">EvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; paramNames.length; i++) &#123;<br>            context.setVariable(paramNames[i], args[i]);<br>        &#125;<br><br>        <span class="hljs-type">Expression</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> parser.parseExpression(spelKey);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> expression.getValue(context);<br>        <span class="hljs-keyword">return</span> anno.prefix() + Objects.toString(value);<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure></li></ol><p>æ•´ä½“æµç¨‹ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ @<span class="hljs-built_in">DistributedLock</span>(key=<span class="hljs-string">&quot;#id&quot;</span>)â”‚  â† ä¸šåŠ¡æ–¹æ³•<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>             â”‚<br>             â–¼<br>     <span class="hljs-selector-attr">[DistributedLockAspect]</span><br>             â”‚<br>             â–¼<br>     <span class="hljs-selector-attr">[IDistributedLock æ¥å£]</span><br>             â”‚<br>             â–¼<br>     <span class="hljs-selector-attr">[RedissonDistributedLock]</span><br>             â”‚<br>             â–¼<br>     <span class="hljs-selector-attr">[Redis å®ä¾‹]</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Redis + Lua è„šæœ¬å®ç°è®¡æ•°å™¨é™æµ</title>
    <link href="/2025/10/09/2025-10-09-69/"/>
    <url>/2025/10/09/2025-10-09-69/</url>
    
    <content type="html"><![CDATA[<h1 id="Redis-Lua-è„šæœ¬å®ç°è®¡æ•°å™¨é™æµ"><a href="#Redis-Lua-è„šæœ¬å®ç°è®¡æ•°å™¨é™æµ" class="headerlink" title="Redis + Lua è„šæœ¬å®ç°è®¡æ•°å™¨é™æµ"></a>Redis + Lua è„šæœ¬å®ç°è®¡æ•°å™¨é™æµ</h1><h2 id="é™æµ"><a href="#é™æµ" class="headerlink" title="é™æµ"></a>é™æµ</h2><p>ç³»ç»Ÿé«˜å¹¶å‘çš„ä¸‰å¤§ä¿éšœæœ‰ï¼šç¼“å­˜ã€é™çº§ã€<strong>é™æµ</strong><br>é™æµï¼šé™åˆ¶ç³»ç»Ÿæˆ–è€…æŸä¸ªæœåŠ¡åœ¨<strong>å•ä½æ—¶é—´å†…å¤„ç†è¯·æ±‚çš„æ•°é‡</strong>ï¼Œé˜²æ­¢ç³»ç»Ÿè¶…è´Ÿè·ï¼Œä¿éšœæœåŠ¡æ­£å¸¸è¿è¡Œã€‚å¸¸ç”¨ç®—æ³•æœ‰ï¼šè®¡æ•°å™¨ã€ä»¤ç‰Œæ¡¶å’Œæ¼æ¡¶ç­‰ã€‚</p><p>é™æµä¸­çš„ä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li><strong>é˜ˆå€¼</strong>ï¼šæ¯”å¦‚å°†QPSé™åˆ¶ä¸º500ï¼Œé‚£ä¹ˆè¯´æ˜æ¯ç§’å¤„ç†500ä¸ªè¯·æ±‚ï¼Œé€šè¿‡è®¾ç½®é˜ˆå€¼ï¼Œæ§åˆ¶ç³»ç»Ÿè´Ÿè½½ï¼Œè¾¾åˆ°é˜²æ­¢è¶…è´Ÿè·çš„ç›®çš„ã€‚</li><li><strong>æ‹’ç»ç­–ç•¥</strong>ï¼šé‚£ä¹ˆè¢«é˜ˆå€¼æ‹’ä¹‹é—¨å¤–çš„è¯·æ±‚åº”è¯¥ä½œä½•å¤„ç†å‘¢ï¼Ÿæ‹’ç»ç­–ç•¥æä¾›äº†æ–¹æ¡ˆï¼Œå¸¸è§çš„æœ‰ï¼š<ul><li><strong>ç›´æ¥æ‹’ç»</strong>ï¼šç›´æ¥æ‹’ç»è¶…è¿‡é˜ˆå€¼çš„è¯·æ±‚ï¼Œä¸äºˆå¤„ç†ã€‚</li><li><strong>æ’é˜Ÿç­‰å¾…</strong>ï¼šå°†è¶…è¿‡é˜ˆå€¼çš„è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ï¼Œç­‰å€™å¤„ç†ã€‚<br>ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹é€‰æ‹©åˆé€‚çš„æ‹’ç»ç­–ç•¥èƒ½å¤Ÿæé«˜ç”¨æˆ·çš„ä½“éªŒã€‚</li></ul></li></ul><p>ç›®å‰æ¯”è¾ƒä¸»æµçš„ä¸¤ä¸ªé™æµæ–¹æ¡ˆ</p><ul><li>ç½‘å…³å±‚ï¼šé™æµåœ¨æ‰€æœ‰åº”ç”¨çš„å…¥å£å¤„ã€‚</li><li>ä¸­é—´ä»¶é™æµï¼šé™æµä¿¡æ¯å­˜å‚¨åœ¨ä¸­é—´ä»¶ï¼ˆå¦‚Redisï¼‰ä¸­ï¼Œæ¯ä¸ªç»„ä»¶å¯ä»¥ä»æ­¤è·å¾—äº‹å®çš„é™æµä¿¡æ¯ï¼Œæ¥å†³å®šæ“ä½œã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è®¡æ•°å™¨é™æµç¤ºæ„</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Limiter</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">limit</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">timeWindow</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> time;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">reqCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);<br>       <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Limiter</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-built_in">this</span>.time = System.currentTimeMillis();<br>    &#125;<br>    <span class="hljs-comment">// æ¯æ¬¡è¯·æ±‚å‰ä½¿ç”¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">limit</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-keyword">if</span>(now &lt; time + timeWindow)&#123;<br>            reqCount.addAndGet(<span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">return</span> reqCount.get() &lt; limit;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">// è¶…å‡ºæ—¶é—´çª—å£ï¼Œé‡æ–°è®¡æ•°</span><br>            time = now;<br>            reqCount = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯Luaè„šæœ¬ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Luaè„šæœ¬ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Luaè„šæœ¬ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Luaè„šæœ¬ï¼Ÿ</h2><p>ä¸€ç§è½»é‡çº§ã€åµŒå…¥å¼è„šæœ¬è¯­è¨€ï¼Œå¸¸ç”¨æ¸¸æˆå¼€å‘ã€è„šæœ¬ç¼–ç¨‹å’ŒåµŒå…¥å¼ç³»ç»Ÿä¸­ã€‚Redisä»2.6å¼€å§‹æ”¯æŒLuaè„šæœ¬ï¼Œå¯ä»¥é€šè¿‡ EVAL å‘½ä»¤æ‰§è¡ŒLuaè„šæœ¬ï¼Œå®ç°åŸå­æ“ä½œï¼Œé¿å…å¤æ‚çš„å¤šæ­¥æ“ä½œã€‚<br>Luaè„šæœ¬ç±»ä¼¼äºMySQLçš„äº‹åŠ¡ï¼Œå­˜å‚¨ä¸€ç»„æŒ‡ä»¤ï¼Œè¿™äº›æŒ‡ä»¤è¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œå…·æœ‰<strong>åŸå­æ€§</strong>ï¼Œåœ¨å¼€å‘ä¸­ä½¿ç”¨ Lua è„šæœ¬ï¼Œå¯ä»¥å°†å…¶çœ‹ä½œæ˜¯ä¸€æ®µ<strong>å…·æœ‰ä¸šåŠ¡é€»è¾‘çš„ä»£ç å—</strong>ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ç”¨åˆ°åŸå­æ€§çš„ä¸€ç»„æ“ä½œï¼Œå¿…ç„¶æ˜¯ä¸šåŠ¡éœ€æ±‚ã€‚</p><p>Luaè„šæœ¬åœ¨Redisä¸­çš„å¥½å¤„ï¼š</p><ul><li><strong>åŸå­æ€§æ“ä½œ</strong></li><li><strong>å‡å°‘ç½‘ç»œå¼€é”€</strong>ï¼šä¸€æ¬¡æ€§ç»„è£…å¤šæ¡å‘½ä»¤ï¼Œå‡å°‘Redisé€šä¿¡å¼€é”€</li><li><strong>ä¾¿åˆ©å¤æ‚æ“</strong>ï¼šä½œå®ç°å¤æ‚æ“ä½œï¼ŒåŸæœ¬Rediså‘½ä»¤æ‰§è¡Œå¯èƒ½å¾ˆç¹ç</li></ul><p>å¸¸è§ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li><strong>åˆ†å¸ƒå¼é”</strong>ï¼šRedisson åˆ†å¸ƒå¼é”åº•å±‚å°±åŒ…æ‹¬Luaè„šæœ¬</li><li><strong>è®¡æ•°å™¨é™æµ</strong>ï¼šLuaè„šæœ¬å®ç°ç²¾ç¡®è®¡æ•°å™¨é™æµï¼Œé¿å…å¹¶å‘é—®é¢˜</li><li><strong>å¤æ‚äº‹åŠ¡</strong>ï¼šLuaè„šæœ¬å¤„ç†å¤šæ­¥äº‹åŠ¡ï¼Œä¿éšœæ“ä½œå®Œæ•´æ€§ã€‚</li></ul><h2 id="é¡¹ç›®åº”ç”¨"><a href="#é¡¹ç›®åº”ç”¨" class="headerlink" title="é¡¹ç›®åº”ç”¨"></a>é¡¹ç›®åº”ç”¨</h2><p>åœ¨é¡¹ç›®ä¸­åº”ç”¨<strong>Redis+Lua</strong>è„šæœ¬å®ç°è®¡æ•°å™¨é™æµï¼Œé¿å…é¢‘ç¹ç­‰é‡å¤æˆ–è€…æ¶æ„çš„æäº¤ï¼Œå‡å°‘ç³»ç»Ÿçš„å¼‚å¸¸å‹åŠ›ã€‚æˆ‘ä»¬ä¸ä»…å®ç°é™æµï¼Œè¿˜åº”ç”¨<strong>è‡ªå®šä¹‰æ³¨è§£</strong> + <strong>åˆ‡é¢</strong>ï¼Œå®ç°çµæ´»çš„é™æµã€‚</p><h3 id="Lua-è„šæœ¬é…ç½®"><a href="#Lua-è„šæœ¬é…ç½®" class="headerlink" title="Lua è„šæœ¬é…ç½®"></a>Lua è„šæœ¬é…ç½®</h3><p>é¦–å…ˆå°†è„šæœ¬é…ç½®æ³¨å…¥</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisRateLimiterConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">DefaultRedisScript</span>&lt;<span class="hljs-type">Long</span>&gt; limitScript() &#123;<br>        <span class="hljs-type">DefaultRedisScript</span>&lt;<span class="hljs-type">Long</span>&gt; redisScript <span class="hljs-operator">=</span> new <span class="hljs-type">DefaultRedisScript</span>&lt;&gt;();<br>        redisScript.setScriptText(limitScriptText());<br>        redisScript.setResultType(<span class="hljs-type">Long</span>.class);<br>        <span class="hljs-keyword">return</span> redisScript;<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é™æµLuaè„šæœ¬ï¼ˆåŸºäºè®¡æ•°å™¨ç®—æ³•ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> limitScriptText() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;local key = KEYS[1]<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;local count = tonumber(ARGV[1])<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;local time = tonumber(ARGV[2])<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;local current = redis.call(&#x27;get&#x27;, key)<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;if current and tonumber(current) &gt; count then<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;    return tonumber(current)<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;end<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;current = redis.call(&#x27;incr&#x27;, key)<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;if tonumber(current) == 1 then<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;    redis.call(&#x27;expire&#x27;, key, time)<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;end<span class="hljs-subst">\n</span>&quot;</span> <span class="hljs-operator">+</span><br>                <span class="hljs-string">&quot;return tonumber(current)&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Lua è„šæœ¬æµç¨‹ï¼š</p><ol><li>è¯»å–keyè®¡æ•°</li><li>å¦‚æœkeyå­˜åœ¨ï¼Œä¸”å€¼è¶…è¿‡é™åˆ¶ï¼Œè¿”å›è®¡æ•°ï¼Œä»£è¡¨è¶…å‡ºé˜ˆå€¼</li><li>è®¡æ•°+1ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè®¡æ•°ä¼šè¢«è®¾ç½®ä¸º1</li><li>å¦‚æœè®¡æ•°&#x3D;&#x3D;1ï¼Œæ„å‘³ç€æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´</li><li>è¿”å›è®¡æ•°</li></ol><h3 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs csharp">@Target(ElementType.METHOD) <span class="hljs-comment">// è¡¨ç¤ºåªèƒ½ç”¨äºæ–¹æ³•</span><br>@Retention(RetentionPolicy.RUNTIME) <span class="hljs-comment">// è¡¨ç¤ºè¿è¡Œæ—¶å­˜æ´»ï¼Œå¯è¢«åå°„è·å–</span><br>@Documented<br><span class="hljs-keyword">public</span> @interface RateLimiter &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é™æµkeyï¼ˆå‰ç¼€ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">String <span class="hljs-title">key</span>() <span class="hljs-literal">default</span> &quot;RATE_LIMIT:&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é™æµæ—¶é—´çª—å£ï¼Œå•ä½ç§’</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">time</span>() <span class="hljs-literal">default</span> 60</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é™æµæ¬¡æ•°</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">count</span>() <span class="hljs-literal">default</span> 100</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é™æµç±»å‹ï¼ˆé»˜è®¤/æŒ‰IPï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">LimitType <span class="hljs-title">limitType</span>() <span class="hljs-literal">default</span> LimitType.DEFAULT</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åˆ‡é¢"><a href="#åˆ‡é¢" class="headerlink" title="åˆ‡é¢"></a>åˆ‡é¢</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">private RedisTemplate&lt;<span class="hljs-keyword">Object</span>, <span class="hljs-keyword">Object</span>&gt; redisTemplate;<br>    private RedisScript&lt;Long&gt; limitScript;<br><br>    @Autowired<br>    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> setRedisTemplate(RedisTemplate&lt;<span class="hljs-keyword">Object</span>, <span class="hljs-keyword">Object</span>&gt; redisTemplate) &#123;<br>        this.redisTemplate = redisTemplate;<br>    &#125;<br><br>    @Autowired<br>    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> setLimitScript(RedisScript&lt;Long&gt; limitScript) &#123;<br>        this.limitScript = limitScript;<br>    &#125;<br><br>    @<span class="hljs-keyword">Before</span>(&quot;@annotation(rateLimiter)&quot;)<br>    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> doBefore(JoinPoint <span class="hljs-type">point</span>, RateLimiter rateLimiter) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-type">time</span> = rateLimiter.time();<br>        <span class="hljs-type">int</span> count = rateLimiter.count();<br>        String key = buildKey(rateLimiter, <span class="hljs-type">point</span>);<br><br>        List&lt;<span class="hljs-keyword">Object</span>&gt; keys = Collections.singletonList(key);<br>        Long <span class="hljs-keyword">current</span> = redisTemplate.<span class="hljs-keyword">execute</span>(limitScript, keys, count, <span class="hljs-type">time</span>);<br><br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">current</span> == <span class="hljs-keyword">null</span> || <span class="hljs-keyword">current</span>.intValue() &gt; count) &#123;<br>            throw <span class="hljs-built_in">new</span> ServiceException(&quot;è®¿é—®è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨å€™å†è¯•&quot;);<br>        &#125;<br>        <span class="hljs-keyword">log</span>.<span class="hljs-keyword">info</span>(&quot;ğŸ”’ é™æµï¼škey=&#123;&#125;, å½“å‰è¯·æ±‚æ¬¡æ•°=&#123;&#125;, é™åˆ¶æ¬¡æ•°=&#123;&#125;&quot;, key, <span class="hljs-keyword">current</span>, count);<br>    &#125;<br><br>    private String buildKey(RateLimiter rateLimiter, JoinPoint <span class="hljs-type">point</span>) &#123;<br>        StringBuilder sb = <span class="hljs-built_in">new</span> StringBuilder(rateLimiter.key());<br>        <span class="hljs-keyword">if</span> (rateLimiter.limitType() == LimitType.IP) &#123;<br>            sb.append(IpUtils.getIpAddr(ServletUtils.getRequest())).append(&quot;:&quot;);<br>        &#125;<br>        MethodSignature signature = (MethodSignature) <span class="hljs-type">point</span>.getSignature();<br>        <span class="hljs-keyword">Method</span> <span class="hljs-keyword">method</span> = signature.getMethod();<br>        sb.append(<span class="hljs-keyword">method</span>.getDeclaringClass().getName()).append(&quot;.&quot;).append(<span class="hljs-keyword">method</span>.getName());<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br></code></pre></td></tr></table></figure><p>å®šä¹‰åˆ‡é¢ï¼Œæ‰§è¡Œå¸¦æœ‰@RateLimiteræ³¨è§£çš„æ–¹æ³•ä¹‹å‰ï¼Œä¼šå…ˆæ‰§è¡Œ doBeforeï¼ŒdoBeforeå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„é™æµé€»è¾‘ï¼š</p><ol><li>ä»æ³¨è§£ratelimiterç±»è·å–é™æµé…ç½®ä¿¡æ¯ï¼ˆåº•å±‚æ˜¯åå°„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<strong>æ³¨è§£å‘¨æœŸè¦è®¾ç½®æˆè¿è¡Œæ—¶</strong>ï¼‰</li><li>æ„é€ keyï¼Œè¿™é‡ŒåŠ å…¥IPæ¥æ„é€ ï¼Œå¹¶ä¸”é€šè¿‡<strong>åå°„</strong>è·å–æ–¹æ³•çš„æ‰€åœ¨ç±»å’Œæ–¹æ³•åï¼Œç»“åˆæ„é€ ï¼Œæœ€ç»ˆæ˜¯RATE_LIMIT:IP:com.example.test.login è¿™ç§å½¢å¼ï¼Œä»¥è¾¾åˆ°é™åˆ¶åŒä¸€IPè¯·æ±‚åŒä¸€æ–¹æ³•é¢‘ç‡çš„ç›®çš„ã€‚</li><li>æ‰§è¡ŒLuaè„šæœ¬é™æµé€»è¾‘ï¼Œå¦‚æœè¶…å‡ºé™åˆ¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li></ol><p>å¦‚ä½•åˆ†ææ”¹è¿›ç­–ç•¥ï¼Ÿ</p><ul><li>æŸæ¥å£é™æµæ¬¡æ•°å¾ˆå¤šï¼ˆä¾‹å¦‚ &#x2F;login è¢«æ‹’ç»ä¸Šåƒæ¬¡ï¼‰<br>è¯´æ˜é™é¢å¤ªä½æˆ–æµé‡é«˜å³°æ˜æ˜¾<br>æé«˜ count æˆ–ç¼©çŸ­ time</li><li>æŸäº› IP é¢‘ç¹è¢«é™æµ<br>è¯´æ˜æœ‰åˆ·æ¥å£é£é™©<br>å¯¹è¯¥ IP å•ç‹¬è®¾æ›´ä½é™é¢æˆ–æ‹‰é»‘</li><li>æŸæ—¶æ®µï¼ˆæ¯”å¦‚ 9:00-9:30ï¼‰é™æµé›†ä¸­<br>è¯´æ˜ç³»ç»Ÿé«˜å³°æœŸ<br>è°ƒæ•´é™æµçª—å£ã€å¼•å…¥â€œåˆ†æ—¶æ®µåŠ¨æ€é™æµâ€</li><li>é™æµæ¥å£éƒ½æ˜¯ä½ä»·å€¼æ¥å£ï¼ˆå¦‚ &#x2F;pingï¼‰<br>è¯´æ˜èµ„æºæµªè´¹<br>å¯ä»¥æ”¾å®½æˆ–å–æ¶ˆé™æµ</li><li>é™æµå¯¼è‡´ä¸»ä¸šåŠ¡æ¥å£å¤§é‡è¢«æ‹’ç»<br>è¯´æ˜ç­–ç•¥å¤ªæ¿€è¿›<br>è°ƒæ•´å…¨å±€é™é¢æˆ–ä½¿ç”¨ä»¤ç‰Œæ¡¶å¹³æ»‘é™æµ</li></ul>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è‡ªå·±å¼€å‘çš„åŠ¨æ€çº¿ç¨‹æ± ç»„ä»¶å¯¹æ¥é¡¹ç›®</title>
    <link href="/2025/04/10/2025-04-10-64/"/>
    <url>/2025/04/10/2025-04-10-64/</url>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mvn clean install<br></code></pre></td></tr></table></figure><p>æ‰“åŒ…å¥½çš„åŠ¨æ€çº¿ç¨‹æ± åœ¨æœ¬åœ°mavenä»“åº“ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥åœ¨éœ€è¦å¼•å…¥çš„é¡¹ç›®çš„<code>pom</code>æ–‡ä»¶é‡Œå¯¼å…¥åŠ¨æ€çº¿ç¨‹æ± ç»„ä»¶ã€‚</p><p>è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒåŠ¨æ€çº¿ç¨‹æ± ä½¿ç”¨äº† Redissonclientï¼Œå¯¹æ¥é¡¹ç›®ä¸­ä¹Ÿä½¿ç”¨äº† Redissonclientï¼Œåˆšå¼€å§‹è¿è¡Œçš„æ—¶å€™ä¼šå‘ç”Ÿç³»ç»Ÿä¸çŸ¥é“æ³¨å…¥å“ªä¸ª bean çš„å†²çªï¼Œéœ€è¦è§£å†³å†²çªã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æŒ‡å®šå…¶ä¸­ä¸€ä¸ªRedissonclient bean <code>@Primary</code>ï¼Œæˆ–è€…æ˜¯åœ¨æ‰€æœ‰éœ€è¦æ³¨å…¥ Redissonclient çš„åœ°æ–¹ï¼ˆåœ¨<code>@Resource</code>ä¸‹é¢ï¼‰åŠ ä¸Š<code>@Qualifier(beanåç§°)</code><br><img src="https://images/typecho//2025/04/2715596355.png" alt="2025-04-10T14:52:42.png"><br><img src="https://images/typecho//2025/04/3897093518.png" alt="2025-04-10T14:52:47.png"></p><p>è¿è¡Œç¨‹åºï¼Œæ¥ç€åœ¨åŠ¨æ€çº¿ç¨‹æ± ç®¡ç†é¡µé¢å°±å¯ä»¥åŠ¨æ€ç›‘æ§ã€ç®¡ç†äº†ã€‚<br><img src="https://images/typecho//2025/04/3220638611.png" alt="2025-04-10T14:52:58.png"></p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Typora æ— é™è¯•ç”¨æ¢ç´¢ï¼šé€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ—¥æœŸå®ç° &amp;quot;ç»­æ¯&amp;quot;</title>
    <link href="/2025/04/07/2025-04-07-57/"/>
    <url>/2025/04/07/2025-04-07-57/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ï¼Œä¸å»ºè®®ç»•è¿‡ Typora çš„æ­£ç‰ˆæˆæƒæœºåˆ¶ã€‚è¯·åˆç†ä½¿ç”¨ï¼Œæ”¯æŒä¼˜ç§€çš„è½¯ä»¶å¼€å‘è€…ï¼</p></blockquote><hr><h2 id="ä¸€ã€é¡¹ç›®èƒŒæ™¯"><a href="#ä¸€ã€é¡¹ç›®èƒŒæ™¯" class="headerlink" title="ä¸€ã€é¡¹ç›®èƒŒæ™¯"></a>ä¸€ã€é¡¹ç›®èƒŒæ™¯</h2><p><a href="https://typora.io/">Typora</a> æ˜¯ä¸€æ¬¾æè‡´ä¼˜é›…çš„ Markdown æ–‡æ¡£ç¼–è¾‘å™¨ï¼Œå¹¶æä¾›æ‰‹å†™æ ·å°ä½“é«˜åº¦è¾¾æˆçš„æ‰‹å†™ç»„ç»‡ä½“éªŒã€‚</p><p>Typora åŸæœ¬æ˜¯å…è´¹è½¯ä»¶ï¼Œä½†åœ¨è¿›å…¥æ­£å¼å‘å¸ƒç‰ˆæœ¬åï¼Œå·²æ”¹ä¸ºä»˜è´¹è½¯ä»¶ï¼Œæ— è®ºæ˜¯ Windows è¿˜æ˜¯ macOSï¼Œéƒ½æœ‰è¯•ç”¨æ—¶é—´é™åˆ¶ã€‚</p><h2 id="åœ¨è¯•ç”¨æœŸç»“æŸåï¼ŒTypora-éœ€è¦æ­£ç‰ˆæˆæƒæ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰æ²¡æœ‰å¯èƒ½é€šè¿‡ä¿ç•™è¯•ç”¨çŠ¶æ€ï¼Œå®ç°åŒæ ·æ•ˆæœçš„æ–¹æ³•å‘¢ï¼Ÿ"><a href="#åœ¨è¯•ç”¨æœŸç»“æŸåï¼ŒTypora-éœ€è¦æ­£ç‰ˆæˆæƒæ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰æ²¡æœ‰å¯èƒ½é€šè¿‡ä¿ç•™è¯•ç”¨çŠ¶æ€ï¼Œå®ç°åŒæ ·æ•ˆæœçš„æ–¹æ³•å‘¢ï¼Ÿ" class="headerlink" title="åœ¨è¯•ç”¨æœŸç»“æŸåï¼ŒTypora éœ€è¦æ­£ç‰ˆæˆæƒæ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰æ²¡æœ‰å¯èƒ½é€šè¿‡ä¿ç•™è¯•ç”¨çŠ¶æ€ï¼Œå®ç°åŒæ ·æ•ˆæœçš„æ–¹æ³•å‘¢ï¼Ÿ"></a>åœ¨è¯•ç”¨æœŸç»“æŸåï¼ŒTypora éœ€è¦æ­£ç‰ˆæˆæƒæ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰æ²¡æœ‰å¯èƒ½é€šè¿‡ä¿ç•™è¯•ç”¨çŠ¶æ€ï¼Œå®ç°åŒæ ·æ•ˆæœçš„æ–¹æ³•å‘¢ï¼Ÿ<br><img src="https://images/typecho//2025/04/3991686178.png" alt="2025-04-07T14:07:58.png"></h2><h2 id="äºŒã€Typora-é…ç½®æ–‡ä»¶åˆ†æ"><a href="#äºŒã€Typora-é…ç½®æ–‡ä»¶åˆ†æ" class="headerlink" title="äºŒã€Typora é…ç½®æ–‡ä»¶åˆ†æ"></a>äºŒã€Typora é…ç½®æ–‡ä»¶åˆ†æ</h2><p>Typora åœ¨ Windows ä¸Šä¼šæŠŠç”¨æˆ·é…ç½®å­˜å‚¨åœ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">%APPDATA%\Typora\profile.data<br></code></pre></td></tr></table></figure><p>è¯¥æ–‡ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªè¢« UTF-8 ç¼–ç åå†è½¬æ¢ä¸º 16 è¿›åˆ¶çš„ JSON æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è½¬ä¸º JSONï¼Œåˆ†æå…¶ä¸­åŒ…å«å¦‚ä¸‹æ ·çš„æ—¥æœŸå­—æ®µï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;_iD&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3/18/2025&quot;</span><br></code></pre></td></tr></table></figure><p>éå¸¸æ˜æ˜¾ï¼Œè¿™æ˜¯ç”¨äºè®°å½•è¯•ç”¨å¼€å§‹æ—¶é—´çš„å­—æ®µã€‚è€Œ Typora åŒæ­¥ä¸Šä¸‹æ²¡æœ‰ä¸æœåŠ¡å™¨æ ¡éªŒï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹è¿™ä¸ªæ—¥æœŸï¼Œå°±æœ‰å¯èƒ½é‡æ–°å¯åŠ¨è¯•ç”¨ã€‚</p><hr><h2 id="ä¸‰ã€Python-è„šæœ¬å®ç°â€œæ—¥æœŸé‡ç½®è¯•ç”¨â€"><a href="#ä¸‰ã€Python-è„šæœ¬å®ç°â€œæ—¥æœŸé‡ç½®è¯•ç”¨â€" class="headerlink" title="ä¸‰ã€Python è„šæœ¬å®ç°â€œæ—¥æœŸé‡ç½®è¯•ç”¨â€"></a>ä¸‰ã€Python è„šæœ¬å®ç°â€œæ—¥æœŸé‡ç½®è¯•ç”¨â€</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hex_to_json</span>(<span class="hljs-params">hex_str</span>):<br>    <span class="hljs-keyword">return</span> json.loads(<span class="hljs-built_in">bytes</span>.fromhex(hex_str).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">json_to_hex</span>(<span class="hljs-params">data</span>):<br>    json_str = json.dumps(data, separators=(<span class="hljs-string">&#x27;,&#x27;</span>, <span class="hljs-string">&#x27;:&#x27;</span>))<br>    <span class="hljs-keyword">return</span> json_str.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>).<span class="hljs-built_in">hex</span>()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_today_date_str</span>():<br>    today = datetime.today()<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;today.month&#125;</span>/<span class="hljs-subst">&#123;today.day&#125;</span>/<span class="hljs-subst">&#123;today.year&#125;</span>&quot;</span>  <span class="hljs-comment"># M/D/YYYY</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fix_path</span>(<span class="hljs-params">path: <span class="hljs-built_in">str</span></span>):<br>    <span class="hljs-keyword">return</span> path.replace(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;\\\\&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    file_path = os.path.expandvars(<span class="hljs-string">r&quot;%APPDATA%\\Typora\\profile.data&quot;</span>)<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(file_path):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\u6587\u4ef6\u4e0d\u5b58\u5728\uff1a<span class="hljs-subst">&#123;file_path&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        hex_input = f.read().strip()<br><br>    <span class="hljs-keyword">try</span>:<br>        data = hex_to_json(hex_input)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\u89e3\u6790\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4\u6587\u4ef6\u5185\u5bb9\u662f hex \u7f16\u7801\u7684 JSON\u3002&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\u9519\u8bef\u4fe1\u606f\uff1a&quot;</span>, e)<br>        <span class="hljs-keyword">return</span><br><br>    today_str = get_today_date_str()<br>    data[<span class="hljs-string">&quot;_iD&quot;</span>] = today_str<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\u5df2\u5c06 _iD \u66f4\u65b0\u4e3a\uff1a<span class="hljs-subst">&#123;today_str&#125;</span>&quot;</span>)<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;pinFolder&quot;</span> <span class="hljs-keyword">in</span> data:<br>        data[<span class="hljs-string">&quot;pinFolder&quot;</span>] = fix_path(data[<span class="hljs-string">&quot;pinFolder&quot;</span>])<br><br>    modified_hex = json_to_hex(data)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&quot;w&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        f.write(modified_hex)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\u4fee\u6539\u6210\u529f \u2705&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\u65b0\u5185\u5bb9\u5199\u5165\uff1a<span class="hljs-subst">&#123;file_path&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><hr><h2 id="å››ã€å®éªŒæ•ˆæœ"><a href="#å››ã€å®éªŒæ•ˆæœ" class="headerlink" title="å››ã€å®éªŒæ•ˆæœ"></a>å››ã€å®éªŒæ•ˆæœ</h2><ul><li>æ¯æ¬¡è¿è¡Œè„šæœ¬åï¼ŒTypora é‡å¯åä¼šé‡æ–°è¿›å…¥è¯•ç”¨çŠ¶æ€</li><li>æ¯æ—¥æ›´æ–°ä¸€æ¬¡å³å¯â€œç»­æ¯â€</li></ul><hr><h2 id="äº”ã€ç»“è®º-æç¤º"><a href="#äº”ã€ç»“è®º-æç¤º" class="headerlink" title="äº”ã€ç»“è®º &amp; æç¤º"></a>äº”ã€ç»“è®º &amp; æç¤º</h2><ul><li><p>å®ç°ç®€å•ã€‚Typora è¯•ç”¨çŠ¶æ€å­˜å‚¨äºæœ¬åœ°ï¼Œæ— æœåŠ¡å™¨æ ¡éªŒ</p></li><li><p>æ— éœ€çº¯åˆ é™¤æ–‡ä»¶ï¼Œåªä¿®æ”¹æ—¥æœŸå³å¯<br>-<u> <strong>æ”¯æŒå¼€æºä¼˜ç§€è½¯ä»¶</strong>ï¼ŒTypora å€¼å¾—è´­ä¹°</u></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ Moshï¼šä¼˜åŒ–é«˜å»¶è¿Ÿç½‘ç»œä¸‹çš„ SSH è¿æ¥ä½“éªŒ</title>
    <link href="/2025/04/06/2025-04-06-54/"/>
    <url>/2025/04/06/2025-04-06-54/</url>
    
    <content type="html"><![CDATA[<h2 id="é«˜å»¶è¿Ÿç½‘ç»œä¸‹ç³Ÿç³•çš„-SSH-ä½“éªŒ"><a href="#é«˜å»¶è¿Ÿç½‘ç»œä¸‹ç³Ÿç³•çš„-SSH-ä½“éªŒ" class="headerlink" title="é«˜å»¶è¿Ÿç½‘ç»œä¸‹ç³Ÿç³•çš„ SSH ä½“éªŒ"></a>é«˜å»¶è¿Ÿç½‘ç»œä¸‹ç³Ÿç³•çš„ SSH ä½“éªŒ</h2><p>æœ€è¿‘è´­å…¥äº†ä¸€å° <strong>ä¼¦æ•¦</strong> çš„æœåŠ¡å™¨ï¼Œä¼˜ç‚¹æ˜¯ä¾¿å®œé‡å¤§ã€ç›¸å¯¹ç¨³å®šä¸ä¸¢åŒ…ï¼Œç¼ºç‚¹æ˜¯<strong>å»¶è¿Ÿç¨³å®šçš„é«˜</strong>ï¼Œä»¥è‡³äºåœ¨ SSH è¿æ¥ä½¿ç”¨æœåŠ¡å™¨æ—¶ï¼Œ<u><strong>é”®ç›˜è¾“å…¥å»¶è¿Ÿä¸¥é‡ï¼Œä¸æ¯«ä¸è·Ÿæ‰‹</strong></u>ï¼Œä½“éªŒç³Ÿç³•ã€‚<br>äºæ˜¯åœ¨ç½‘ä¸Šæœç´¢è§£å†³æ–¹æ¡ˆğŸ”ï¼Œå‘ç°äº†ä¸€æ¬¾å®è—å¼•ç”¨ <code>Mosh</code>ã€‚<br><img src="https://images/typecho//2025/04/1033170522.png" alt="2025-04-06T09:53:57.png"></p><h2 id="Mosh"><a href="#Mosh" class="headerlink" title="Mosh"></a>Mosh</h2><p>åœ¨ç½‘ç»œå»¶è¿Ÿè¾ƒé«˜æˆ–ç»å¸¸æ–­çº¿çš„ç¯å¢ƒä¸­ï¼Œä¼ ç»Ÿ SSH ä¼šè¯ï¼ˆå¦‚ Termiusã€OpenSSHï¼‰å¸¸å¸¸å‡ºç°å¡é¡¿ã€æ‰çº¿ã€ç²˜è´´å»¶è¿Ÿç­‰é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæ¨èä½¿ç”¨ Moshï¼ˆMobile Shellï¼‰ æ¥æ›¿ä»£ä¼ ç»Ÿ SSHã€‚</p><blockquote><p><strong>å…³äº Moshï¼ˆMobile Shellï¼‰</strong></p><p>Mosh æ˜¯ä¸€ç§æ¯” SSH æ›´é€‚åˆè¿œç¨‹è¿æ¥çš„ç»ˆç«¯å·¥å…·ï¼Œå°¤å…¶é€‚ç”¨äºé«˜å»¶è¿Ÿã€ä¸ç¨³å®šç½‘ç»œç¯å¢ƒã€‚å®ƒæ”¯æŒæ–­ç½‘é‡è¿ã€IP å˜æ›´ä¸ä¸­æ–­è¿æ¥ï¼Œå¹¶æä¾›æ›´æµç•…çš„æ‰“å­—ä½“éªŒã€‚</p><p>ç›¸è¾ƒäºä¼ ç»Ÿ SSHï¼ŒMosh ä½¿ç”¨ UDP åè®®ï¼Œé€šè¿‡æœ¬åœ°é¢„å›æ˜¾æœºåˆ¶è®©è¾“å…¥å“åº”å‡ ä¹æ— å»¶è¿Ÿã€‚</p><p>å®˜ç½‘ï¼š<a href="https://mosh.org/">https://mosh.org/</a></p><p>å®‰è£…æ–¹æ³•ï¼ˆUbuntuï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install mosh<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mosh username@server --ssh=<span class="hljs-string">&#x27;ssh -p 2222&#x27;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šéœ€è¦å¼€æ”¾ UDP 60000-61000 ç«¯å£ï¼ŒæœåŠ¡ç«¯ä¹Ÿéœ€å®‰è£… moshã€‚</p></blockquote><p>âœ… Mosh çš„ä¼˜åŠ¿</p><ul><li><p>å®¹é”™å¼ºï¼šè¿æ¥ä¸­æ–­åè‡ªåŠ¨é‡è¿ï¼ˆå³ä½¿ä½ æ¢äº† IPï¼‰</p></li><li><p>ä½å»¶è¿Ÿå“åº”ï¼šæœ¬åœ°é¢„è¾“å…¥å›æ˜¾ï¼Œæ‰“å­—ä¸å¡é¡¿</p></li><li><p>é€‚åˆä¸ç¨³å®šç½‘ç»œï¼šå¦‚ç§»åŠ¨ç½‘ç»œã€æµ·å¤–è·³æ¿æœºã€4G æœåŠ¡å™¨åœºæ™¯</p></li></ul><h2 id="Termius-ä¸­çš„æ–¹ä¾¿ä½¿ç”¨"><a href="#Termius-ä¸­çš„æ–¹ä¾¿ä½¿ç”¨" class="headerlink" title="Termius ä¸­çš„æ–¹ä¾¿ä½¿ç”¨"></a>Termius ä¸­çš„æ–¹ä¾¿ä½¿ç”¨</h2><p><code>Termius</code> æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ SSH å®¢æˆ·ç«¯ï¼Œæ”¯æŒå¼€å¯ <code>Mosh</code> ä¼˜åŒ–é«˜å»¶çš„æœåŠ¡å™¨è¿æ¥ã€‚<br>å¼€å¯æ–¹æ³•ï¼š<br>    1. ç¼–è¾‘æœåŠ¡å™¨è®¾ç½®ã€‚<br>    2. åœ¨é…ç½®çš„æœ€ä¸‹æ–¹æ‰¾åˆ° Mosh è®¾ç½®ï¼Œé€‰æ‹© <code>Enable</code> æ‰“å¼€å³å¯ã€‚<br>    3. ç‚¹å‡» <code>Connect</code> è¿æ¥ï¼Œåç»­çš„è¿æ¥å°†é€šè¿‡ Mosh å®ç°ã€‚<br><img src="https://images/typecho//2025/04/3150756892.png" alt="2025-04-06T09:50:06.png"></p><p>å®æµ‹åœ¨é«˜å»¶è¿Ÿçš„<strong>ä¼¦æ•¦</strong>æœåŠ¡å™¨è¿æ¥ä¸­ï¼Œä¹Ÿèƒ½å¤Ÿ<u><strong>å®ç°è‰¯å¥½çš„é”®ç›˜è¾“å…¥è·Ÿæ‰‹ä½“éªŒ</strong></u>ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è®°ä¸€æ¬¡SSHçˆ†ç ´æ’æŸ¥ä»¥åŠè§£å†³æ–¹æ¡ˆ</title>
    <link href="/2025/04/06/2025-04-06-50/"/>
    <url>/2025/04/06/2025-04-06-50/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜å‘ç°"><a href="#é—®é¢˜å‘ç°" class="headerlink" title="é—®é¢˜å‘ç°"></a>é—®é¢˜å‘ç°</h2><p>æœ€è¿‘åœ¨ä½¿ç”¨æœåŠ¡å™¨çš„æ—¶å€™ä¹Ÿäº†è§£åˆ°ä¸€äº›ç›¸å…³äº‘æœåŠ¡å™¨å®‰å…¨é—®é¢˜ï¼Œäºæ˜¯è¿›è¡Œäº†æ’æŸ¥ï¼Œå‘ç°äº†ç–‘ä¼¼ <code>SSH çˆ†ç ´</code>çš„æ”»å‡»ï¼Œä¾¿å±•å¼€æ’æŸ¥å¤„ç†ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> ss -tan state established<br></code></pre></td></tr></table></figure><p>![2025-04-06T09:21:55.png][1]<br>å‘ç°ç–‘ä¼¼çˆ†ç ´è¡Œä¸ºå­˜åœ¨ï¼Œè¿›ä¸€æ­¥æŸ¥çœ‹æ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tail</span> -f /var/log/auth.log<br></code></pre></td></tr></table></figure><p>![2025-04-06T09:24:42.png][2]<br>å‘ç°å¯ç–‘ ip åœ¨å°è¯•çˆ†ç ´ï¼Œéœ€è¦ä¸º <code>SSH</code> å¢åŠ é˜²æŠ¤æªæ–½ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>å®‰è£… <code>fail2ban</code> ã€‚</p><blockquote><p><a href="https://www.fail2ban.org/">Fail2ban</a> æ˜¯ä¸€æ¬¾è½»é‡çº§çš„æœåŠ¡å™¨å®‰å…¨å·¥å…·ï¼Œä¸“é—¨ç”¨äº<strong>æ£€æµ‹æš´åŠ›ç ´è§£è¡Œä¸ºå¹¶è‡ªåŠ¨å°ç¦æ”»å‡» IP</strong>ã€‚<br>å®ƒçš„å·¥ä½œæµç¨‹ï¼š</p></blockquote><blockquote><ol><li>å®æ—¶ç›‘æ§ç³»ç»Ÿæ—¥å¿—ï¼ˆå¦‚ <code>/var/log/auth.log</code>ï¼‰ï¼›</li><li>å‘ç°å¼‚å¸¸è¡Œä¸ºï¼ˆå¦‚ SSH ç™»å½•å¤±è´¥æ¬¡æ•°è¿‡å¤šï¼‰ï¼›</li><li>è‡ªåŠ¨é€šè¿‡ <code>iptables</code> æˆ– <code>firewalld</code> æ‹‰é»‘è¯¥ IPï¼Œä¸€èˆ¬å°ç¦æ—¶é—´ä¸º 10 åˆ†é’Ÿè‡³æ•°å°æ—¶ã€‚</li></ol></blockquote><blockquote><p>Fail2ban æ”¯æŒå¤šç§æœåŠ¡ï¼ˆå¦‚ sshdã€nginxã€vsftpdã€mysql ç­‰ï¼‰ç›‘æ§è§„åˆ™ï¼Œéå¸¸é€‚åˆéƒ¨ç½²åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šä½œä¸ºç¬¬ä¸€é“é˜²çº¿ã€‚</p></blockquote><blockquote><p>ä¼˜ç‚¹ï¼š</p><ul><li>âœ¦ å®‰è£…ç®€å•ï¼ˆ<code>apt install fail2ban -y</code>ï¼‰</li><li>âœ¦ é»˜è®¤å³å¯ç”Ÿæ•ˆ</li><li>âœ¦ æ”¯æŒé…ç½®è‡ªå®šä¹‰ç­–ç•¥ï¼ˆå°ç¦é˜ˆå€¼ã€æŒç»­æ—¶é—´ã€é‚®ä»¶é€šçŸ¥ç­‰ï¼‰</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt update<br>apt install fail2ban -y<br>systemctl <span class="hljs-built_in">enable</span> fail2ban<br>systemctl start fail2ban<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">fail2ban-cilent status sshd<br></code></pre></td></tr></table></figure><p>![2025-04-06T09:21:03.png][3]</p><p>å·²ç»è‡ªåŠ¨å°ç¦ <code>è¿è§„ip</code> ï¼Œæå‡äº† <code>SSH</code> çš„ <strong>å®‰å…¨æ€§</strong>ã€‚åœ¨åš</p><h2 id="è¿›ä¸€æ­¥çš„å®‰å…¨æ€§"><a href="#è¿›ä¸€æ­¥çš„å®‰å…¨æ€§" class="headerlink" title="è¿›ä¸€æ­¥çš„å®‰å…¨æ€§"></a>è¿›ä¸€æ­¥çš„å®‰å…¨æ€§</h2><p>æ­¤å¤–ï¼Œå¦‚æœè¿˜è¦è¿›ä¸€æ­¥æå‡ <code>SSH</code> çš„å®‰å…¨æ€§ï¼Œæœ‰å¦‚ä¸‹æªæ–½ï¼š</p><ul><li>ç¦æ­¢ <code>root</code> ç”¨æˆ·ç™»å½•ã€‚</li><li>ç¦æ­¢ <code>å¯†ç </code> ç™»å½•ï¼Œé€šè¿‡ <code>å¯†é’¥</code> ç™»å½•ã€‚</li><li>ä¿®æ”¹é»˜è®¤ SSH <code>ç«¯å£</code>ã€‚</li><li>å¦‚æœæ˜¯ <code>å›ºå®š IP</code> ç™»å½•æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥é™åˆ¶ç™»å½•æº IPã€‚</li><li>å®šæœŸ <code>æ—¥å¿—å®¡è®¡</code> ï¼Œè¯†åˆ«å¯ç–‘å°è¯•ã€‚<br>[1]: https:&#x2F;&#x2F;&#x2F;images&#x2F;typecho&#x2F;&#x2F;2025&#x2F;04&#x2F;4060019133.png<br><br>[2]: https:&#x2F;&#x2F;&#x2F;images&#x2F;typecho&#x2F;&#x2F;2025&#x2F;04&#x2F;1955318361.png<br><br>[3]: https:&#x2F;&#x2F;&#x2F;images&#x2F;typecho&#x2F;&#x2F;2025&#x2F;04&#x2F;1638401865.png</li></ul>]]></content>
    
    
    <categories>
      
      <category>ç½‘ç«™è¿ç»´</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MarkNote å¼€å‘å†ç¨‹ï¼šä»é›¶å¼€å§‹çš„æ¡Œé¢ä¾¿ç­¾åº”ç”¨å¼€å‘</title>
    <link href="/2025/04/04/2025-04-04-47/"/>
    <url>/2025/04/04/2025-04-04-47/</url>
    
    <content type="html"><![CDATA[<h2 id="é¡¹ç›®å±•ç¤º"><a href="#é¡¹ç›®å±•ç¤º" class="headerlink" title="é¡¹ç›®å±•ç¤º"></a>é¡¹ç›®å±•ç¤º</h2><p><img src="https://images/typecho//2025/04/601261715.png" alt="2025-04-03T16:46:01.png"><br><img src="https://images/typecho//2025/04/394463393.png" alt="2025-04-03T16:46:12.png"></p><h2 id="é¡¹ç›®èµ·æº"><a href="#é¡¹ç›®èµ·æº" class="headerlink" title="é¡¹ç›®èµ·æº"></a>é¡¹ç›®èµ·æº</h2><p>æ”¯æŒ Markdown è¯­æ³•çš„è½»é‡æ¡Œé¢ä¾¿ç­¾ã€‚</p><p>åœ¨å¼€å‘ MarkNote ä¹‹å‰ï¼Œæˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„æ¡Œé¢ä¾¿ç­¾åº”ç”¨ã€‚å¸‚é¢ä¸Šçš„ä¾¿ç­¾åº”ç”¨è¦ä¹ˆè¿‡äºç®€å•ï¼Œè¦ä¹ˆè¿‡äºå¤æ‚ã€‚äºæ˜¯æˆ‘å†³å®šè‡ªå·±å¼€å‘ä¸€ä¸ªæ—¢è½»é‡åˆå®ç”¨çš„ä¾¿ç­¾åº”ç”¨ã€‚</p><h2 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h2><ul><li><strong>å¼€å‘è¯­è¨€</strong>: Python</li><li><strong>GUI æ¡†æ¶</strong>: PyQt5</li><li><strong>å¼€å‘å·¥å…·</strong>: Cursor IDE</li><li><strong>æ„å»ºå·¥å…·</strong>: PyInstaller</li></ul><h2 id="å¼€å‘å†ç¨‹"><a href="#å¼€å‘å†ç¨‹" class="headerlink" title="å¼€å‘å†ç¨‹"></a>å¼€å‘å†ç¨‹</h2><h3 id="1-åŸºç¡€æ¡†æ¶æ­å»º"><a href="#1-åŸºç¡€æ¡†æ¶æ­å»º" class="headerlink" title="1. åŸºç¡€æ¡†æ¶æ­å»º"></a>1. åŸºç¡€æ¡†æ¶æ­å»º</h3><p>é¦–å…ˆåˆ›å»ºäº†åŸºæœ¬çš„ GUI æ¡†æ¶ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>ä¸»çª—å£å¸ƒå±€</li><li>ç³»ç»Ÿæ‰˜ç›˜é›†æˆ</li><li>å•ä¾‹æ¨¡å¼å®ç°</li><li>åŸºç¡€çš„æ–‡ä»¶ä¿å­˜&#x2F;åŠ è½½åŠŸèƒ½</li></ul><h3 id="2-Markdown-åŠŸèƒ½å®ç°"><a href="#2-Markdown-åŠŸèƒ½å®ç°" class="headerlink" title="2. Markdown åŠŸèƒ½å®ç°"></a>2. Markdown åŠŸèƒ½å®ç°</h3><p>è¿™æ˜¯æœ€å…·æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†ä¹‹ä¸€ï¼š</p><ul><li>ä½¿ç”¨ QWebEngineView å®ç° Markdown æ¸²æŸ“</li><li>æ·»åŠ å®æ—¶é¢„è§ˆåŠŸèƒ½</li><li>å®ç°ä»£ç é«˜äº®</li><li>ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½</li></ul><h3 id="3-å¾…åŠäº‹é¡¹åŠŸèƒ½"><a href="#3-å¾…åŠäº‹é¡¹åŠŸèƒ½" class="headerlink" title="3. å¾…åŠäº‹é¡¹åŠŸèƒ½"></a>3. å¾…åŠäº‹é¡¹åŠŸèƒ½</h3><p>æ·»åŠ äº† To-Do List åŠŸèƒ½ï¼š</p><ul><li>æ”¯æŒæ·»åŠ &#x2F;åˆ é™¤å¾…åŠäº‹é¡¹</li><li>å¤é€‰æ¡†çŠ¶æ€ç®¡ç†</li><li>æ•°æ®æŒä¹…åŒ–å­˜å‚¨</li></ul><h3 id="4-UI-UX-ä¼˜åŒ–"><a href="#4-UI-UX-ä¼˜åŒ–" class="headerlink" title="4. UI&#x2F;UX ä¼˜åŒ–"></a>4. UI&#x2F;UX ä¼˜åŒ–</h3><p>æŒç»­æ”¹è¿›ç”¨æˆ·ç•Œé¢ï¼š</p><ul><li>ä¼˜åŒ–é¡¶éƒ¨æ è®¾è®¡</li><li>æ·»åŠ å›¾æ ‡å’Œè§†è§‰åé¦ˆ</li><li>å®ç°çª—å£æ‹–æ‹½å’Œè°ƒæ•´å¤§å°</li><li>æ·»åŠ å›ºå®šä½ç½®åŠŸèƒ½</li></ul><h3 id="5-é…ç½®ç³»ç»Ÿ"><a href="#5-é…ç½®ç³»ç»Ÿ" class="headerlink" title="5. é…ç½®ç³»ç»Ÿ"></a>5. é…ç½®ç³»ç»Ÿ</h3><p>å®ç°å®Œæ•´çš„é…ç½®ç®¡ç†ï¼š</p><ul><li>è‡ªå®šä¹‰ä¿å­˜è·¯å¾„</li><li>å¼€æœºè‡ªå¯åŠ¨é€‰é¡¹</li><li>å­—ä½“è®¾ç½®</li><li>çª—å£ä½ç½®è®°å¿†</li></ul><h3 id="6-é¡¹ç›®é‡æ„ä¸é‡å‘½å"><a href="#6-é¡¹ç›®é‡æ„ä¸é‡å‘½å" class="headerlink" title="6. é¡¹ç›®é‡æ„ä¸é‡å‘½å"></a>6. é¡¹ç›®é‡æ„ä¸é‡å‘½å</h3><p>å°†é¡¹ç›®ä» StickyNote é‡å‘½åä¸º MarkNoteï¼š</p><ul><li>æ›´æ–°æ‰€æœ‰ç›¸å…³æ–‡ä»¶å</li><li>ä¿®æ”¹ä»£ç ä¸­çš„å¼•ç”¨</li><li>æ›´æ–°æ–‡æ¡£å’Œè¯´æ˜</li><li>è°ƒæ•´ GitHub ä»“åº“è®¾ç½®</li></ul><h2 id="æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ"><a href="#æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ"></a>æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="1-Markdown-æ¸²æŸ“æ€§èƒ½"><a href="#1-Markdown-æ¸²æŸ“æ€§èƒ½" class="headerlink" title="1. Markdown æ¸²æŸ“æ€§èƒ½"></a>1. Markdown æ¸²æŸ“æ€§èƒ½</h3><p><strong>é—®é¢˜</strong>: å®æ—¶æ¸²æŸ“å¯¼è‡´ç•Œé¢å¡é¡¿</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>: </p><ul><li>ä½¿ç”¨ QTimer å®ç°å»¶è¿Ÿæ¸²æŸ“</li><li>ä¼˜åŒ–æ¸²æŸ“é€»è¾‘</li><li>æ·»åŠ ç¼“å­˜æœºåˆ¶</li></ul><h3 id="2-æ•°æ®æŒä¹…åŒ–"><a href="#2-æ•°æ®æŒä¹…åŒ–" class="headerlink" title="2. æ•°æ®æŒä¹…åŒ–"></a>2. æ•°æ®æŒä¹…åŒ–</h3><p><strong>é—®é¢˜</strong>: éœ€è¦å¯é çš„æ•°æ®ä¿å­˜æœºåˆ¶</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ul><li>ä½¿ç”¨ INI æ–‡ä»¶æ ¼å¼å­˜å‚¨æ•°æ®</li><li>å®ç°è‡ªåŠ¨ä¿å­˜åŠŸèƒ½</li><li>æ·»åŠ æ•°æ®å¤‡ä»½æœºåˆ¶</li></ul><h3 id="3-ç³»ç»Ÿæ‰˜ç›˜é›†æˆ"><a href="#3-ç³»ç»Ÿæ‰˜ç›˜é›†æˆ" class="headerlink" title="3. ç³»ç»Ÿæ‰˜ç›˜é›†æˆ"></a>3. ç³»ç»Ÿæ‰˜ç›˜é›†æˆ</h3><p><strong>é—®é¢˜</strong>: æ‰˜ç›˜å›¾æ ‡ç®¡ç†å¤æ‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ul><li>å®ç°æ‰˜ç›˜èœå•</li><li>ä¼˜åŒ–å›¾æ ‡æ˜¾ç¤º</li><li>æ·»åŠ å¿«æ·æ“ä½œ</li></ul><h2 id="å¼€å‘å·¥å…·ä¸æ•ˆç‡"><a href="#å¼€å‘å·¥å…·ä¸æ•ˆç‡" class="headerlink" title="å¼€å‘å·¥å…·ä¸æ•ˆç‡"></a>å¼€å‘å·¥å…·ä¸æ•ˆç‡</h2><p>ä½¿ç”¨ Cursor IDE è¿›è¡Œå¼€å‘ï¼Œå®ƒæä¾›äº†ï¼š</p><ul><li>AI è¾…åŠ©ç¼–ç¨‹</li><li>æ™ºèƒ½ä»£ç è¡¥å…¨</li><li>å®æ—¶ä»£ç åˆ†æ</li><li>å¿«é€Ÿé‡æ„å·¥å…·</li></ul><h2 id="é¡¹ç›®å‘å¸ƒ"><a href="#é¡¹ç›®å‘å¸ƒ" class="headerlink" title="é¡¹ç›®å‘å¸ƒ"></a>é¡¹ç›®å‘å¸ƒ</h2><ol><li>åˆ›å»º GitHub ä»“åº“</li><li>ç¼–å†™è¯¦ç»†æ–‡æ¡£</li><li>æ‰“åŒ…å‘å¸ƒ</li><li>æŒç»­ç»´æŠ¤å’Œæ›´æ–°</li></ol><h2 id="æœªæ¥å±•æœ›"><a href="#æœªæ¥å±•æœ›" class="headerlink" title="æœªæ¥å±•æœ›"></a>æœªæ¥å±•æœ›</h2><p>è®¡åˆ’æ·»åŠ çš„åŠŸèƒ½ï¼š</p><ul><li>å¤šä¸»é¢˜æ”¯æŒ</li><li>äº‘åŒæ­¥</li><li>å¿«æ·é”®è‡ªå®šä¹‰</li><li>æ’ä»¶ç³»ç»Ÿ</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä¸ä»…å¼€å‘äº†ä¸€ä¸ªå®ç”¨çš„å·¥å…·ï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼š</p><ul><li>PyQt5 å¼€å‘ç»éªŒ</li><li>Python é¡¹ç›®ç»“æ„</li><li>Git ç‰ˆæœ¬æ§åˆ¶</li><li>è½¯ä»¶å‘å¸ƒæµç¨‹</li></ul><p>è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªå®Œæ•´æ¡Œé¢åº”ç”¨çš„å…¨è¿‡ç¨‹ï¼Œä¹Ÿè®©æˆ‘ä½“ä¼šåˆ°äº†ç¼–ç¨‹çš„ä¹è¶£ã€‚</p><h2 id="é¡¹ç›®é“¾æ¥"><a href="#é¡¹ç›®é“¾æ¥" class="headerlink" title="é¡¹ç›®é“¾æ¥"></a>é¡¹ç›®é“¾æ¥</h2><ul><li><p>GitHub: <a href="https://github.com/xyooz/MarkNote">MarkNote</a><br>Releases: <a href="https://github.com/xyooz/MarkNote/releases">ä¸‹è½½é¡µé¢</a></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Debian12/Ubuntu22.04 å®‰è£… Docker Docker-Compose</title>
    <link href="/2025/03/16/2025-03-16-25/"/>
    <url>/2025/03/16/2025-03-16-25/</url>
    
    <content type="html"><![CDATA[<p><a href="https://u.sb/debian-install-docker/">å‚è€ƒ</a><br><em>ä¹Ÿé€‚ç”¨äº Debian 11 ä»¥åŠ Ubuntu 20.04, Ubuntu 22.04</em></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">apt <span class="hljs-keyword">update</span><br>apt upgrade -<span class="hljs-keyword">y</span><br>apt install curl <span class="hljs-keyword">vim</span> wget gnupg dpkg apt-transport-https lsb-release <span class="hljs-keyword">ca</span>-certificates<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -sS https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>debian<span class="hljs-regexp">/gpg | gpg --dearmor &gt; /u</span>sr<span class="hljs-regexp">/share/</span>keyrings/docker-ce.gpg<br>echo <span class="hljs-string">&quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian $(lsb_release -sc) stable&quot;</span> &gt; <span class="hljs-regexp">/etc/</span>apt<span class="hljs-regexp">/sources.list.d/</span>docker.list<br></code></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">apt <span class="hljs-keyword">update</span><br>apt install docker-ce docker-ce-<span class="hljs-keyword">cli</span> containerd.io docker-compose-<span class="hljs-keyword">plugin</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨æœåŠ¡å™¨ä½¿ç”¨ Ollama æœ¬åœ°éƒ¨ç½² DeepSeek-r1:8b æ¨¡å‹</title>
    <link href="/2025/02/05/2025-02-05-61/"/>
    <url>/2025/02/05/2025-02-05-61/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡è®°å½•åœ¨å®éªŒå®¤æœåŠ¡å™¨ä¸Šéƒ¨ç½²æœ¬åœ°å¤§è¯­è¨€æ¨¡å‹ <code>deepseek-r1:8b</code> çš„å®Œæ•´è¿‡ç¨‹ã€‚é€šè¿‡ <code>Ollama</code> å®ç°æ¨¡å‹æ‹‰å–å’Œè¿è¡Œï¼Œé™åˆ¶ API åªèƒ½æœ¬åœ°è®¿é—®ï¼ŒåŒæ—¶é›†æˆ <code>OpenWebUI</code> ä½œä¸ºå¯è§†åŒ–å‰ç«¯ï¼Œæ„å»ºä¸€ä¸ªç§å¯†ã€å®‰å…¨ã€ç¨³å®šçš„æœ¬åœ°å¤§æ¨¡å‹å¹³å°ã€‚</p></blockquote><p>å±•ç¤ºï¼š<br><img src="https://images/typecho//2025/04/2731588404.png" alt="2025-04-09T17:10:17.png"><br>ç‚¹å‡»è®¿é—® <a href="https://deepseek.seeu.eu.org/">Deepseek-r1:8b</a></p><h2 id="èƒŒæ™¯ä»‹ç»"><a href="#èƒŒæ™¯ä»‹ç»" class="headerlink" title="èƒŒæ™¯ä»‹ç»"></a>èƒŒæ™¯ä»‹ç»</h2><p>å®éªŒå®¤è¿‘æœŸéœ€è¦éƒ¨ç½²ä¸€ä¸ªæœ¬åœ°çš„å¤§è¯­è¨€æ¨¡å‹æ¥è¿›è¡Œä»£ç ç”Ÿæˆç±»å®éªŒã€‚è€ƒè™‘åˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å¯¹è¯èƒ½åŠ›å¼ºï¼Œå°¤å…¶åå‘ä»£ç ç¼–å†™</li><li>æ¨¡å‹èƒ½è¿è¡Œåœ¨æ¶ˆè´¹çº§æˆ–æ™®é€šç§‘ç ”æœåŠ¡å™¨ï¼ˆå¦‚ 1ï½2 å¼  3090ï¼‰</li><li>å®‰å…¨æ€§é«˜ï¼Œä¸æš´éœ² API ç»™å…¬ç½‘</li><li>å¯é€šè¿‡ Web ç•Œé¢ç›´æ¥è®¿é—®æ¨¡å‹</li></ul><p>æœ€ç»ˆé€‰æ‹©ä½¿ç”¨ï¼š</p><ul><li>æ¨¡å‹ï¼š<a href="https://huggingface.co/deepseek-ai/deepseek-coder-7b-base"><code>deepseek-coder:7b</code></a></li><li>åç«¯ï¼š<a href="https://ollama.com/"><code>Ollama</code></a></li><li>å‰ç«¯ï¼š<a href="https://github.com/open-webui/open-webui"><code>OpenWebUI</code></a></li></ul><hr><h2 id="Ollama-å®‰è£…ä¸éƒ¨ç½²"><a href="#Ollama-å®‰è£…ä¸éƒ¨ç½²" class="headerlink" title="Ollama å®‰è£…ä¸éƒ¨ç½²"></a>Ollama å®‰è£…ä¸éƒ¨ç½²</h2><h3 id="1-å®‰è£…-Ollama"><a href="#1-å®‰è£…-Ollama" class="headerlink" title="1. å®‰è£… Ollama"></a>1. å®‰è£… Ollama</h3><p>Ollama æä¾›äº†ç®€æ´çš„ CLI å·¥å…·ç”¨äºè¿è¡Œ LLMï¼Œæœ¬åœ°ä¸‹è½½å³å¯è¿è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Ubuntu / Debian</span><br>curl -fsSL https://ollama.com/install.sh | sh<br><br><span class="hljs-comment"># éªŒè¯å®‰è£…æˆåŠŸ</span><br>ollama --version<br></code></pre></td></tr></table></figure><h3 id="2-æ‹‰å–æ¨¡å‹"><a href="#2-æ‹‰å–æ¨¡å‹" class="headerlink" title="2. æ‹‰å–æ¨¡å‹"></a>2. æ‹‰å–æ¨¡å‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ollama pull deepseek-r1:8b<br></code></pre></td></tr></table></figure><h3 id="å®‰å…¨ç­–ç•¥"><a href="#å®‰å…¨ç­–ç•¥" class="headerlink" title="å®‰å…¨ç­–ç•¥"></a>å®‰å…¨ç­–ç•¥</h3><p>ä¸ºäº†ä¿è¯æœåŠ¡å™¨å®‰å…¨ï¼Œæˆ‘ä»¬ä¸å¯¹å¤–æš´éœ² Ollama API æ¥å£ï¼Œä»…å¼€æ”¾æœ¬åœ° localhost:11434ï¼Œè¿™æ ·å³ä½¿æœåŠ¡å™¨æœ‰å…¬ç½‘ IPï¼Œæ¨¡å‹æœåŠ¡ä¹Ÿä¸ä¼šè¢«å¤–éƒ¨è®¿é—®ã€‚</p><h3 id="é›†æˆ-OpenWebUI-å‰ç«¯ç•Œé¢"><a href="#é›†æˆ-OpenWebUI-å‰ç«¯ç•Œé¢" class="headerlink" title="é›†æˆ OpenWebUI å‰ç«¯ç•Œé¢"></a>é›†æˆ OpenWebUI å‰ç«¯ç•Œé¢</h3><p>ä¸ºäº†æ–¹ä¾¿äº¤äº’ä½¿ç”¨ï¼Œéƒ¨ç½²å¼€æºçš„å¯è§†åŒ–å‰ç«¯ï¼šOpenWebUIï¼Œæ”¯æŒç›´æ¥è¿æ¥ Ollamaã€‚</p><ol><li>Docker å¯åŠ¨<br>å®˜ç½‘å‘½ä»¤ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d -p 3000:8080 --gpus all --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:cuda<br></code></pre></td></tr></table></figure><ol start="2"><li>ç™»å½•ä½¿ç”¨<br>å®éªŒå®¤æœåŠ¡å™¨æ‰“å¼€ <a href="http://localhost:3000/">http://localhost:3000</a> å³å¯è®¿é—® OpenWebUIï¼Œé¦–æ¬¡ä½¿ç”¨éœ€æ³¨å†Œç”¨æˆ·è´¦å·ï¼Œä¹‹åå³å¯ç™»å½•ä½¿ç”¨ã€‚</li><li>åŸŸåè®¿é—®<br>ä½¿ç”¨ Caddy é…ç½®åŸŸååå‘ä»£ç†åˆ° OpenWebUI ç«¯å£ï¼Œå®ç°é€šè¿‡åŸŸåè®¿é—®ï¼Œæ–¹ä¾¿å¤§å®¶ä½¿ç”¨ã€‚Caddy è‡ªåŠ¨æ”¯æŒ HTTPSï¼ŒåŸºäº Go ç¼–å†™ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„è½»é‡ç½‘ç«™æœåŠ¡ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">deepseek.example.com &#123;<br>    reverse_proxy localhost:3000<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://images/typecho//2025/04/2477342134.png" alt="2025-04-09T16:55:22.png"></p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®å¡”é¢æ¿ç¼–è¯‘å®‰è£…MySQLå¼¹å‡ºæœ€ä½å†…å­˜é™åˆ¶</title>
    <link href="/2024/07/25/2024-07-25-6/"/>
    <url>/2024/07/25/2024-07-25-6/</url>
    
    <content type="html"><![CDATA[<p>å½“æœåŠ¡å™¨é…ç½®ä¸é«˜æ—¶ï¼Œç¼–è¯‘å®‰è£…MySQL 5.7å¼¹çª—â€œè‡³å°‘éœ€è¦å†…å­˜1560MBæ‰èƒ½å®‰è£…ï¼â€<br>è§£å†³æ–¹æ³•ï¼š<br>è¿›å…¥å®å¡”é¢æ¿â€“&gt;æ–‡ä»¶â€“&gt;&#x2F;www&#x2F;server&#x2F;panel&#x2F;class&#x2F;panelPlugin.py<br>æ‰¾åˆ°ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-variable language_">self</span>.check_mem_limit(versionInfo[<span class="hljs-string">&#x27;mem_limit&#x27;</span>]):<br>  limit_list.append(<span class="hljs-string">&#x27;[&#123;&#125;MB]å†…å­˜&#x27;</span>.<span class="hljs-built_in">format</span>(versionInfo[<span class="hljs-string">&#x27;mem_limit&#x27;</span>]))<br></code></pre></td></tr></table></figure><p>æ³¨é‡Šæ‰ï¼ŒåŒç†æœ€ä½CPUæ ¸å¿ƒé™åˆ¶ä¸€æ ·ï¼Œæ³¨é‡Šæ‰å¯¹åº”ä»£ç å°±å¯ä»¥ã€‚<br><u>ä¿®æ”¹åï¼Œæ³¨æ„âš <strong>é‡å¯å®å¡”é¢æ¿ç”Ÿæ•ˆ</strong>ã€‚</u><br>é‡å¯åå®‰è£…ï¼Œæ§åˆ¶å°ä»ç„¶æŠ¥é”™ï¼Œç‚¹å‡»è¿›å…¥<strong>è¯¦æƒ…</strong>ï¼Œæç¤ºæ‰§è¡Œ ******* å‘½ä»¤åå¯ä»¥è¿›è¡Œ<strong>å¼ºè¡Œå®‰è£…</strong>ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤åï¼Œå†æ¬¡è¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œå®‰è£…å³å¯æ­£å¸¸å¼€å§‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
      <category>ç½‘ç«™è¿ç»´</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®å¡”é¢æ¿</tag>
      
      <tag>æœåŠ¡å™¨ç®¡ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Caddy ä¸ Cloudflare é…ç½®é™·é˜±ï¼šHTTPS é‡å®šå‘å¾ªç¯</title>
    <link href="/2024/06/25/2024-06-25-59/"/>
    <url>/2024/06/25/2024-06-25-59/</url>
    
    <content type="html"><![CDATA[<h2 id="Caddy-ä¸-Cloudflare-é…ç½®é™·é˜±ï¼šHTTPS-é‡å®šå‘å¾ªç¯"><a href="#Caddy-ä¸-Cloudflare-é…ç½®é™·é˜±ï¼šHTTPS-é‡å®šå‘å¾ªç¯" class="headerlink" title="Caddy ä¸ Cloudflare é…ç½®é™·é˜±ï¼šHTTPS é‡å®šå‘å¾ªç¯"></a>Caddy ä¸ Cloudflare é…ç½®é™·é˜±ï¼šHTTPS é‡å®šå‘å¾ªç¯</h2><p>åœ¨ä½¿ç”¨ Caddy æ­å»ºç½‘ç«™å¹¶å¯ç”¨ Cloudflare CDN æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜â€”â€”æµè§ˆå™¨æç¤º â€œToo many redirectsâ€ã€‚</p><h2 id="é—®é¢˜æ‰€åœ¨-Caddy-Cloudflare-Flexible-SSL-ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#é—®é¢˜æ‰€åœ¨-Caddy-Cloudflare-Flexible-SSL-ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="é—®é¢˜æ‰€åœ¨ Caddy + Cloudflare Flexible SSL ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>é—®é¢˜æ‰€åœ¨ Caddy + Cloudflare Flexible SSL ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h2><p>å½“ Cloudflare å‘æºæœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼ˆFlexible æ¨¡å¼ï¼‰ï¼Œå®ƒå‘çš„æ˜¯ HTTP è¯·æ±‚ï¼Œè€Œ Caddy ä¼šé»˜è®¤é‡å®šå‘åˆ° HTTPSï¼ˆå› ä¸ºå®ƒè®¤ä¸ºä½ è¦å®‰å…¨åœ°è®¿é—®ç«™ç‚¹ï¼‰ã€‚</p><p>è¿™å°±é€ æˆäº†ä¸€ä¸ªæ­»å¾ªç¯ï¼š</p><ol><li><p>ç”¨æˆ·è®¿é—® <a href="https://example.com./">https://example.comã€‚</a></p></li><li><p>Cloudflare æ¥æ”¶è¯·æ±‚ï¼ŒæŒ‰ Flexible è®¾ç½®ï¼Œç”¨ HTTP è®¿é—®ä½ çš„æºæœåŠ¡å™¨ã€‚</p></li><li><p>Caddy æ¥æ”¶åˆ° HTTP è¯·æ±‚ï¼Œè‡ªåŠ¨å°†å…¶é‡å®šå‘åˆ° HTTPSã€‚</p></li><li><p>Cloudflare æ¥æ”¶åˆ°é‡å®šå‘ï¼Œå†æ¬¡ä½¿ç”¨ HTTP è¯·æ±‚è®¿é—®æºæœåŠ¡å™¨ã€‚</p></li><li><p>Caddy ç»§ç»­<strong>é‡å®šå‘</strong>â€¦â€¦ å¾ªç¯å¾€å¤ã€‚</p></li></ol><p><img src="https://images/typecho//2025/04/770728286.png" alt="2025-04-09T16:24:57.png"></p><h2 id="æ­£ç¡®åšæ³•"><a href="#æ­£ç¡®åšæ³•" class="headerlink" title="æ­£ç¡®åšæ³•"></a>æ­£ç¡®åšæ³•</h2><p>å°† Cloudflare çš„ SSL æ¨¡å¼è®¾ç½®ä¸º <code>å®Œå…¨(Full)</code> æˆ– Full (Strict)ã€‚<br>è¿™å°†ä¿è¯ Cloudflare ä¸ Caddy ä¹‹é—´çš„é€šä¿¡ä¹Ÿæ˜¯é€šè¿‡ HTTPSï¼Œå½»åº•è§£å†³é‡å®šå‘å¾ªç¯é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¬¢è¿ä½¿ç”¨ Typecho</title>
    <link href="/2024/06/22/2024-06-22-start/"/>
    <url>/2024/06/22/2024-06-22-start/</url>
    
    <content type="html"><![CDATA[<p>å¦‚æœæ‚¨çœ‹åˆ°è¿™ç¯‡æ–‡ç« ,è¡¨ç¤ºæ‚¨çš„ blog å·²ç»å®‰è£…æˆåŠŸ.</p>]]></content>
    
    
    <categories>
      
      <category>é»˜è®¤åˆ†ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
